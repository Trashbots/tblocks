!function o(s,a,l){function c(n,e){if(!a[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[n]={exports:{}};s[n][0].call(r.exports,function(e){var t=s[n][1][e];return c(t||e)},r,r.exports,o,s,a,l)}return a[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){"use strict";t.exports={version:"1.1.2",buildDate:""}},{}],2:[function(w,S,e){(function(t){"use strict";function o(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0}function s(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var u=w("util/"),i=Object.prototype.hasOwnProperty,d=Array.prototype.slice,n="foo"===function(){}.name;function a(e){return Object.prototype.toString.call(e)}function l(e){return!s(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var c=S.exports=e,r=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(u.isFunction(e)){if(n)return e.name;var t=e.toString().match(r);return t&&t[1]}}function h(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function f(e){if(n||!u.isFunction(e))return u.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function v(e,t,n,i,r){throw new c.AssertionError({message:n,actual:e,expected:t,operator:i,stackStartFunction:r})}function e(e,t){e||v(e,!0,t,"==",c.ok)}function g(e,t,n,i){if(e===t)return!0;if(s(e)&&s(t))return 0===o(e,t);if(u.isDate(e)&&u.isDate(t))return e.getTime()===t.getTime();if(u.isRegExp(e)&&u.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&a(e)===a(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(s(e)!==s(t))return!1;var r=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==r&&r===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),function(e,t,n,i){if(null==e||null==t)return!1;if(u.isPrimitive(e)||u.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=m(e),o=m(t);if(r&&!o||!r&&o)return!1;if(r)return e=d.call(e),t=d.call(t),g(e,t,n);var s,a,l=x(e),c=x(t);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;0<=a;a--)if(l[a]!==c[a])return!1;for(a=l.length-1;0<=a;a--)if(s=l[a],!g(e[s],t[s],n,i))return!1;return!0}(e,t,n,i))}return n?e===t:e==t}function m(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function b(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e,t,n,i){var r;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(e){var t;try{e()}catch(e){t=e}return t}(t),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!r&&v(r,n,"Missing expected exception"+i);var o="string"==typeof i,s=!e&&r&&!n;if((!e&&u.isError(r)&&o&&b(r,n)||s)&&v(r,n,"Got unwanted exception"+i),e&&r&&n&&!b(r,n)||!e&&r)throw r}c.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return h(f(e.actual),128)+" "+e.operator+" "+h(f(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var i=n.stack,r=p(t),o=i.indexOf("\n"+r);if(0<=o){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},u.inherits(c.AssertionError,Error),c.fail=v,c.ok=e,c.equal=function(e,t,n){e!=t&&v(e,t,n,"==",c.equal)},c.notEqual=function(e,t,n){e==t&&v(e,t,n,"!=",c.notEqual)},c.deepEqual=function(e,t,n){g(e,t,!1)||v(e,t,n,"deepEqual",c.deepEqual)},c.deepStrictEqual=function(e,t,n){g(e,t,!0)||v(e,t,n,"deepStrictEqual",c.deepStrictEqual)},c.notDeepEqual=function(e,t,n){g(e,t,!1)&&v(e,t,n,"notDeepEqual",c.notDeepEqual)},c.notDeepStrictEqual=function e(t,n,i){g(t,n,!0)&&v(t,n,i,"notDeepStrictEqual",e)},c.strictEqual=function(e,t,n){e!==t&&v(e,t,n,"===",c.strictEqual)},c.notStrictEqual=function(e,t,n){e===t&&v(e,t,n,"!==",c.notStrictEqual)},c.throws=function(e,t,n){y(!0,e,t,n)},c.doesNotThrow=function(e,t,n){y(!1,e,t,n)},c.ifError=function(e){if(e)throw e};var x=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":17}],3:[function(i,r,o){!function(e,t){if("function"==typeof define&&define.amd)define(["module","select"],t);else if(void 0!==o)t(r,i("select"));else{var n={exports:{}};t(n,e.select),e.clipboardAction=n.exports}}(this,function(e,t){"use strict";var n,i=(n=t)&&n.__esModule?n:{default:n};var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=(function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(a,[{key:"resolveOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(e){var t=0<arguments.length&&void 0!==e?e:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.resolveOptions(e),this.initSelection()}e.exports=s})},{select:13}],4:[function(i,r,o){!function(e,t){if("function"==typeof define&&define.amd)define(["module","./clipboard-action","tiny-emitter","good-listener"],t);else if(void 0!==o)t(r,i("./clipboard-action"),i("tiny-emitter"),i("good-listener"));else{var n={exports:{}};t(n,e.clipboardAction,e.tinyEmitter,e.goodListener),e.clipboard=n.exports}}(this,function(e,t,n,i){"use strict";var r=a(t),o=a(n),s=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var c=function(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e};function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,o.default),c(p,[{key:"resolveOptions",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===l(t.container)?t.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,s.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new r.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return h("action",e)}},{key:"defaultTarget",value:function(e){var t=h("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return h("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(e){var t=0<arguments.length&&void 0!==e?e:["copy","cut"],n="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return n.forEach(function(e){i=i&&!!document.queryCommandSupported(e)}),i}}]),p);function p(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return n.resolveOptions(t),n.listenClick(e),n}function h(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=d})},{"./clipboard-action":3,"good-listener":8,"tiny-emitter":15}],5:[function(e,t,n){if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}t.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},{}],6:[function(e,t,n){var s=e("./closest");t.exports=function(e,t,n,i,r){var o=function(t,n,e,i){return function(e){e.delegateTarget=s(e.target,n),e.delegateTarget&&i.call(t,e)}}.apply(this,arguments);return e.addEventListener(n,o,r),{destroy:function(){e.removeEventListener(n,o,r)}}}},{"./closest":5}],7:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],8:[function(e,t,n){var i=e("./is"),r=e("delegate");t.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(i.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(i.string(e))return function(e,t,n){return r(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":7,delegate:6}],9:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],10:[function(e,lt,ct){!function(i){"use strict";if(i){var l,S,p,u,h,f,v,g,m,e,r=(e=i.document.createTextNode("")).ownerDocument!==i.document&&"function"==typeof i.wrap&&i.wrap(e)===e?i.wrap(i):i,s=r.document,t=r.DocumentFragment||ee,d=r.SVGElement||ee,b=r.SVGSVGElement||ee,n=r.SVGElementInstance||ee,y=r.HTMLElement||r.Element,o=r.PointerEvent||r.MSPointerEvent,O=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},a={},c=[],k=[],x=[],w=!1,E={},N={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:s,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},C={interaction:null,i:null,x:0,y:0,scroll:function(){var e,t,n,i,r=C.interaction.target.options[C.interaction.prepared.name].autoScroll,o=r.container||we(C.interaction.element),s=(new Date).getTime(),a=(s-C.prevTimeX)/1e3,l=(s-C.prevTimeY)/1e3;r.velocity?(e=r.velocity.x,t=r.velocity.y):e=t=r.speed,i=t*l,(1<=(n=e*a)||1<=i)&&(ne(o)?o.scrollBy(C.x*n,C.y*i):o&&(o.scrollLeft+=C.x*n,o.scrollTop+=C.y*i),1<=n&&(C.prevTimeX=s),1<=i&&(C.prevTimeY=s)),C.isScrolling&&(G(C.i),C.i=V(C.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(e){C.isScrolling=!0,G(C.i),C.interaction=e,C.prevTimeX=(new Date).getTime(),C.prevTimeY=(new Date).getTime(),C.i=V(C.scroll)},stop:function(){C.isScrolling=!1,G(C.i)}},T="ontouchstart"in r||r.DocumentTouch&&s instanceof r.DocumentTouch,D=o&&!/Chrome/.test(navigator.userAgent),B=T||D?20:10,A=1,j=0,I=1/0,R=s.all&&!r.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},P={drag:!0,resize:!0,gesture:!0},L="onmousewheel"in s?"mousewheel":"wheel",M=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],_={},z="Opera"==navigator.appName&&T&&navigator.userAgent.match("Presto"),F=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),H="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",V=i.requestAnimationFrame,G=i.cancelAnimationFrame,W=(u=(p="attachEvent"in r&&!("addEventListener"in r))?"attachEvent":"addEventListener",h=p?"detachEvent":"removeEventListener",f=p?"on":"",{add:function(t,e,n,i){var r=rt(v,t),o=g[r];if(o||(o={events:{},typeCount:0},r=v.push(t)-1,g.push(o),m.push(p?{supplied:[],wrapped:[],useCount:[]}:null)),o.events[e]||(o.events[e]=[],o.typeCount++),!ot(o.events[e],n)){var s;if(p){var a=m[r],l=rt(a.supplied,n),c=a.wrapped[l]||function(e){e.immediatePropagationStopped||(e.target=e.srcElement,e.currentTarget=t,e.preventDefault=e.preventDefault||J,e.stopPropagation=e.stopPropagation||Q,e.stopImmediatePropagation=e.stopImmediatePropagation||Z,/mouse|click/.test(e.type)&&(e.pageX=e.clientX+we(t).document.documentElement.scrollLeft,e.pageY=e.clientY+we(t).document.documentElement.scrollTop),n(e))};s=t[u](f+e,c,Boolean(i)),-1===l?(a.supplied.push(n),a.wrapped.push(c),a.useCount.push(1)):a.useCount[l]++}else s=t[u](e,n,i||!1);return o.events[e].push(n),s}},remove:function e(t,n,i,r){var o,s,a,l=rt(v,t),c=g[l],u=i;if(c&&c.events)if(p&&(a=rt((s=m[l]).supplied,i),u=s.wrapped[a]),"all"!==n){if(c.events[n]){var d=c.events[n].length;if("all"===i){for(o=0;o<d;o++)e(t,n,c.events[n][o],Boolean(r));return}for(o=0;o<d;o++)if(c.events[n][o]===i){t[h](f+n,u,r||!1),c.events[n].splice(o,1),p&&s&&(s.useCount[a]--,0===s.useCount[a]&&(s.supplied.splice(a,1),s.wrapped.splice(a,1),s.useCount.splice(a,1)));break}c.events[n]&&0===c.events[n].length&&(c.events[n]=null,c.typeCount--)}c.typeCount||(g.splice(l,1),v.splice(l,1),m.splice(l,1))}else for(n in c.events)c.events.hasOwnProperty(n)&&e(t,n,"all")},useAttachEvent:p,_elements:v=[],_targets:g=[],_attachedListeners:m=[]}),Y={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};Ve.prototype={getPageXY:function(e,t){return me(e,t)},getClientXY:function(e,t){return be(e,t)},setEventXY:function(e,t){return function(e,t){var n=1<t.length?Ce(t):t[0];me(n,a),e.page.x=a.x,e.page.y=a.y,be(n,a),e.client.x=a.x,e.client.y=a.y,e.timeStamp=(new Date).getTime()}(e,t)},pointerOver:function(e,t,n){if(!this.prepared.name&&this.mouse){var i=[],r=[],o=this.element;this.addPointer(e),!this.target||!Le(this.target,this.element,n)&&Me(this.target,this.element,n)||(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var s=k.get(n),a=s&&!Le(s,n,n)&&Me(s,n,n)&&$e(s.getAction(e,t,this,n),s);a&&!He(s,n,a)&&(a=null),a?(this.target=s,this.element=n,this.matches=[],this.matchElements=[]):(k.forEachSelector(function(e,t){e&&Pe(e,n)&&!Le(e,n,n)&&Me(e,n,n)&&st(n,t)&&(i.push(e),r.push(n))}),this.validateSelector(e,t,i,r)?(this.matches=i,this.matchElements=r,this.pointerHover(e,t,this.matches,this.matchElements),W.add(n,D?l.move:"mousemove",q.pointerHover)):this.target&&(je(o,n)?(this.pointerHover(e,t,this.matches,this.matchElements),W.add(this.element,D?l.move:"mousemove",q.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(e,t,n,i,r,o){var s,a=this.target;!this.prepared.name&&this.mouse?(this.setEventXY(this.curCoords,[e]),r?s=this.validateSelector(e,t,r,o):a&&(s=$e(a.getAction(this.pointers[0],t,this,this.element),this.target)),a&&a.options.styleCursor&&(a._doc.documentElement.style.cursor=s?Xe(s):"")):this.prepared.name&&this.checkAndPreventDefault(t,a,this.element)},pointerOut:function(e,t,n){this.prepared.name||(k.get(n)||W.remove(n,D?l.move:"mousemove",q.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(e,t,r,n){var i,o=this,s=W.useAttachEvent?de({},t):t,a=r,l=this.addPointer(e);if(this.holdTimers[l]=setTimeout(function(){o.pointerHold(W.useAttachEvent?s:e,s,r,n)},N._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;te(a);){if(a===this.element&&$e(this.target.getAction(e,t,this,this.element),this.target).name===this.prepared.name)return G(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(e,t,r,"down");a=Re(a)}if(this.interacting())this.collectEventTargets(e,t,r,"down");else{for(this.setEventXY(this.curCoords,[e]),this.downEvent=t;te(a)&&!i;)this.matches=[],this.matchElements=[],k.forEachSelector(c),i=this.validateSelector(e,t,this.matches,this.matchElements),a=Re(a);if(i)return this.prepared.name=i.name,this.prepared.axis=i.axis,this.prepared.edges=i.edges,this.collectEventTargets(e,t,r,"down"),this.pointerDown(e,t,r,n,i);this.downTimes[l]=(new Date).getTime(),this.downTargets[l]=r,pe(this.downPointer,e),he(this.prevCoords,this.curCoords),this.pointerWasMoved=!1,this.collectEventTargets(e,t,r,"down")}function c(e,t,n){var i=S?n.querySelectorAll(t):void 0;Pe(e,a)&&!Le(e,a,r)&&Me(e,a,r)&&st(a,t,i)&&(o.matches.push(e),o.matchElements.push(a))}},pointerDown:function(e,t,n,i,r){if(r||this.inertiaStatus.active||!this.pointerWasMoved||!this.prepared.name){this.pointerIsDown=!0,this.downEvent=t;var o,s=this.addPointer(e);if(1<this.pointerIds.length&&this.target._element===this.element){var a=$e(r||this.target.getAction(e,t,this,this.element),this.target);He(this.target,this.element,a)&&(o=a),this.prepared.name=null}else if(!this.prepared.name){var l=k.get(i);l&&!Le(l,i,n)&&Me(l,i,n)&&(o=$e(r||l.getAction(e,t,this,i),l))&&He(l,i,o)&&(this.target=l,this.element=i)}var c=this.target,u=c&&c.options;if(!c||!r&&this.prepared.name)this.inertiaStatus.active&&i===this.element&&$e(c.getAction(e,t,this,this.element),c).name===this.prepared.name&&(G(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(t,c,this.element));else{if(o=o||$e(r||c.getAction(e,t,this,i),c,this.element),this.setEventXY(this.startCoords,this.pointers),!o)return;u.styleCursor&&(c._doc.documentElement.style.cursor=Xe(o)),this.resizeAxes="resize"===o.name?o.axis:null,"gesture"===o&&this.pointerIds.length<2&&(o=null),this.prepared.name=o.name,this.prepared.axis=o.axis,this.prepared.edges=o.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[s]=(new Date).getTime(),this.downTargets[s]=n,pe(this.downPointer,e),he(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(t,c,this.element)}}else this.checkAndPreventDefault(t,this.target,this.element)},setModifications:function(e,t){var n=this.target,i=!0,r=ze(n,this.prepared.name)&&(!n.options[this.prepared.name].snap.endOnly||t),o=Fe(n,this.prepared.name)&&(!n.options[this.prepared.name].restrict.endOnly||t);return r?this.setSnapping(e):this.snapStatus.locked=!1,o?this.setRestriction(e):this.restrictStatus.restricted=!1,r&&this.snapStatus.locked&&!this.snapStatus.changed?i=o&&this.restrictStatus.restricted&&this.restrictStatus.changed:o&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(i=!1),i},setStartOffsets:function(e,t,n){var i,r,o=t.getRect(n),s=Ae(t,n),a=t.options[this.prepared.name].snap,l=t.options[this.prepared.name].restrict;o?(this.startOffset.left=this.startCoords.page.x-o.left,this.startOffset.top=this.startCoords.page.y-o.top,this.startOffset.right=o.right-this.startCoords.page.x,this.startOffset.bottom=o.bottom-this.startCoords.page.y,i="width"in o?o.width:o.right-o.left,r="height"in o?o.height:o.bottom-o.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0);var c=a&&"startCoords"===a.offset?{x:this.startCoords.page.x-s.x,y:this.startCoords.page.y-s.y}:a&&a.offset||{x:0,y:0};if(o&&a&&a.relativePoints&&a.relativePoints.length)for(var u=0;u<a.relativePoints.length;u++)this.snapOffsets.push({x:this.startOffset.left-i*a.relativePoints[u].x+c.x,y:this.startOffset.top-r*a.relativePoints[u].y+c.y});else this.snapOffsets.push(c);o&&l.elementRect?(this.restrictOffset.left=this.startOffset.left-i*l.elementRect.left,this.restrictOffset.top=this.startOffset.top-r*l.elementRect.top,this.restrictOffset.right=this.startOffset.right-i*(1-l.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-r*(1-l.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(e,t,n){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===e.name?2:1)||(-1===rt(x,this)&&x.push(this),this.prepared.name||this.setEventXY(this.startCoords,this.pointers),this.prepared.name=e.name,this.prepared.axis=e.axis,this.prepared.edges=e.edges,this.target=t,this.element=n,this.setStartOffsets(e.name,t,n),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(e,t,r,n,i){if(this.inertiaStatus.active){var o=this.inertiaStatus.upCoords.page,s=this.inertiaStatus.upCoords.client,a={pageX:o.x+this.inertiaStatus.sx,pageY:o.y+this.inertiaStatus.sy,clientX:s.x+this.inertiaStatus.sx,clientY:s.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[a])}else this.recordPointer(e),this.setEventXY(this.curCoords,this.pointers);var l,c,u=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,d=this.mouse?0:rt(this.pointerIds,ye(e));if(this.pointerIsDown&&!this.pointerWasMoved&&(l=this.curCoords.client.x-this.startCoords.client.x,c=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=O(l,c)>A),u||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[d]),this.collectEventTargets(e,t,r,"move")),this.pointerIsDown)if(u&&this.pointerWasMoved&&!i)this.checkAndPreventDefault(t,this.target,this.element);else if(fe(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||e instanceof Ye&&/inertiastart/.test(e.type))){if(!this.interacting()&&(fe(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){var p=Math.abs(l),h=Math.abs(c),f=this.target.options.drag.axis,v=h<p?"x":p<h?"y":"xy";if("xy"!=v&&"xy"!==f&&f!==v){this.prepared.name=null;for(var g=r;te(g);){var m=k.get(g);if(m&&m!==this.target&&!m.options.drag.manualStart&&"drag"===m.getAction(this.downPointer,this.downEvent,this,g).name&&_e(v,m)){this.prepared.name="drag",this.target=m,this.element=g;break}g=Re(g)}if(!this.prepared.name){var b=this,y=function(e,t,n){var i=S?n.querySelectorAll(t):void 0;if(e!==b.target)return Pe(e,r)&&!e.options.drag.manualStart&&!Le(e,g,r)&&Me(e,g,r)&&st(g,t,i)&&"drag"===e.getAction(b.downPointer,b.downEvent,b,g).name&&_e(v,e)&&He(e,g,"drag")?e:void 0};for(g=r;te(g);){var x=k.forEachSelector(y);if(x){this.prepared.name="drag",this.target=x,this.element=g;break}g=Re(g)}}}}var w=!!this.prepared.name&&!this.interacting();if(w&&(this.target.options[this.prepared.name].manualStart||!He(this.target,this.element,this.prepared)))return void this.stop(t);if(this.prepared.name&&this.target)w&&this.start(this.prepared,this.target,this.element),(this.setModifications(this.curCoords.page,i)||w)&&(this.prevEvent=this[this.prepared.name+"Move"](t)),this.checkAndPreventDefault(t,this.target,this.element)}he(this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&this.autoScrollMove(e)}},dragStart:function(e){var t=new Ye(this,e,"drag","start",this.element);this.dragging=!0,this.target.fire(t),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var n=this.getDropEvents(e,t);return n.activate&&this.fireActiveDrops(n.activate),t},dragMove:function(e){var t=this.target,n=new Ye(this,e,"drag","move",this.element),i=this.element,r=this.getDrop(n,e,i);this.dropTarget=r.dropzone,this.dropElement=r.element;var o=this.getDropEvents(e,n);return t.fire(n),o.leave&&this.prevDropTarget.fire(o.leave),o.enter&&this.dropTarget.fire(o.enter),o.move&&this.dropTarget.fire(o.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,n},resizeStart:function(e){var t=new Ye(this,e,"resize","start",this.element);if(this.prepared.edges){var n=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var i=de({},this.prepared.edges);i.top=i.top||i.left&&!i.bottom,i.left=i.left||i.top&&!i.right,i.bottom=i.bottom||i.right&&!i.top,i.right=i.right||i.bottom&&!i.left,this.prepared._linkedEdges=i}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=n.width/n.height),this.resizeRects={start:n,current:de({},n),restricted:de({},n),previous:de({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},t.rect=this.resizeRects.restricted,t.deltaRect=this.resizeRects.delta}return this.target.fire(t),this.resizing=!0,t},resizeMove:function(e){var t=new Ye(this,e,"resize","move",this.element),n=this.prepared.edges,i=this.target.options.resize.invert,r="reposition"===i||"negate"===i;if(n){var o,s=t.dx,a=t.dy,l=this.resizeRects.start,c=this.resizeRects.current,u=this.resizeRects.restricted,d=this.resizeRects.delta,p=de(this.resizeRects.previous,u),h=n;if(this.target.options.resize.preserveAspectRatio){var f=this.resizeStartAspectRatio;n=this.prepared._linkedEdges,h.left&&h.bottom||h.right&&h.top?a=-s/f:h.left||h.right?a=s/f:(h.top||h.bottom)&&(s=a*f)}else this.target.options.resize.square&&(n=this.prepared._linkedEdges,h.left&&h.bottom||h.right&&h.top?a=-s:h.left||h.right?a=s:(h.top||h.bottom)&&(s=a));if(n.top&&(c.top+=a),n.bottom&&(c.bottom+=a),n.left&&(c.left+=s),n.right&&(c.right+=s),r){if(de(u,c),"reposition"===i)u.top>u.bottom&&(o=u.top,u.top=u.bottom,u.bottom=o),u.left>u.right&&(o=u.left,u.left=u.right,u.right=o)}else u.top=Math.min(c.top,l.bottom),u.bottom=Math.max(c.bottom,l.top),u.left=Math.min(c.left,l.right),u.right=Math.max(c.right,l.left);for(var v in u.width=u.right-u.left,u.height=u.bottom-u.top,u)d[v]=u[v]-p[v];t.edges=this.prepared.edges,t.rect=u,t.deltaRect=d}return this.target.fire(t),t},gestureStart:function(e){var t=new Ye(this,e,"gesture","start",this.element);return t.ds=0,this.gesture.startDistance=this.gesture.prevDistance=t.distance,this.gesture.startAngle=this.gesture.prevAngle=t.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(t),t},gestureMove:function(e){return this.pointerIds.length?((t=new Ye(this,e,"gesture","move",this.element)).ds=t.scale-this.gesture.scale,this.target.fire(t),this.gesture.prevAngle=t.angle,this.gesture.prevDistance=t.distance,t.scale===1/0||null===t.scale||void 0===t.scale||isNaN(t.scale)||(this.gesture.scale=t.scale),t):this.prevEvent;var t},pointerHold:function(e,t,n){this.collectEventTargets(e,t,n,"hold")},pointerUp:function(e,t,n,i){var r=this.mouse?0:rt(this.pointerIds,ye(e));clearTimeout(this.holdTimers[r]),this.collectEventTargets(e,t,n,"up"),this.collectEventTargets(e,t,n,"tap"),this.pointerEnd(e,t,n,i),this.removePointer(e)},pointerCancel:function(e,t,n,i){var r=this.mouse?0:rt(this.pointerIds,ye(e));clearTimeout(this.holdTimers[r]),this.collectEventTargets(e,t,n,"cancel"),this.pointerEnd(e,t,n,i),this.removePointer(e)},ie8Dblclick:function(e,t,n){this.prevTap&&t.clientX===this.prevTap.clientX&&t.clientY===this.prevTap.clientY&&n===this.prevTap.target&&(this.downTargets[0]=n,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(e,t,n,"tap"))},pointerEnd:function(e,t,n,i){var r,o=this.target,s=o&&o.options,a=s&&this.prepared.name&&s[this.prepared.name].inertia,l=this.inertiaStatus;if(this.interacting()){if(l.active&&!l.ending)return;var c,u,d,p=(new Date).getTime(),h=!1,f=ze(o,this.prepared.name)&&s[this.prepared.name].snap.endOnly,v=Fe(o,this.prepared.name)&&s[this.prepared.name].restrict.endOnly,g=0,m=0;if(c=this.dragging?"x"===s.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===s.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,d=(u=a&&a.enabled&&"gesture"!==this.prepared.name&&t!==l.startEvent)&&p-this.curCoords.timeStamp<50&&c>a.minSpeed&&c>a.endSpeed,u&&!d&&(f||v)){var b={};b.snap=b.restrict=b,f&&(this.setSnapping(this.curCoords.page,b),b.locked&&(g+=b.dx,m+=b.dy)),v&&(this.setRestriction(this.curCoords.page,b),b.restricted&&(g+=b.dx,m+=b.dy)),(g||m)&&(h=!0)}if(d||h){if(he(l.upCoords,this.curCoords),this.pointers[0]=l.startEvent=new Ye(this,t,this.prepared.name,"inertiastart",this.element),l.t0=p,o.fire(l.startEvent),d){l.vx0=this.pointerDelta.client.vx,l.vy0=this.pointerDelta.client.vy,l.v0=c,this.calcInertia(l);var y,x=de({},this.curCoords.page),w=Ae(o,this.element);if(x.x=x.x+l.xe-w.x,x.y=x.y+l.ye-w.y,(y={useStatusXY:!0,x:x.x,y:x.y,dx:0,dy:0,snap:null}).snap=y,g=m=0,f){var S=this.setSnapping(this.curCoords.page,y);S.locked&&(g+=S.dx,m+=S.dy)}if(v){var k=this.setRestriction(this.curCoords.page,y);k.restricted&&(g+=k.dx,m+=k.dy)}l.modifiedXe+=g,l.modifiedYe+=m,l.i=V(this.boundInertiaFrame)}else l.smoothEnd=!0,l.xe=g,l.ye=m,l.sx=l.sy=0,l.i=V(this.boundSmoothEndFrame);return void(l.active=!0)}(f||v)&&this.pointerMove(e,t,n,i,!0)}if(this.dragging){r=new Ye(this,t,"drag","end",this.element);var E=this.element,C=this.getDrop(r,t,E);this.dropTarget=C.dropzone,this.dropElement=C.element;var T=this.getDropEvents(t,r);T.leave&&this.prevDropTarget.fire(T.leave),T.enter&&this.dropTarget.fire(T.enter),T.drop&&this.dropTarget.fire(T.drop),T.deactivate&&this.fireActiveDrops(T.deactivate),o.fire(r)}else this.resizing?(r=new Ye(this,t,"resize","end",this.element),o.fire(r)):this.gesturing&&(r=new Ye(this,t,"gesture","end",this.element),o.fire(r));this.stop(t)},collectDrops:function(e){var t,n=[],i=[];for(e=e||this.element,t=0;t<k.length;t++)if(k[t].options.drop.enabled){var r=k[t],o=r.options.drop.accept;if(!(te(o)&&o!==e||ce(o)&&!st(e,o)))for(var s=r.selector?r._context.querySelectorAll(r.selector):[r._element],a=0,l=s.length;a<l;a++){var c=s[a];c!==e&&(n.push(r),i.push(c))}}return{dropzones:n,elements:i}},fireActiveDrops:function(e){var t,n,i,r;for(t=0;t<this.activeDrops.dropzones.length;t++)n=this.activeDrops.dropzones[t],(i=this.activeDrops.elements[t])!==r&&(e.target=i,n.fire(e)),r=i},setActiveDrops:function(e){var t=this.collectDrops(e,!0);this.activeDrops.dropzones=t.dropzones,this.activeDrops.elements=t.elements,this.activeDrops.rects=[];for(var n=0;n<this.activeDrops.dropzones.length;n++)this.activeDrops.rects[n]=this.activeDrops.dropzones[n].getRect(this.activeDrops.elements[n])},getDrop:function(e,t,n){var i=[];w&&this.setActiveDrops(n);for(var r=0;r<this.activeDrops.dropzones.length;r++){var o=this.activeDrops.dropzones[r],s=this.activeDrops.elements[r],a=this.activeDrops.rects[r];i.push(o.dropCheck(e,t,this.target,n,s,a)?s:null)}var l=function(e){var t,n,i,r,o,s=e[0],a=s?0:-1,l=[],c=[];for(r=1;r<e.length;r++)if((t=e[r])&&t!==s)if(s){if(t.parentNode!==t.ownerDocument)if(s.parentNode!==t.ownerDocument){if(!l.length)for(n=s;n.parentNode&&n.parentNode!==n.ownerDocument;)l.unshift(n),n=n.parentNode;if(s instanceof y&&t instanceof d&&!(t instanceof b)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(c=[];n.parentNode!==n.ownerDocument;)c.unshift(n),n=n.parentNode;for(o=0;c[o]&&c[o]===l[o];)o++;var u=[c[o-1],c[o],l[o]];for(i=u[0].lastChild;i;){if(i===u[1]){s=t,a=r,l=[];break}if(i===u[2])break;i=i.previousSibling}}else s=t,a=r}else s=t,a=r;return a}(i);return{dropzone:this.activeDrops.dropzones[l]||null,element:this.activeDrops.elements[l]||null}},getDropEvents:function(e,t){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(n.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dragleave"},t.dragLeave=this.prevDropElement,t.prevDropzone=this.prevDropTarget),this.dropTarget&&(n.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dragenter"},t.dragEnter=this.dropElement,t.dropzone=this.dropTarget)),"dragend"===t.type&&this.dropTarget&&(n.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"drop"},t.dropzone=this.dropTarget),"dragstart"===t.type&&(n.activate={target:null,dropzone:null,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dropactivate"}),"dragend"===t.type&&(n.deactivate={target:null,dropzone:null,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dropdeactivate"}),"dragmove"===t.type&&this.dropTarget&&(n.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,dragmove:t,timeStamp:t.timeStamp,type:"dropmove"},t.dropzone=this.dropTarget),n},currentAction:function(){return(this.dragging?"drag":this.resizing&&"resize")||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null,this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(e){if(this.interacting()){C.stop(),this.matches=[],this.matchElements=[];var t=this.target;t.options.styleCursor&&(t._doc.documentElement.style.cursor=""),e&&se(e.preventDefault)&&this.checkAndPreventDefault(e,t,this.element),this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets(),this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var n=0;n<this.pointers.length;n++)-1===rt(this.pointerIds,ye(this.pointers[n]))&&this.pointers.splice(n,1)},inertiaFrame:function(){var e=this.inertiaStatus,t=this.target.options[this.prepared.name].inertia.resistance,n=(new Date).getTime()/1e3-e.t0;if(n<e.te){var i=1-(Math.exp(-t*n)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye)e.sx=e.xe*i,e.sy=e.ye*i;else{var r=function(e,t,n,i,r,o,s){return{x:Oe(s,e,n,r),y:Oe(s,t,i,o)}}(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,i);e.sx=r.x,e.sy=r.y}this.pointerMove(e.startEvent,e.startEvent),e.i=V(this.boundInertiaFrame)}else e.ending=!0,e.sx=e.modifiedXe,e.sy=e.modifiedYe,this.pointerMove(e.startEvent,e.startEvent),this.pointerEnd(e.startEvent,e.startEvent),e.active=e.ending=!1},smoothEndFrame:function(){var e=this.inertiaStatus,t=(new Date).getTime()-e.t0,n=this.target.options[this.prepared.name].inertia.smoothEndDuration;t<n?(e.sx=Ne(t,0,e.xe,n),e.sy=Ne(t,0,e.ye,n),this.pointerMove(e.startEvent,e.startEvent),e.i=V(this.boundSmoothEndFrame)):(e.ending=!0,e.sx=e.xe,e.sy=e.ye,this.pointerMove(e.startEvent,e.startEvent),this.pointerEnd(e.startEvent,e.startEvent),e.smoothEnd=e.active=e.ending=!1)},addPointer:function(e){var t=ye(e),n=this.mouse?0:rt(this.pointerIds,t);return-1===n&&(n=this.pointerIds.length),this.pointerIds[n]=t,this.pointers[n]=e,n},removePointer:function(e){var t=ye(e),n=this.mouse?0:rt(this.pointerIds,t);-1!==n&&(this.pointers.splice(n,1),this.pointerIds.splice(n,1),this.downTargets.splice(n,1),this.downTimes.splice(n,1),this.holdTimers.splice(n,1))},recordPointer:function(e){var t=this.mouse?0:rt(this.pointerIds,ye(e));-1!==t&&(this.pointers[t]=e)},collectEventTargets:function(e,t,r,o){var n=this.mouse?0:rt(this.pointerIds,ye(e));if("tap"!==o||!this.pointerWasMoved&&this.downTargets[n]&&this.downTargets[n]===r){for(var s=[],a=[],l=r;l;)Ze.isSet(l)&&Ze(l)._iEvents[o]&&(s.push(Ze(l)),a.push(l)),k.forEachSelector(i),l=Re(l);!s.length&&"tap"!==o||this.firePointers(e,t,r,s,a,o)}function i(e,t,n){var i=S?n.querySelectorAll(t):void 0;e._iEvents[o]&&te(l)&&Pe(e,l)&&!Le(e,l,r)&&Me(e,l,r)&&st(l,t,i)&&(s.push(e),a.push(l))}},firePointers:function(e,t,n,i,r,o){var s,a,l,c=this.mouse?0:rt(this.pointerIds,ye(e)),u={};for("doubletap"===o?u=e:(pe(u,t),t!==e&&pe(u,e),u.preventDefault=qe,u.stopPropagation=Ye.prototype.stopPropagation,u.stopImmediatePropagation=Ye.prototype.stopImmediatePropagation,u.interaction=this,u.timeStamp=(new Date).getTime(),u.originalEvent=t,u.originalPointer=e,u.type=o,u.pointerId=ye(e),u.pointerType=this.mouse?"mouse":D?ce(e.pointerType)?e.pointerType:[,,"touch","pen","mouse"][e.pointerType]:"touch"),"tap"===o&&(u.dt=u.timeStamp-this.downTimes[c],a=u.timeStamp-this.tapTime,l=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===u.target&&a<500),u.double=l,this.tapTime=u.timeStamp),s=0;s<i.length&&(u.currentTarget=r[s],u.interactable=i[s],i[s].fire(u),!(u.immediatePropagationStopped||u.propagationStopped&&r[s+1]!==u.currentTarget));s++);if(l){var d={};de(d,u),d.dt=a,d.type="doubletap",this.collectEventTargets(d,t,n,"doubletap"),this.prevTap=d}else"tap"===o&&(this.prevTap=u)},validateSelector:function(e,t,n,i){for(var r=0,o=n.length;r<o;r++){var s=n[r],a=i[r],l=$e(s.getAction(e,t,this,a),s);if(l&&He(s,a,l))return this.target=s,this.element=a,l}},setSnapping:function(e,t){var n,i,r,o=this.target.options[this.prepared.name].snap,s=[];if((t=t||this.snapStatus).useStatusXY)i={x:t.x,y:t.y};else{var a=Ae(this.target,this.element);(i=de({},e)).x-=a.x,i.y-=a.y}t.realX=i.x,t.realY=i.y,i.x=i.x-this.inertiaStatus.resumeDx,i.y=i.y-this.inertiaStatus.resumeDy;for(var l=o.targets?o.targets.length:0,c=0;c<this.snapOffsets.length;c++){var u={x:i.x-this.snapOffsets[c].x,y:i.y-this.snapOffsets[c].y};for(r=0;r<l;r++)(n=se(o.targets[r])?o.targets[r](u.x,u.y,this):o.targets[r])&&s.push({x:ae(n.x)?n.x+this.snapOffsets[c].x:u.x,y:ae(n.y)?n.y+this.snapOffsets[c].y:u.y,range:ae(n.range)?n.range:o.range})}var d,p={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(r=0,l=s.length;r<l;r++){var h=(n=s[r]).range,f=n.x-i.x,v=n.y-i.y,g=O(f,v),m=g<=h;h===1/0&&p.inRange&&p.range!==1/0&&(m=!1),p.target&&!(m?p.inRange&&h!==1/0?g/h<p.distance/p.range:h===1/0&&p.range!==1/0||g<p.distance:!p.inRange&&g<p.distance)||(h===1/0&&(m=!0),p.target=n,p.distance=g,p.range=h,p.inRange=m,p.dx=f,p.dy=v,t.range=h)}return p.target?(d=t.snappedX!==p.target.x||t.snappedY!==p.target.y,t.snappedX=p.target.x,t.snappedY=p.target.y):(d=!0,t.snappedX=NaN,t.snappedY=NaN),t.dx=p.dx,t.dy=p.dy,t.changed=d||p.inRange&&!t.locked,t.locked=p.inRange,t},setRestriction:function(e,t){var n,i,r,o,s=this.target,a=s&&s.options[this.prepared.name].restrict,l=a&&a.restriction;return l?(n=n=(t=t||this.restrictStatus).useStatusXY?{x:t.x,y:t.y}:de({},e),t.snap&&t.snap.locked&&(n.x+=t.snap.dx||0,n.y+=t.snap.dy||0),n.x-=this.inertiaStatus.resumeDx,n.y-=this.inertiaStatus.resumeDy,t.dx=0,t.dy=0,t.restricted=!1,ce(l)&&!(l="parent"===l?Re(this.element):"self"===l?s.getRect(this.element):Ie(this.element,l))||(se(l)&&(l=l(n.x,n.y,this.element)),te(l)&&(l=ke(l)),o=(i=l)?"x"in l&&"y"in l?(r=Math.max(Math.min(i.x+i.width-this.restrictOffset.right,n.x),i.x+this.restrictOffset.left),Math.max(Math.min(i.y+i.height-this.restrictOffset.bottom,n.y),i.y+this.restrictOffset.top)):(r=Math.max(Math.min(i.right-this.restrictOffset.right,n.x),i.left+this.restrictOffset.left),Math.max(Math.min(i.bottom-this.restrictOffset.bottom,n.y),i.top+this.restrictOffset.top)):(r=n.x,n.y),t.dx=r-n.x,t.dy=o-n.y,t.changed=t.restrictedX!==r||t.restrictedY!==o,t.restricted=!(!t.dx&&!t.dy),t.restrictedX=r,t.restrictedY=o),t):t},checkAndPreventDefault:function(e,t,n){if(t=t||this.target){var i=t.options,r=i.preventDefault;if("auto"!==r||!n||/^(input|select|textarea)$/i.test(e.target.nodeName))"always"!==r||e.preventDefault();else{if(/down|start/i.test(e.type)&&"drag"===this.prepared.name&&"xy"!==i.drag.axis)return;if(i[this.prepared.name]&&i[this.prepared.name].manualStart&&!this.interacting())return;e.preventDefault()}}},calcInertia:function(e){var t=this.target.options[this.prepared.name].inertia,n=t.resistance,i=-Math.log(t.endSpeed/e.v0)/n;e.x0=this.prevEvent.pageX,e.y0=this.prevEvent.pageY,e.t0=e.startEvent.timeStamp/1e3,e.sx=e.sy=0,e.modifiedXe=e.xe=(e.vx0-i)/n,e.modifiedYe=e.ye=(e.vy0-i)/n,e.te=i,e.lambda_v0=n/e.v0,e.one_ve_v0=1-t.endSpeed/e.v0},autoScrollMove:function(e){if(this.interacting()&&function(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),n[t].autoScroll&&n[t].autoScroll.enabled}(this.target,this.prepared.name))if(this.inertiaStatus.active)C.x=C.y=0;else{var t,n,i,r,o=this.target.options[this.prepared.name].autoScroll,s=o.container||we(this.element);if(ne(s))r=e.clientX<C.margin,t=e.clientY<C.margin,n=e.clientX>s.innerWidth-C.margin,i=e.clientY>s.innerHeight-C.margin;else{var a=Se(s);r=e.clientX<a.left+C.margin,t=e.clientY<a.top+C.margin,n=e.clientX>a.right-C.margin,i=e.clientY>a.bottom-C.margin}C.x=n?1:r?-1:0,C.y=i?1:t?-1:0,C.isScrolling||(C.margin=o.margin,C.speed=o.speed,C.start(this))}},_updateEventTargets:function(e,t){this._eventTarget=e,this._curEventTarget=t}},Ye.prototype={preventDefault:ee,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var q={},X=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer","autoScrollMove"],U=0,K=X.length;U<K;U++){var $=X[U];q[$]=We($)}k.indexOfElement=function(e,t){t=t||s;for(var n=0;n<this.length;n++){var i=this[n];if(i.selector===e&&i._context===t||!i.selector&&i._element===e)return n}return-1},k.get=function(e,t){return this[this.indexOfElement(e,t&&t.context)]},k.forEachSelector=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector){var i=e(n,n.selector,n._context,t,this);if(void 0!==i)return i}}},(et.prototype={setOnEvents:function(e,t){return"drop"===e?(se(t.ondrop)&&(this.ondrop=t.ondrop),se(t.ondropactivate)&&(this.ondropactivate=t.ondropactivate),se(t.ondropdeactivate)&&(this.ondropdeactivate=t.ondropdeactivate),se(t.ondragenter)&&(this.ondragenter=t.ondragenter),se(t.ondragleave)&&(this.ondragleave=t.ondragleave),se(t.ondropmove)&&(this.ondropmove=t.ondropmove)):(e="on"+e,se(t.onstart)&&(this[e+"start"]=t.onstart),se(t.onmove)&&(this[e+"move"]=t.onmove),se(t.onend)&&(this[e+"end"]=t.onend),se(t.oninertiastart)&&(this[e+"inertiastart"]=t.oninertiastart)),this},draggable:function(e){return oe(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.drag.axis=e.axis:null===e.axis&&delete this.options.drag.axis,this):le(e)?(this.options.drag.enabled=e,this):this.options.drag},setPerAction:function(e,t){for(var n in t)n in N[e]&&(oe(t[n])?(this.options[e][n]=de(this.options[e][n]||{},t[n]),oe(N.perAction[n])&&"enabled"in N.perAction[n]&&(this.options[e][n].enabled=!1!==t[n].enabled)):le(t[n])&&oe(N.perAction[n])?this.options[e][n].enabled=t[n]:void 0!==t[n]&&(this.options[e][n]=t[n]))},dropzone:function(e){return oe(e)?(this.options.drop.enabled=!1!==e.enabled,this.setOnEvents("drop",e),/^(pointer|center)$/.test(e.overlap)?this.options.drop.overlap=e.overlap:ae(e.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(this.options.drop.accept=e.accept),"checker"in e&&(this.options.drop.checker=e.checker),this):le(e)?(this.options.drop.enabled=e,this):this.options.drop},dropCheck:function(e,t,n,i,r,o){var s=!1;if(!(o=o||this.getRect(r)))return!!this.options.drop.checker&&this.options.drop.checker(e,t,s,this,r,n,i);var a=this.options.drop.overlap;if("pointer"===a){var l,c,u=me(e),d=Ae(n,i);u.x+=d.x,u.y+=d.y,l=u.x>o.left&&u.x<o.right,c=u.y>o.top&&u.y<o.bottom,s=l&&c}var p=n.getRect(i);if("center"===a){var h=p.left+p.width/2,f=p.top+p.height/2;s=h>=o.left&&h<=o.right&&f>=o.top&&f<=o.bottom}ae(a)&&(s=a<=Math.max(0,Math.min(o.right,p.right)-Math.max(o.left,p.left))*Math.max(0,Math.min(o.bottom,p.bottom)-Math.max(o.top,p.top))/(p.width*p.height));return this.options.drop.checker&&(s=this.options.drop.checker(e,t,s,this,r,n,i)),s},dropChecker:function(e){return se(e)?(this.options.drop.checker=e,this):null===e?(delete this.options.getRect,this):this.options.drop.checker},accept:function(e){return te(e)?(this.options.drop.accept=e,this):ue(e)?(this.options.drop.accept=e,this):null===e?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(e){return oe(e)?(this.options.resize.enabled=!1!==e.enabled,this.setPerAction("resize",e),this.setOnEvents("resize",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.resize.axis=e.axis:null===e.axis&&(this.options.resize.axis=N.resize.axis),le(e.preserveAspectRatio)?this.options.resize.preserveAspectRatio=e.preserveAspectRatio:le(e.square)&&(this.options.resize.square=e.square),this):le(e)?(this.options.resize.enabled=e,this):this.options.resize},squareResize:function(e){return le(e)?(this.options.resize.square=e,this):null===e?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(e){return oe(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):le(e)?(this.options.gesture.enabled=e,this):this.options.gesture},autoScroll:function(e){return oe(e)?e=de({actions:["drag","resize"]},e):le(e)&&(e={actions:["drag","resize"],enabled:e}),this.setOptions("autoScroll",e)},snap:function(e){var t=this.setOptions("snap",e);return t===this?this:t.drag},setOptions:function(e,t){var n,i=t&&re(t.actions)?t.actions:["drag"];if(oe(t)||le(t)){for(n=0;n<i.length;n++){var r=/resize/.test(i[n])?"resize":i[n];if(oe(this.options[r])){var o=this.options[r][e];oe(t)?(de(o,t),o.enabled=!1!==t.enabled,"snap"===e&&("grid"===o.mode?o.targets=[Ze.createSnapGrid(de({offset:o.gridOffset||{x:0,y:0}},o.grid||{}))]:"anchor"===o.mode?o.targets=o.anchors:"path"===o.mode&&(o.targets=o.paths),"elementOrigin"in t&&(o.relativePoints=[t.elementOrigin]))):le(t)&&(o.enabled=t)}}return this}var s={},a=["drag","resize","gesture"];for(n=0;n<a.length;n++)e in N[a[n]]&&(s[a[n]]=this.options[a[n]][e]);return s},inertia:function(e){var t=this.setOptions("inertia",e);return t===this?this:t.drag},getAction:function(e,t,n,i){var r=this.defaultActionChecker(e,n,i);return this.options.actionChecker?this.options.actionChecker(e,t,r,this,i,n):r},defaultActionChecker:Ke,actionChecker:function(e){return se(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(e){return e=e||this._element,this.selector&&!te(e)&&(e=this._context.querySelector(this.selector)),ke(e)},rectChecker:function(e){return se(e)?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return le(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):le(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault},origin:function(e){return ue(e)?(this.options.origin=e,this):oe(e)?(this.options.origin=e,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource},restrict:function(e){if(!oe(e))return this.setOptions("restrict",e);for(var t,n=["drag","resize","gesture"],i=0;i<n.length;i++){var r=n[i];if(r in e){var o=de({actions:[r],restriction:e[r]},e);t=this.setOptions("restrict",o)}}return t},context:function(){return this._context},_context:s,ignoreFrom:function(e){return ue(e)?(this.options.ignoreFrom=e,this):te(e)?(this.options.ignoreFrom=e,this):this.options.ignoreFrom},allowFrom:function(e){return ue(e)?(this.options.allowFrom=e,this):te(e)?(this.options.allowFrom=e,this):this.options.allowFrom},element:function(){return this._element},fire:function(e){if(!e||!e.type||!ot(M,e.type))return this;var t,n,i,r="on"+e.type;if(e.type in this._iEvents)for(n=0,i=(t=this._iEvents[e.type]).length;n<i&&!e.immediatePropagationStopped;n++)t[n].name,t[n](e);if(se(this[r])&&(this[r].name,this[r](e)),e.type in _&&(t=_[e.type]))for(n=0,i=t.length;n<i&&!e.immediatePropagationStopped;n++)t[n].name,t[n](e);return this},on:function(e,t,n){var i;if(ce(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),re(e)){for(i=0;i<e.length;i++)this.on(e[i],t,n);return this}if(oe(e)){for(var r in e)this.on(r,e[r],t);return this}if("wheel"===e&&(e=L),n=!!n,ot(M,e))e in this._iEvents?this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){if(!E[e])for(E[e]={selectors:[],contexts:[],listeners:[]},i=0;i<c.length;i++)W.add(c[i],e,Je),W.add(c[i],e,Qe,!0);var o,s=E[e];for(o=s.selectors.length-1;0<=o&&(s.selectors[o]!==this.selector||s.contexts[o]!==this._context);o--);-1===o&&(o=s.selectors.length,s.selectors.push(this.selector),s.contexts.push(this._context),s.listeners.push([])),s.listeners[o].push([t,n])}else W.add(this._element,e,t,n);return this},off:function(e,t,n){var i;if(ce(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),re(e)){for(i=0;i<e.length;i++)this.off(e[i],t,n);return this}if(oe(e)){for(var r in e)this.off(r,e[r],t);return this}var o,s=-1;if(n=!!n,"wheel"===e&&(e=L),ot(M,e))(o=this._iEvents[e])&&-1!==(s=rt(o,t))&&this._iEvents[e].splice(s,1);else if(this.selector){var a=E[e],l=!1;if(!a)return this;for(s=a.selectors.length-1;0<=s;s--)if(a.selectors[s]===this.selector&&a.contexts[s]===this._context){var c=a.listeners[s];for(i=c.length-1;0<=i;i--){var u=c[i][0],d=c[i][1];if(u===t&&d===n){c.splice(i,1),c.length||(a.selectors.splice(s,1),a.contexts.splice(s,1),a.listeners.splice(s,1),W.remove(this._context,e,Je),W.remove(this._context,e,Qe,!0),a.selectors.length||(E[e]=null)),l=!0;break}}if(l)break}}else W.remove(this._element,e,t,n);return this},set:function(e){oe(e)||(e={}),this.options=de({},N.base);var t,n=["drag","drop","resize","gesture"],i=["draggable","dropzone","resizable","gesturable"],r=de(de({},N.perAction),e[o]||{});for(t=0;t<n.length;t++){var o=n[t];this.options[o]=de({},N[o]),this.setPerAction(o,r),this[i[t]](e[o])}var s=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker","styleCursor"];for(t=0,K=s.length;t<K;t++){var a=s[t];this.options[a]=N.base[a],a in e&&this[a](e[a])}return this},unset:function(){if(W.remove(this._element,"all"),ce(this.selector))for(var e in E)for(var t=E[e],n=0;n<t.selectors.length;n++){t.selectors[n]===this.selector&&t.contexts[n]===this._context&&(t.selectors.splice(n,1),t.contexts.splice(n,1),t.listeners.splice(n,1),t.selectors.length||(E[e]=null)),W.remove(this._context,e,Je),W.remove(this._context,e,Qe,!0);break}else W.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),k.splice(rt(k,this),1),Ze}}).snap=tt(et.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),et.prototype.restrict=tt(et.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),et.prototype.inertia=tt(et.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),et.prototype.autoScroll=tt(et.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),et.prototype.squareResize=tt(et.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square"),et.prototype.accept=tt(et.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead"),et.prototype.dropChecker=tt(et.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead"),et.prototype.context=tt(et.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead"),Ze.isSet=function(e,t){return-1!==k.indexOfElement(e,t&&t.context)},Ze.on=function(e,t,n){if(ce(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),re(e)){for(var i=0;i<e.length;i++)Ze.on(e[i],t,n);return Ze}if(oe(e)){for(var r in e)Ze.on(r,e[r],t);return Ze}return ot(M,e)?_[e]?_[e].push(t):_[e]=[t]:W.add(s,e,t,n),Ze},Ze.off=function(e,t,n){if(ce(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),re(e)){for(var i=0;i<e.length;i++)Ze.off(e[i],t,n);return Ze}if(oe(e)){for(var r in e)Ze.off(r,e[r],t);return Ze}var o;ot(M,e)?e in _&&-1!==(o=rt(_[e],t))&&_[e].splice(o,1):W.remove(s,e,t,n);return Ze},Ze.enableDragging=tt(function(e){return null!=e?(P.drag=e,Ze):P.drag},"interact.enableDragging is deprecated and will soon be removed."),Ze.enableResizing=tt(function(e){return null!=e?(P.resize=e,Ze):P.resize},"interact.enableResizing is deprecated and will soon be removed."),Ze.enableGesturing=tt(function(e){return null!=e?(P.gesture=e,Ze):P.gesture},"interact.enableGesturing is deprecated and will soon be removed."),Ze.eventTypes=M,Ze.debug=function(){var e=x[0]||new Ve;return{interactions:x,target:e.target,dragging:e.dragging,resizing:e.resizing,gesturing:e.gesturing,prepared:e.prepared,matches:e.matches,matchElements:e.matchElements,prevCoords:e.prevCoords,startCoords:e.startCoords,pointerIds:e.pointerIds,pointers:e.pointers,addPointer:q.addPointer,removePointer:q.removePointer,recordPointer:q.recordPointer,snap:e.snapStatus,restrict:e.restrictStatus,inertia:e.inertiaStatus,downTime:e.downTimes[0],downEvent:e.downEvent,downPointer:e.downPointer,prevEvent:e.prevEvent,Interactable:et,interactables:k,pointerIsDown:e.pointerIsDown,defaultOptions:N,defaultActionChecker:Ke,actionCursors:R,dragMove:q.dragMove,resizeMove:q.resizeMove,gestureMove:q.gestureMove,pointerUp:q.pointerUp,pointerDown:q.pointerDown,pointerMove:q.pointerMove,pointerHover:q.pointerHover,eventTypes:M,events:W,globalEvents:_,delegatedEvents:E,prefixedPropREs:Y}},Ze.getPointerAverage=Ce,Ze.getTouchBBox=Te,Ze.getTouchDistance=De,Ze.getTouchAngle=Be,Ze.getElementRect=ke,Ze.getElementClientRect=Se,Ze.matchesSelector=st,Ze.closest=Ie,Ze.margin=tt(function(e){return ae(e)?(B=e,Ze):B},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead."),Ze.supportsTouch=function(){return T},Ze.supportsPointerEvent=function(){return D},Ze.stop=function(e){for(var t=x.length-1;0<=t;t--)x[t].stop(e);return Ze},Ze.dynamicDrop=function(e){return le(e)?(w=e,Ze):w},Ze.pointerMoveTolerance=function(e){return ae(e)?(A=e,this):A},Ze.maxInteractions=function(e){return ae(e)?(I=e,this):I},Ze.createSnapGrid=function(s){return function(e,t){var n=0,i=0;oe(s.offset)&&(n=s.offset.x,i=s.offset.y);var r=Math.round((e-n)/s.x),o=Math.round((t-i)/s.y);return{x:r*s.x+n,y:o*s.y+i,range:s.range}}},it(s),H in Element.prototype&&se(Element.prototype[H])||(S=function(e,t,n){for(var i=0,r=(n=n||e.parentNode.querySelectorAll(t)).length;i<r;i++)if(n[i]===e)return!0;return!1}),function(){for(var r=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!i.requestAnimationFrame;++t)V=i[e[t]+"RequestAnimationFrame"],G=i[e[t]+"CancelAnimationFrame"]||i[e[t]+"CancelRequestAnimationFrame"];V=V||function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=setTimeout(function(){e(t+n)},n);return r=t+n,i},G=G||function(e){clearTimeout(e)}}(),void 0!==ct?(void 0!==lt&&lt.exports&&(ct=lt.exports=Ze),ct.interact=Ze):"function"==typeof define&&define.amd?define("interact",function(){return Ze}):i.interact=Ze}function J(){this.returnValue=!1}function Q(){this.cancelBubble=!0}function Z(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}function ee(){}function te(e){if(!e||"object"!=typeof e)return!1;var t=we(e)||r;return/object|function/.test(typeof t.Element)?e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName}function ne(e){return e===r||!(!e||!e.Window)&&e instanceof e.Window}function ie(e){return!!e&&e instanceof t}function re(e){return oe(e)&&(e.length,!0)&&se(e.splice)}function oe(e){return!!e&&"object"==typeof e}function se(e){return"function"==typeof e}function ae(e){return"number"==typeof e}function le(e){return"boolean"==typeof e}function ce(e){return"string"==typeof e}function ue(e){return!!ce(e)&&(s.querySelector(e),!0)}function de(e,t){for(var n in t)e[n]=t[n];return e}function pe(e,t){for(var n in t){var i=!1;for(var r in Y)if(0===n.indexOf(r)&&Y[r].test(n)){i=!0;break}i||(e[n]=t[n])}return e}function he(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp}function fe(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=(new Date).getTime()-t.timeStamp;var i=Math.max(e.timeStamp/1e3,.001);e.page.speed=O(e.page.x,e.page.y)/i,e.page.vx=e.page.x/i,e.page.vy=e.page.y/i,e.client.speed=O(e.client.x,e.page.y)/i,e.client.vx=e.client.x/i,e.client.vy=e.client.y/i}function ve(e){return e instanceof r.Event||T&&r.Touch&&e instanceof r.Touch}function ge(e,t,n){return(n=n||{}).x=t[(e=e||"page")+"X"],n.y=t[e+"Y"],n}function me(e,t){return t=t||{},z&&ve(e)?(ge("screen",e,t),t.x+=r.scrollX,t.y+=r.scrollY):ge("page",e,t),t}function be(e,t){return t=t||{},z&&ve(e)?ge("screen",e,t):ge("client",e,t),t}function ye(e){return ae(e.pointerId)?e.pointerId:e.identifier}function xe(e){return e instanceof n?e.correspondingUseElement:e}function we(e){if(ne(e))return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}function Se(e){var t=e instanceof d?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}function ke(e){var t=Se(e);if(!F&&t){var n=function(e){return{x:(e=e||r).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}(we(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t}function Ee(e){var t=[];return re(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function Ce(e){for(var t,n={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<e.length;i++)for(t in n)n[t]+=e[i][t];for(t in n)n[t]/=e.length;return n}function Te(e){if(e.length||e.touches&&1<e.touches.length){var t=Ee(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,width:Math.max(t[0].pageX,t[1].pageX)-n,height:Math.max(t[0].pageY,t[1].pageY)-i}}}function De(e,t){var n=(t=t||N.deltaSource)+"X",i=t+"Y",r=Ee(e),o=r[0][n]-r[1][n],s=r[0][i]-r[1][i];return O(o,s)}function Be(e,t,n){var i=(n=n||N.deltaSource)+"X",r=n+"Y",o=Ee(e),s=o[0][i]-o[1][i],a=o[0][r]-o[1][r],l=180*Math.atan(a/s)/Math.PI;if(ae(t)){var c=(l-t)%360;315<c?l-=360+l/360|0:135<c?l-=180+l/360|0:c<-315?l+=360+l/360|0:c<-135&&(l+=180+l/360|0)}return l}function Ae(e,t){var n=e?e.options.origin:N.origin;return"parent"===n?n=Re(t):"self"===n?n=e.getRect(t):ue(n)&&(n=Ie(t,n)||{x:0,y:0}),se(n)&&(n=n(e&&t)),te(n)&&(n=ke(n)),n.x="x"in n?n.x:n.left,n.y="y"in n?n.y:n.top,n}function Oe(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function Ne(e,t,n,i){return-n*(e/=i)*(e-2)+t}function je(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Ie(e,t){for(var n=Re(e);te(n);){if(st(n,t))return n;n=Re(n)}return null}function Re(e){var t=e.parentNode;if(ie(t)){for(;(t=t.host)&&ie(t););return t}return t}function Pe(e,t){return e._context===t.ownerDocument||je(e._context,t)}function Le(e,t,n){var i=e.options.ignoreFrom;return!(!i||!te(n))&&(ce(i)?at(n,i,t):!!te(i)&&je(i,n))}function Me(e,t,n){var i=e.options.allowFrom;return!i||!!te(n)&&(ce(i)?at(n,i,t):!!te(i)&&je(i,n))}function _e(e,t){if(!t)return!1;var n=t.options.drag.axis;return"xy"===e||"xy"===n||n===e}function ze(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),n[t].snap&&n[t].snap.enabled}function Fe(e,t){var n=e.options;return/^resize/.test(t)&&(t="resize"),n[t].restrict&&n[t].restrict.enabled}function He(e,t,n){for(var i=e.options,r=i[n.name].max,o=i[n.name].maxPerElement,s=0,a=0,l=0,c=0,u=x.length;c<u;c++){var d=x[c],p=d.prepared.name;if(d.interacting()){if(I<=++s)return!1;if(d.target===e){if(r<=(a+=p===n.name|0))return!1;if(d.element===t&&(l++,p!==n.name||o<=l))return!1}}}return 0<I}function Ve(){if(this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},se(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var e=this;this.boundInertiaFrame=function(){return e.inertiaFrame()},this.boundSmoothEndFrame=function(){return e.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,x.push(this)}function Ge(e,t,n){var i,r=0,o=x.length,s=/mouse/i.test(e.pointerType||t)||4===e.pointerType,a=ye(e);if(/down|start/i.test(t))for(r=0;r<o;r++){var l=n;if((i=x[r]).inertiaStatus.active&&i.target.options[i.prepared.name].inertia.allowResume&&i.mouse===s)for(;l;){if(l===i.element)return i;l=Re(l)}}if(s||!T&&!D){for(r=0;r<o;r++)if(x[r].mouse&&!x[r].inertiaStatus.active)return x[r];for(r=0;r<o;r++)if(x[r].mouse&&(!/down/.test(t)||!x[r].inertiaStatus.active))return i;return(i=new Ve).mouse=!0,i}for(r=0;r<o;r++)if(ot(x[r].pointerIds,a))return x[r];if(/up|end|out/i.test(t))return null;for(r=0;r<o;r++)if((!(i=x[r]).prepared.name||i.target.options.gesture.enabled)&&!i.interacting()&&(s||!i.mouse))return i;return new Ve}function We(s){return function(e){var t,n,i=xe(e.path?e.path[0]:e.target),r=xe(e.currentTarget);if(T&&/touch/.test(e.type))for(j=(new Date).getTime(),n=0;n<e.changedTouches.length;n++){var o=e.changedTouches[n];(t=Ge(o,e.type,i))&&(t._updateEventTargets(i,r),t[s](o,e,i,r))}else{if(!D&&/mouse/.test(e.type)){for(n=0;n<x.length;n++)if(!x[n].mouse&&x[n].pointerIsDown)return;if((new Date).getTime()-j<500)return}if(!(t=Ge(e,e.type,i)))return;t._updateEventTargets(i,r),t[s](e,e,i,r)}}}function Ye(e,t,n,i,r,o){var s,a,l=e.target,c=e.snapStatus,u=e.restrictStatus,d=e.pointers,p=(l&&l.options||N).deltaSource,h=p+"X",f=p+"Y",v=l?l.options:N,g=Ae(l,r),m="start"===i,b="end"===i,y=m?e.startCoords:e.curCoords;r=r||e.element,a=de({},y.page),s=de({},y.client),a.x-=g.x,a.y-=g.y,s.x-=g.x,s.y-=g.y;var x=v[n].snap&&v[n].snap.relativePoints;!ze(l,n)||m&&x&&x.length||(this.snap={range:c.range,locked:c.locked,x:c.snappedX,y:c.snappedY,realX:c.realX,realY:c.realY,dx:c.dx,dy:c.dy},c.locked&&(a.x+=c.dx,a.y+=c.dy,s.x+=c.dx,s.y+=c.dy)),!Fe(l,n)||m&&v[n].restrict.elementRect||!u.restricted||(a.x+=u.dx,a.y+=u.dy,s.x+=u.dx,s.y+=u.dy,this.restrict={dx:u.dx,dy:u.dy}),this.pageX=a.x,this.pageY=a.y,this.clientX=s.x,this.clientY=s.y,this.x0=e.startCoords.page.x-g.x,this.y0=e.startCoords.page.y-g.y,this.clientX0=e.startCoords.client.x-g.x,this.clientY0=e.startCoords.client.y-g.y,this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.button=t.button,this.buttons=t.buttons,this.target=r,this.t0=e.downTimes[0],this.type=n+(i||""),this.interaction=e,this.interactable=l;var w=e.inertiaStatus;if(w.active&&(this.detail="inertia"),o&&(this.relatedTarget=o),b?"client"===p?(this.dx=s.x-e.startCoords.client.x,this.dy=s.y-e.startCoords.client.y):(this.dx=a.x-e.startCoords.page.x,this.dy=a.y-e.startCoords.page.y):m?(this.dx=0,this.dy=0):"inertiastart"===i?(this.dx=e.prevEvent.dx,this.dy=e.prevEvent.dy):"client"===p?(this.dx=s.x-e.prevEvent.clientX,this.dy=s.y-e.prevEvent.clientY):(this.dx=a.x-e.prevEvent.pageX,this.dy=a.y-e.prevEvent.pageY),e.prevEvent&&"inertia"===e.prevEvent.detail&&!w.active&&v[n].inertia&&v[n].inertia.zeroResumeDelta&&(w.resumeDx+=this.dx,w.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===n&&e.resizeAxes?v.resize.square?("y"===e.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=e.resizeAxes,"x"===e.resizeAxes?this.dy=0:"y"===e.resizeAxes&&(this.dx=0)):"gesture"===n&&(this.touches=[d[0],d[1]],m?(this.distance=De(d,p),this.box=Te(d),this.scale=1,this.ds=0,this.angle=Be(d,void 0,p),this.da=0):b||t instanceof Ye?(this.distance=e.prevEvent.distance,this.box=e.prevEvent.box,this.scale=e.prevEvent.scale,this.ds=this.scale-1,this.angle=e.prevEvent.angle,this.da=this.angle-e.gesture.startAngle):(this.distance=De(d,p),this.box=Te(d),this.scale=this.distance/e.gesture.startDistance,this.angle=Be(d,e.gesture.prevAngle,p),this.ds=this.scale-e.gesture.prevScale,this.da=this.angle-e.gesture.prevAngle)),m)this.timeStamp=e.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===i)this.timeStamp=e.prevEvent.timeStamp,this.dt=e.prevEvent.dt,this.duration=e.prevEvent.duration,this.speed=e.prevEvent.speed,this.velocityX=e.prevEvent.velocityX,this.velocityY=e.prevEvent.velocityY;else if(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-e.prevEvent.timeStamp,this.duration=this.timeStamp-e.downTimes[0],t instanceof Ye){var S=this[h]-e.prevEvent[h],k=this[f]-e.prevEvent[f],E=this.dt/1e3;this.speed=O(S,k)/E,this.velocityX=S/E,this.velocityY=k/E}else this.speed=e.pointerDelta[p].speed,this.velocityX=e.pointerDelta[p].vx,this.velocityY=e.pointerDelta[p].vy;if((b||"inertiastart"===i)&&600<e.prevEvent.speed&&this.timeStamp-e.prevEvent.timeStamp<150){var C=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;C<0&&(C+=360);var T=112.5<=C&&C<247.5,D=202.5<=C&&C<337.5,B=!T&&(292.5<=C||C<67.5),A=!D&&22.5<=C&&C<157.5;this.swipe={up:D,down:A,left:T,right:B,angle:C,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}}function qe(){this.originalEvent.preventDefault()}function Xe(e){var t="";if("drag"===e.name&&(t=R.drag),"resize"===e.name)if(e.axis)t=R[e.name+e.axis];else if(e.edges){for(var n="resize",i=["top","bottom","left","right"],r=0;r<4;r++)e.edges[i[r]]&&(n+=i[r]);t=R[n]}return t}function Ue(e,t,n,i,r,o,s){if(!t)return!1;if(!0===t){var a=ae(o.width)?o.width:o.right-o.left,l=ae(o.height)?o.height:o.bottom-o.top;if(a<0&&("left"===e?e="right":"right"===e&&(e="left")),l<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e)return n.x<(0<=a?o.left:o.right)+s;if("top"===e)return n.y<(0<=l?o.top:o.bottom)+s;if("right"===e)return n.x>(0<=a?o.right:o.left)-s;if("bottom"===e)return n.y>(0<=l?o.bottom:o.top)-s}return!!te(i)&&(te(t)?t===i:at(i,t,r))}function Ke(e,t,n){var i,r=this.getRect(n),o=!1,s=null,a=null,l=de({},t.curCoords.page),c=this.options;if(!r)return null;if(P.resize&&c.resize.enabled){var u=c.resize;if(i={left:!1,right:!1,top:!1,bottom:!1},oe(u.edges)){for(var d in i)i[d]=Ue(d,u.edges[d],l,t._eventTarget,n,r,u.margin||B);i.left=i.left&&!i.right,i.top=i.top&&!i.bottom,o=i.left||i.right||i.top||i.bottom}else{var p="y"!==c.resize.axis&&l.x>r.right-B,h="x"!==c.resize.axis&&l.y>r.bottom-B;o=p||h,a=(p?"x":"")+(h?"y":"")}}return s=o?"resize":P.drag&&c.drag.enabled?"drag":null,P.gesture&&2<=t.pointerIds.length&&!t.dragging&&!t.resizing&&(s="gesture"),s?{name:s,axis:a,edges:i}:null}function $e(e,t){if(!oe(e))return null;var n=e.name,i=t.options;return("resize"===n&&i.resize.enabled||"drag"===n&&i.drag.enabled||"gesture"===n&&i.gesture.enabled)&&P[n]?("resize"!==n&&"resizeyx"!==n||(n="resizexy"),e):null}function Je(e,t){var n={},i=E[e.type],r=xe(e.path?e.path[0]:e.target),o=r;for(var s in t=!!t,e)n[s]=e[s];for(n.originalEvent=e,n.preventDefault=qe;te(o);){for(var a=0;a<i.selectors.length;a++){var l=i.selectors[a],c=i.contexts[a];if(st(o,l)&&je(c,r)&&je(c,o)){var u=i.listeners[a];n.currentTarget=o;for(var d=0;d<u.length;d++)u[d][1]===t&&u[d][0](n)}}o=Re(o)}}function Qe(e){return Je.call(this,e,!0)}function Ze(e,t){return k.get(e,t)||new et(e,t)}function et(e,t){var n;if(this._element=e,this._iEvents=this._iEvents||{},ue(e)){this.selector=e;var i=t&&t.context;n=i?we(i):r,i&&(n.Node?i instanceof n.Node:te(i)||i===n.document)&&(this._context=i)}else n=we(e),te(e)&&(D?(W.add(this._element,l.down,q.pointerDown),W.add(this._element,l.move,q.pointerHover)):(W.add(this._element,"mousedown",q.pointerDown),W.add(this._element,"mousemove",q.pointerHover),W.add(this._element,"touchstart",q.pointerDown),W.add(this._element,"touchmove",q.pointerHover)));this._doc=n.document,ot(c,this._doc)||it(this._doc),k.push(this),this.set(t)}function tt(e,t){var n=!1;return function(){return n||(r.console.warn(t),n=!0),e.apply(this,arguments)}}function nt(e){for(var t=0;t<x.length;t++)x[t].pointerEnd(e,e)}function it(e){if(!ot(c,e)){var t=e.defaultView||e.parentWindow;for(var n in E)W.add(e,n,Je),W.add(e,n,Qe,!0);D?(l=o===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},W.add(e,l.down,q.selectorDown),W.add(e,l.move,q.pointerMove),W.add(e,l.over,q.pointerOver),W.add(e,l.out,q.pointerOut),W.add(e,l.up,q.pointerUp),W.add(e,l.cancel,q.pointerCancel),W.add(e,l.move,q.autoScrollMove)):(W.add(e,"mousedown",q.selectorDown),W.add(e,"mousemove",q.pointerMove),W.add(e,"mouseup",q.pointerUp),W.add(e,"mouseover",q.pointerOver),W.add(e,"mouseout",q.pointerOut),W.add(e,"touchstart",q.selectorDown),W.add(e,"touchmove",q.pointerMove),W.add(e,"touchend",q.pointerUp),W.add(e,"touchcancel",q.pointerCancel),W.add(e,"mousemove",q.autoScrollMove),W.add(e,"touchmove",q.autoScrollMove)),W.add(t,"blur",nt);try{if(t.frameElement){var i=t.frameElement.ownerDocument,r=i.defaultView;W.add(i,"mouseup",q.pointerEnd),W.add(i,"touchend",q.pointerEnd),W.add(i,"touchcancel",q.pointerEnd),W.add(i,"pointerup",q.pointerEnd),W.add(i,"MSPointerUp",q.pointerEnd),W.add(r,"blur",nt)}}catch(e){Ze.windowParentError=e}W.add(e,"dragstart",function(e){for(var t=0;t<x.length;t++){var n=x[t];if(n.element&&(n.element===e.target||je(n.element,e.target)))return void n.checkAndPreventDefault(e,n.target,n.element)}}),W.useAttachEvent&&(W.add(e,"selectstart",function(e){var t=x[0];t.currentAction()&&t.checkAndPreventDefault(e)}),W.add(e,"dblclick",We("ie8Dblclick"))),c.push(e)}}function rt(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function ot(e,t){return-1!==rt(e,t)}function st(e,t,n){return S?S(e,t,n):(r!==i&&(t=t.replace(/\/deep\//g," ")),e[H](t))}function at(e,t,n){for(;te(e);){if(st(e,t))return!0;if((e=Re(e))===n)return st(e,t)}return!1}}("undefined"==typeof window?void 0:window)},{}],11:[function(aw,bw,cw){!function(ew){var kw,fw=this||eval("this"),gw=fw.document,hw=fw.navigator,iw=fw.jQuery,jw=fw.JSON;kw=function(e,i){var l,t,n,r,c,u,o,s,a,d,p,h,f,D=void 0!==e?e:{};function v(e,t){var n=(t=t||gw).parentWindow||t.defaultView||fw,i=D.utils.stringTrim(e).toLowerCase(),r=t.createElement("div"),o=function(e){var t=e.match(/^<([a-z]+)[ >]/);return t&&c[t[1]]||l}(i),s=o[0],a="ignored<div>"+o[1]+e+o[2]+"</div>";for("function"==typeof n.innerShiv?r.appendChild(n.innerShiv(a)):(u&&t.appendChild(r),r.innerHTML=a,u&&r.parentNode.removeChild(r));s--;)r=r.lastChild;return D.utils.makeArray(r.lastChild.childNodes)}function g(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function m(){if(p)for(var e,t=p,n=0;f<p;)if(e=d[f++]){if(t<f){if(5e3<=++n){f=p,D.utils.deferError(Error("'Too much recursion' after processing "+n+" task groups."));break}t=p}try{e()}catch(e){D.utils.deferError(e)}}}function b(){m(),f=p=d.length=0}D.exportSymbol=function(e,t){for(var n=e.split("."),i=D,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=t},D.exportProperty=function(e,t,n){e[t]=n},D.version="3.4.2",D.exportSymbol("version",D.version),D.options={deferUpdates:!1,useOnlyNativeEvents:!1},D.utils=function(){function h(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function e(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function t(e,t){return e.__proto__=t,e}var n={__proto__:[]}instanceof Array,i={},o={};i[hw&&/Firefox\/2/i.test(hw.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],i.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],h(i,function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)o[t[n]]=e});var a={propertychange:!0},l=gw&&function(){for(var e=3,t=gw.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return 4<e?e:ew}(),s=/\S+/g;function r(e,t,n,i){var r=e[t].match(s)||[];D.utils.arrayForEach(n.match(s),function(e){D.utils.addOrRemoveItem(r,e,i)}),e[t]=r.join(" ")}return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},arrayIndexOf:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i))return e[i];return null},arrayRemoveItem:function(e,t){var n=D.utils.arrayIndexOf(e,t);0<n?e.splice(n,1):0===n&&e.shift()},arrayGetDistinctValues:function(e){for(var t=[],n=0,i=(e=e||[]).length;n<i;n++)D.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){for(var n=[],i=0,r=(e=e||[]).length;i<r;i++)n.push(t(e[i],i));return n},arrayFilter:function(e,t){for(var n=[],i=0,r=(e=e||[]).length;i<r;i++)t(e[i],i)&&n.push(e[i]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var i=D.utils.arrayIndexOf(D.utils.peekObservable(e),t);i<0?n&&e.push(t):n||e.splice(i,1)},canSetPrototype:n,extend:e,setPrototypeOf:t,setPrototypeOfOrExtend:n?t:e,objectForEach:h,objectMap:function(e,t){if(!e)return e;var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],i,e));return n},emptyDomNode:function(e){for(;e.firstChild;)D.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){for(var t=D.utils.makeArray(e),n=(t[0]&&t[0].ownerDocument||gw).createElement("div"),i=0,r=t.length;i<r;i++)n.appendChild(D.cleanNode(t[i]));return n},cloneNodes:function(e,t){for(var n=0,i=e.length,r=[];n<i;n++){var o=e[n].cloneNode(!0);r.push(t?D.cleanNode(o):o)}return r},setDomNodeChildren:function(e,t){if(D.utils.emptyDomNode(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],r=i.parentNode,o=0,s=t.length;o<s;o++)r.insertBefore(t[o],i);for(o=0,s=n.length;o<s;o++)D.removeNode(n[o])}},fixUpContinuousNodeArray:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},setOptionNodeSelectionState:function(e,t){l<7?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return null===e||e===ew?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return D.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!D.utils.arrayFirst(e,D.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},catchFunctionErrors:function(e){return D.onError?function(){try{return e.apply(this,arguments)}catch(e){throw D.onError&&D.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(D.utils.catchFunctionErrors(e),t)},deferError:function(e){setTimeout(function(){throw D.onError&&D.onError(e),e},0)},registerEventHandler:function(t,e,n){var i=D.utils.catchFunctionErrors(n),r=l&&a[e];if(D.options.useOnlyNativeEvents||r||!iw)if(r||"function"!=typeof t.addEventListener){if(void 0===t.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");function o(e){i.call(t,e)}var s="on"+e;t.attachEvent(s,o),D.utils.domNodeDisposal.addDisposeCallback(t,function(){t.detachEvent(s,o)})}else t.addEventListener(e,i,!1);else iw(t).bind(e,i)},triggerEvent:function(e,t){if(!e||!e.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=function(e,t){if("input"!==D.utils.tagNameLower(e)||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}(e,t);if(D.options.useOnlyNativeEvents||!iw||n)if("function"==typeof gw.createEvent){if("function"!=typeof e.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var i=o[t]||"HTMLEvents",r=gw.createEvent(i);r.initEvent(t,!0,!0,fw,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(n&&e.click)e.click();else{if(void 0===e.fireEvent)throw new Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}else iw(e).trigger(t)},unwrapObservable:function(e){return D.isObservable(e)?e():e},peekObservable:function(e){return D.isObservable(e)?e.peek():e},toggleDomNodeCssClass:function(t,e,n){var i;e&&("object"==typeof t.classList?(i=t.classList[n?"add":"remove"],D.utils.arrayForEach(e.match(s),function(e){i.call(t.classList,e)})):"string"==typeof t.className.baseVal?r(t.className,"baseVal",e,n):r(t,"className",e,n))},setTextContent:function(e,t){var n=D.utils.unwrapObservable(t);null!==n&&n!==ew||(n="");var i=D.virtualElements.firstChild(e);!i||3!=i.nodeType||D.virtualElements.nextSibling(i)?D.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(n)]):i.data=n,D.utils.forceRefresh(e)},setElementName:function(e,t){if(e.name=t,l<=7)try{e.mergeAttributes(gw.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},forceRefresh:function(e){if(9<=l){var t=1==e.nodeType?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(l){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=D.utils.unwrapObservable(e),t=D.utils.unwrapObservable(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},makeArray:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},createSymbolOrString:function(e){return e},isIe6:6===l,isIe7:7===l,ieVersion:l,getFormFields:function(e,t){for(var n=D.utils.makeArray(e.getElementsByTagName("input")).concat(D.utils.makeArray(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},r=[],o=n.length-1;0<=o;o--)i(n[o])&&r.push(n[o]);return r},parseJson:function(e){return"string"==typeof e&&(e=D.utils.stringTrim(e))?jw&&jw.parse?jw.parse(e):new Function("return "+e)():null},stringifyJson:function(e,t,n){if(!jw||!jw.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return jw.stringify(D.utils.unwrapObservable(e),t,n)},postJson:function(e,t,n){var i=(n=n||{}).params||{},r=n.includeFields||this.fieldsIncludedWithJsonPost,o=e;if("object"==typeof e&&"form"===D.utils.tagNameLower(e)){var s=e;o=s.action;for(var a=r.length-1;0<=a;a--)for(var l=D.utils.getFormFields(s,r[a]),c=l.length-1;0<=c;c--)i[l[c].name]=l[c].value}t=D.utils.unwrapObservable(t);var u=gw.createElement("form");for(var d in u.style.display="none",u.action=o,u.method="post",t){var p=gw.createElement("input");p.type="hidden",p.name=d,p.value=D.utils.stringifyJson(D.utils.unwrapObservable(t[d])),u.appendChild(p)}h(i,function(e,t){var n=gw.createElement("input");n.type="hidden",n.name=e,n.value=t,u.appendChild(n)}),gw.body.appendChild(u),n.submitter?n.submitter(u):u.submit(),setTimeout(function(){u.parentNode.removeChild(u)},0)}}}(),D.exportSymbol("utils",D.utils),D.exportSymbol("utils.arrayForEach",D.utils.arrayForEach),D.exportSymbol("utils.arrayFirst",D.utils.arrayFirst),D.exportSymbol("utils.arrayFilter",D.utils.arrayFilter),D.exportSymbol("utils.arrayGetDistinctValues",D.utils.arrayGetDistinctValues),D.exportSymbol("utils.arrayIndexOf",D.utils.arrayIndexOf),D.exportSymbol("utils.arrayMap",D.utils.arrayMap),D.exportSymbol("utils.arrayPushAll",D.utils.arrayPushAll),D.exportSymbol("utils.arrayRemoveItem",D.utils.arrayRemoveItem),D.exportSymbol("utils.extend",D.utils.extend),D.exportSymbol("utils.fieldsIncludedWithJsonPost",D.utils.fieldsIncludedWithJsonPost),D.exportSymbol("utils.getFormFields",D.utils.getFormFields),D.exportSymbol("utils.peekObservable",D.utils.peekObservable),D.exportSymbol("utils.postJson",D.utils.postJson),D.exportSymbol("utils.parseJson",D.utils.parseJson),D.exportSymbol("utils.registerEventHandler",D.utils.registerEventHandler),D.exportSymbol("utils.stringifyJson",D.utils.stringifyJson),D.exportSymbol("utils.range",D.utils.range),D.exportSymbol("utils.toggleDomNodeCssClass",D.utils.toggleDomNodeCssClass),D.exportSymbol("utils.triggerEvent",D.utils.triggerEvent),D.exportSymbol("utils.unwrapObservable",D.utils.unwrapObservable),D.exportSymbol("utils.objectForEach",D.utils.objectForEach),D.exportSymbol("utils.addOrRemoveItem",D.utils.addOrRemoveItem),D.exportSymbol("utils.setTextContent",D.utils.setTextContent),D.exportSymbol("unwrap",D.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(1===arguments.length)return function(){return n.apply(t,arguments)};var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice(0);return e.push.apply(e,arguments),n.apply(t,e)}}),D.utils.domData=new function(){var i=0,r="__ko__"+(new Date).getTime(),o={};function s(e,t){var n=e[r];if(!n||"null"===n||!o[n]){if(!t)return ew;n=e[r]="ko"+i++,o[n]={}}return o[n]}return{get:function(e,t){var n=s(e,!1);return n===ew?ew:n[t]},set:function(e,t,n){n===ew&&s(e,!1)===ew||(s(e,!0)[t]=n)},clear:function(e){var t=e[r];return!(!t||(delete o[t],e[r]=null))},nextKey:function(){return i+++r}}},D.exportSymbol("utils.domData",D.utils.domData),D.exportSymbol("utils.domData.clear",D.utils.domData.clear),D.utils.domNodeDisposal=new function(){var i=D.utils.domData.nextKey(),r={1:!0,8:!0,9:!0},o={1:!0,9:!0};function s(e,t){var n=D.utils.domData.get(e,i);return n===ew&&t&&(n=[],D.utils.domData.set(e,i,n)),n}function a(e){var t=s(e,!1);if(t){t=t.slice(0);for(var n=0;n<t.length;n++)t[n](e)}D.utils.domData.clear(e),D.utils.domNodeDisposal.cleanExternalData(e),o[e.nodeType]&&function(e){for(var t,n=e.firstChild;t=n;)n=t.nextSibling,8===t.nodeType&&a(t)}(e)}return{addDisposeCallback:function(e,t){if("function"!=typeof t)throw new Error("Callback must be a function");s(e,!0).push(t)},removeDisposeCallback:function(e,t){var n=s(e,!1);n&&(D.utils.arrayRemoveItem(n,t),0==n.length&&function(e){D.utils.domData.set(e,i,ew)}(e))},cleanNode:function(e){if(r[e.nodeType]&&(a(e),o[e.nodeType])){var t=[];D.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var n=0,i=t.length;n<i;n++)a(t[n])}return e},removeNode:function(e){D.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){iw&&"function"==typeof iw.cleanData&&iw.cleanData([e])}}},D.cleanNode=D.utils.domNodeDisposal.cleanNode,D.removeNode=D.utils.domNodeDisposal.removeNode,D.exportSymbol("cleanNode",D.cleanNode),D.exportSymbol("removeNode",D.removeNode),D.exportSymbol("utils.domNodeDisposal",D.utils.domNodeDisposal),D.exportSymbol("utils.domNodeDisposal.addDisposeCallback",D.utils.domNodeDisposal.addDisposeCallback),D.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",D.utils.domNodeDisposal.removeDisposeCallback),l=[0,"",""],c={thead:t=[1,"<table>","</table>"],tbody:t,tfoot:t,tr:[2,"<table><tbody>","</tbody></table>"],td:n=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:n,option:r=[1,"<select multiple='multiple'>","</select>"],optgroup:r},u=D.utils.ieVersion<=8,D.utils.parseHtmlFragment=function(e,t){return iw?function(e,t){if(iw.parseHTML)return iw.parseHTML(e,t)||[];var n=iw.clean([e],t);if(n&&n[0]){for(var i=n[0];i.parentNode&&11!==i.parentNode.nodeType;)i=i.parentNode;i.parentNode&&i.parentNode.removeChild(i)}return n}(e,t):v(e,t)},D.utils.setHtml=function(e,t){if(D.utils.emptyDomNode(e),null!==(t=D.utils.unwrapObservable(t))&&t!==ew)if("string"!=typeof t&&(t=t.toString()),iw)iw(e).html(t);else for(var n=D.utils.parseHtmlFragment(t,e.ownerDocument),i=0;i<n.length;i++)e.appendChild(n[i])},D.exportSymbol("utils.parseHtmlFragment",D.utils.parseHtmlFragment),D.exportSymbol("utils.setHtml",D.utils.setHtml),D.memoization=(o={},{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var t=g()+g();return o[t]=e,"\x3c!--[ko_memo:"+t+"]--\x3e"},unmemoize:function(e,t){var n=o[e];if(n===ew)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return n.apply(null,t||[]),!0}finally{delete o[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];!function e(t,n){if(t)if(8==t.nodeType){var i=D.memoization.parseMemoText(t.nodeValue);null!=i&&n.push({domNode:t,memoId:i})}else if(1==t.nodeType)for(var r=0,o=t.childNodes,s=o.length;r<s;r++)e(o[r],n)}(e,n);for(var i=0,r=n.length;i<r;i++){var o=n[i].domNode,s=[o];t&&D.utils.arrayPushAll(s,t),D.memoization.unmemoize(n[i].memoId,s),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}),D.exportSymbol("memoization",D.memoization),D.exportSymbol("memoization.memoize",D.memoization.memoize),D.exportSymbol("memoization.unmemoize",D.memoization.unmemoize),D.exportSymbol("memoization.parseMemoText",D.memoization.parseMemoText),D.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",D.memoization.unmemoizeDomNodeAndDescendants),D.tasks=(d=[],h=1,f=p=0,{scheduler:fw.MutationObserver?(s=b,a=gw.createElement("div"),new MutationObserver(s).observe(a,{attributes:!0}),function(){a.classList.toggle("foo")}):gw&&"onreadystatechange"in gw.createElement("script")?function(e){var t=gw.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,gw.documentElement.removeChild(t),t=null,e()},gw.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},schedule:function(e){return p||D.tasks.scheduler(b),d[p++]=e,h++},cancel:function(e){var t=e-(h-p);f<=t&&t<p&&(d[t]=null)},resetForTesting:function(){var e=p-f;return f=p=d.length=0,e},runEarly:m}),D.exportSymbol("tasks",D.tasks),D.exportSymbol("tasks.schedule",D.tasks.schedule),D.exportSymbol("tasks.runEarly",D.tasks.runEarly),D.extenders={throttle:function(t,n){t.throttleEvaluation=n;var i=null;return D.dependentObservable({read:t,write:function(e){clearTimeout(i),i=D.utils.setTimeout(function(){t(e)},n)}})},rateLimit:function(e,t){var n,i,r;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e._deferUpdates=!1,r="notifyWhenChangesStop"==i?S:w,e.limit(function(e){return r(e,n)})},deferred:function(i,e){if(!0!==e)throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");i._deferUpdates||(i._deferUpdates=!0,i.limit(function(e){var t,n=!1;return function(){if(!n){D.tasks.cancel(t),t=D.tasks.schedule(e);try{n=!0,i.notifySubscribers(ew,"dirty")}finally{n=!1}}}}))},notify:function(e,t){e.equalityComparer="always"==t?null:x}};var y={undefined:1,boolean:1,number:1,string:1};function x(e,t){return(null===e||typeof e in y)&&e===t}function w(e,t){var n;return function(){n=n||D.utils.setTimeout(function(){n=ew,e()},t)}}function S(e,t){var n;return function(){clearTimeout(n),n=D.utils.setTimeout(e,t)}}D.exportSymbol("extenders",D.extenders),D.subscription=function(e,t,n){this._target=e,this.callback=t,this.disposeCallback=n,this.isDisposed=!1,D.exportProperty(this,"dispose",this.dispose)},D.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},D.subscribable=function(){D.utils.setPrototypeOfOrExtend(this,A),A.init(this)};var k="change";function E(e,t){t&&t!==k?"beforeChange"===t?this._limitBeforeChange(e):this._origNotifySubscribers(e,t):this._limitChange(e)}var C,T,B,A={init:function(e){e._subscriptions={change:[]},e._versionNumber=1},subscribe:function(e,t,n){var i=this;n=n||k;var r=t?e.bind(t):e,o=new D.subscription(i,r,function(){D.utils.arrayRemoveItem(i._subscriptions[n],o),i.afterSubscriptionRemove&&i.afterSubscriptionRemove(n)});return i.beforeSubscriptionAdd&&i.beforeSubscriptionAdd(n),i._subscriptions[n]||(i._subscriptions[n]=[]),i._subscriptions[n].push(o),o},notifySubscribers:function(e,t){if((t=t||k)===k&&this.updateVersion(),this.hasSubscriptionsForEvent(t)){var n=t===k&&this._changeSubscriptions||this._subscriptions[t].slice(0);try{D.dependencyDetection.begin();for(var i,r=0;i=n[r];++r)i.isDisposed||i.callback(e)}finally{D.dependencyDetection.end()}}},getVersion:function(){return this._versionNumber},hasChanged:function(e){return this.getVersion()!==e},updateVersion:function(){++this._versionNumber},limit:function(e){var t,n,i,r,o=this,s=D.isObservable(o);o._origNotifySubscribers||(o._origNotifySubscribers=o.notifySubscribers,o.notifySubscribers=E);var a=e(function(){o._notificationIsPending=!1,s&&r===o&&(r=o._evalIfChanged?o._evalIfChanged():o());var e=n||o.isDifferent(i,r);n=t=!1,e&&o._origNotifySubscribers(i=r)});o._limitChange=function(e){o._changeSubscriptions=o._subscriptions[k].slice(0),o._notificationIsPending=t=!0,r=e,a()},o._limitBeforeChange=function(e){t||(i=e,o._origNotifySubscribers(e,"beforeChange"))},o._notifyNextChangeIfValueIsDifferent=function(){o.isDifferent(i,o.peek(!0))&&(n=!0)}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(e){if(e)return this._subscriptions[e]&&this._subscriptions[e].length||0;var n=0;return D.utils.objectForEach(this._subscriptions,function(e,t){"dirty"!==e&&(n+=t.length)}),n},isDifferent:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var i=this;return e&&D.utils.objectForEach(e,function(e,t){var n=D.extenders[e];"function"==typeof n&&(i=n(i,t)||i)}),i}};function O(e){T.push(C),C=e}function N(){C=T.pop()}D.exportProperty(A,"subscribe",A.subscribe),D.exportProperty(A,"extend",A.extend),D.exportProperty(A,"getSubscriptionsCount",A.getSubscriptionsCount),D.utils.canSetPrototype&&D.utils.setPrototypeOf(A,Function.prototype),D.subscribable.fn=A,D.isSubscribable=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},D.exportSymbol("subscribable",D.subscribable),D.exportSymbol("isSubscribable",D.isSubscribable),D.computedContext=D.dependencyDetection=(T=[],B=0,{begin:O,end:N,registerDependency:function(e){if(C){if(!D.isSubscribable(e))throw new Error("Only subscribable things can act as dependencies");C.callback.call(C.callbackTarget,e,e._id||(e._id=++B))}},ignore:function(e,t,n){try{return O(),e.apply(t,n||[])}finally{N()}},getDependenciesCount:function(){if(C)return C.computed.getDependenciesCount()},isInitial:function(){if(C)return C.isInitial}}),D.exportSymbol("computedContext",D.computedContext),D.exportSymbol("computedContext.getDependenciesCount",D.computedContext.getDependenciesCount),D.exportSymbol("computedContext.isInitial",D.computedContext.isInitial),D.exportSymbol("ignoreDependencies",D.ignoreDependencies=D.dependencyDetection.ignore);var j=D.utils.createSymbolOrString("_latestValue");D.observable=function(e){function t(){return 0<arguments.length?(t.isDifferent(t[j],arguments[0])&&(t.valueWillMutate(),t[j]=arguments[0],t.valueHasMutated()),this):(D.dependencyDetection.registerDependency(t),t[j])}return t[j]=e,D.utils.canSetPrototype||D.utils.extend(t,D.subscribable.fn),D.subscribable.fn.init(t),D.utils.setPrototypeOfOrExtend(t,I),D.options.deferUpdates&&D.extenders.deferred(t,!0),t};var I={equalityComparer:x,peek:function(){return this[j]},valueHasMutated:function(){this.notifySubscribers(this[j])},valueWillMutate:function(){this.notifySubscribers(this[j],"beforeChange")}};D.utils.canSetPrototype&&D.utils.setPrototypeOf(I,D.subscribable.fn);var R=D.observable.protoProperty="__ko_proto__";I[R]=D.observable,D.hasPrototype=function(e,t){return null!==e&&e!==ew&&e[R]!==ew&&(e[R]===t||D.hasPrototype(e[R],t))},D.isObservable=function(e){return D.hasPrototype(e,D.observable)},D.isWriteableObservable=function(e){return"function"==typeof e&&e[R]===D.observable||!("function"!=typeof e||e[R]!==D.dependentObservable||!e.hasWriteFunction)},D.exportSymbol("observable",D.observable),D.exportSymbol("isObservable",D.isObservable),D.exportSymbol("isWriteableObservable",D.isWriteableObservable),D.exportSymbol("isWritableObservable",D.isWriteableObservable),D.exportSymbol("observable.fn",I),D.exportProperty(I,"peek",I.peek),D.exportProperty(I,"valueHasMutated",I.valueHasMutated),D.exportProperty(I,"valueWillMutate",I.valueWillMutate),D.observableArray=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=D.observable(e);return D.utils.setPrototypeOfOrExtend(t,D.observableArray.fn),t.extend({trackArrayChanges:!0})},D.observableArray.fn={remove:function(t){for(var e=this.peek(),n=[],i="function"!=typeof t||D.isObservable(t)?function(e){return e===t}:t,r=0;r<e.length;r++){var o=e[r];i(o)&&(0===n.length&&this.valueWillMutate(),n.push(o),e.splice(r,1),r--)}return n.length&&this.valueHasMutated(),n},removeAll:function(t){if(t!==ew)return t?this.remove(function(e){return 0<=D.utils.arrayIndexOf(t,e)}):[];var e=this.peek(),n=e.slice(0);return this.valueWillMutate(),e.splice(0,e.length),this.valueHasMutated(),n},destroy:function(t){var e=this.peek(),n="function"!=typeof t||D.isObservable(t)?function(e){return e===t}:t;this.valueWillMutate();for(var i=e.length-1;0<=i;i--)n(e[i])&&(e[i]._destroy=!0);this.valueHasMutated()},destroyAll:function(t){return t===ew?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=D.utils.arrayIndexOf(t,e)}):[]},indexOf:function(e){var t=this();return D.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},D.utils.canSetPrototype&&D.utils.setPrototypeOf(D.observableArray.fn,D.observable.fn),D.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(n){D.observableArray.fn[n]=function(){var e=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(e,n,arguments);var t=e[n].apply(e,arguments);return this.valueHasMutated(),t===e?this:t}}),D.utils.arrayForEach(["slice"],function(t){D.observableArray.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),D.exportSymbol("observableArray",D.observableArray);var P="arrayChange";D.extenders.trackArrayChanges=function(i,e){if(i.compareArrayOptions={},e&&"object"==typeof e&&D.utils.extend(i.compareArrayOptions,e),i.compareArrayOptions.sparse=!0,!i.cacheDiffForKnownOperation){var t,r,g=!1,m=null,b=0,n=i.beforeSubscriptionAdd,o=i.afterSubscriptionRemove;i.beforeSubscriptionAdd=function(e){n&&n.call(i,e),e===P&&function(){if(!g){g=!0,r=i.notifySubscribers,i.notifySubscribers=function(e,t){return t&&t!==k||++b,r.apply(this,arguments)};var n=[].concat(i.peek()||[]);m=null,t=i.subscribe(function(e){if(e=[].concat(e||[]),i.hasSubscriptionsForEvent(P))var t=function(e,t){return(!m||1<b)&&(m=D.utils.compareArrays(e,t,i.compareArrayOptions)),m}(n,e);n=e,m=null,b=0,t&&t.length&&i.notifySubscribers(t,P)})}}()},i.afterSubscriptionRemove=function(e){o&&o.call(i,e),e!==P||i.hasSubscriptionsForEvent(P)||(r&&(i.notifySubscribers=r,r=ew),t.dispose(),g=!1)},i.cacheDiffForKnownOperation=function(e,t,n){if(g&&!b){var i=[],r=e.length,o=n.length,s=0;switch(t){case"push":s=r;case"unshift":for(var a=0;a<o;a++)v("added",n[a],s+a);break;case"pop":s=r-1;case"shift":r&&v("deleted",e[s],s);break;case"splice":for(var l=Math.min(Math.max(0,n[0]<0?r+n[0]:n[0]),r),c=1===o?r:Math.min(l+(n[1]||0),r),u=l+o-2,d=Math.max(c,u),p=[],h=[],f=(a=l,2);a<d;++a,++f)a<c&&h.push(v("deleted",e[a],a)),a<u&&p.push(v("added",n[f],a));D.utils.findMovesInArrayComparison(h,p);break;default:return}m=i}function v(e,t,n){return i[i.length]={status:e,value:t,index:n}}}}};var L=D.utils.createSymbolOrString("_state");function M(e,t){null!==t&&t.dispose&&t.dispose()}function _(e,t){var n=this.computedObservable,i=n[L];i.isDisposed||(this.disposalCount&&this.disposalCandidates[t]?(n.addDependencyTracking(t,e,this.disposalCandidates[t]),this.disposalCandidates[t]=null,--this.disposalCount):i.dependencyTracking[t]||n.addDependencyTracking(t,e,i.isSleeping?{_target:e}:n.subscribeToDependency(e)),e._notificationIsPending&&e._notifyNextChangeIfValueIsDifferent())}D.computed=D.dependentObservable=function(e,t,n){if("object"==typeof e?n=e:(n=n||{},e&&(n.read=e)),"function"!=typeof n.read)throw Error("Pass a function that returns the value of the ko.computed");var i=n.write,r={latestValue:ew,isStale:!0,isDirty:!0,isBeingEvaluated:!1,suppressDisposalUntilDisposeWhenReturnsFalse:!1,isDisposed:!1,pure:!1,isSleeping:!1,readFunction:n.read,evaluatorFunctionTarget:t||n.owner,disposeWhenNodeIsRemoved:n.disposeWhenNodeIsRemoved||n.disposeWhenNodeIsRemoved||null,disposeWhen:n.disposeWhen||n.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};function o(){if(0<arguments.length){if("function"!=typeof i)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return i.apply(r.evaluatorFunctionTarget,arguments),this}return D.dependencyDetection.registerDependency(o),(r.isDirty||r.isSleeping&&o.haveDependenciesChanged())&&o.evaluateImmediate(),r.latestValue}return o[L]=r,o.hasWriteFunction="function"==typeof i,D.utils.canSetPrototype||D.utils.extend(o,D.subscribable.fn),D.subscribable.fn.init(o),D.utils.setPrototypeOfOrExtend(o,z),n.pure?(r.pure=!0,r.isSleeping=!0,D.utils.extend(o,F)):n.deferEvaluation&&D.utils.extend(o,H),D.options.deferUpdates&&D.extenders.deferred(o,!0),o._options=n,r.disposeWhenNodeIsRemoved&&(r.suppressDisposalUntilDisposeWhenReturnsFalse=!0,r.disposeWhenNodeIsRemoved.nodeType||(r.disposeWhenNodeIsRemoved=null)),r.isSleeping||n.deferEvaluation||o.evaluateImmediate(),r.disposeWhenNodeIsRemoved&&o.isActive()&&D.utils.domNodeDisposal.addDisposeCallback(r.disposeWhenNodeIsRemoved,r.domNodeDisposalCallback=function(){o.dispose()}),o};var z={equalityComparer:x,getDependenciesCount:function(){return this[L].dependenciesCount},addDependencyTracking:function(e,t,n){if(this[L].pure&&t===this)throw Error("A 'pure' computed must not be called recursively");(this[L].dependencyTracking[e]=n)._order=this[L].dependenciesCount++,n._version=t.getVersion()},haveDependenciesChanged:function(){var e,t,n=this[L].dependencyTracking;for(e in n)if(n.hasOwnProperty(e)&&(t=n[e],this._evalDelayed&&t._target._notificationIsPending||t._target.hasChanged(t._version)))return!0},markDirty:function(){this._evalDelayed&&!this[L].isBeingEvaluated&&this._evalDelayed(!1)},isActive:function(){var e=this[L];return e.isDirty||0<e.dependenciesCount},respondToChange:function(){this._notificationIsPending?this[L].isDirty&&(this[L].isStale=!0):this.evaluatePossiblyAsync()},subscribeToDependency:function(e){if(!e._deferUpdates||this[L].disposeWhenNodeIsRemoved)return e.subscribe(this.evaluatePossiblyAsync,this);var t=e.subscribe(this.markDirty,this,"dirty"),n=e.subscribe(this.respondToChange,this);return{_target:e,dispose:function(){t.dispose(),n.dispose()}}},evaluatePossiblyAsync:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[L].evaluationTimeoutInstance),this[L].evaluationTimeoutInstance=D.utils.setTimeout(function(){e.evaluateImmediate(!0)},t)):e._evalDelayed?e._evalDelayed(!0):e.evaluateImmediate(!0)},evaluateImmediate:function(e){var t=this[L],n=t.disposeWhen,i=!1;if(!t.isBeingEvaluated&&!t.isDisposed){if(t.disposeWhenNodeIsRemoved&&!D.utils.domNodeIsAttachedToDocument(t.disposeWhenNodeIsRemoved)||n&&n()){if(!t.suppressDisposalUntilDisposeWhenReturnsFalse)return void this.dispose()}else t.suppressDisposalUntilDisposeWhenReturnsFalse=!1;t.isBeingEvaluated=!0;try{i=this.evaluateImmediate_CallReadWithDependencyDetection(e)}finally{t.isBeingEvaluated=!1}return t.dependenciesCount||this.dispose(),i}},evaluateImmediate_CallReadWithDependencyDetection:function(e){var t=this,n=t[L],i=!1,r=n.pure?ew:!n.dependenciesCount,o={computedObservable:t,disposalCandidates:n.dependencyTracking,disposalCount:n.dependenciesCount};D.dependencyDetection.begin({callbackTarget:o,callback:_,computed:t,isInitial:r}),n.dependencyTracking={},n.dependenciesCount=0;var s=this.evaluateImmediate_CallReadThenEndDependencyDetection(n,o);return t.isDifferent(n.latestValue,s)&&(n.isSleeping||t.notifySubscribers(n.latestValue,"beforeChange"),n.latestValue=s,t._latestValue=s,n.isSleeping?t.updateVersion():e&&t.notifySubscribers(n.latestValue),i=!0),r&&t.notifySubscribers(n.latestValue,"awake"),i},evaluateImmediate_CallReadThenEndDependencyDetection:function(e,t){try{var n=e.readFunction;return e.evaluatorFunctionTarget?n.call(e.evaluatorFunctionTarget):n()}finally{D.dependencyDetection.end(),t.disposalCount&&!e.isSleeping&&D.utils.objectForEach(t.disposalCandidates,M),e.isStale=e.isDirty=!1}},peek:function(e){var t=this[L];return(t.isDirty&&(e||!t.dependenciesCount)||t.isSleeping&&this.haveDependenciesChanged())&&this.evaluateImmediate(),t.latestValue},limit:function(e){D.subscribable.fn.limit.call(this,e),this._evalIfChanged=function(){return this[L].isStale?this.evaluateImmediate():this[L].isDirty=!1,this[L].latestValue},this._evalDelayed=function(e){this._limitBeforeChange(this[L].latestValue),this[L].isDirty=!0,e&&(this[L].isStale=!0),this._limitChange(this)}},dispose:function(){var e=this[L];!e.isSleeping&&e.dependencyTracking&&D.utils.objectForEach(e.dependencyTracking,function(e,t){t.dispose&&t.dispose()}),e.disposeWhenNodeIsRemoved&&e.domNodeDisposalCallback&&D.utils.domNodeDisposal.removeDisposeCallback(e.disposeWhenNodeIsRemoved,e.domNodeDisposalCallback),e.dependencyTracking=null,e.dependenciesCount=0,e.isDisposed=!0,e.isStale=!1,e.isDirty=!1,e.isSleeping=!1,e.disposeWhenNodeIsRemoved=null}},F={beforeSubscriptionAdd:function(e){var r=this,o=r[L];if(!o.isDisposed&&o.isSleeping&&"change"==e){if(o.isSleeping=!1,o.isStale||r.haveDependenciesChanged())o.dependencyTracking=null,o.dependenciesCount=0,r.evaluateImmediate()&&r.updateVersion();else{var n=[];D.utils.objectForEach(o.dependencyTracking,function(e,t){n[t._order]=e}),D.utils.arrayForEach(n,function(e,t){var n=o.dependencyTracking[e],i=r.subscribeToDependency(n._target);i._order=t,i._version=n._version,o.dependencyTracking[e]=i})}o.isDisposed||r.notifySubscribers(o.latestValue,"awake")}},afterSubscriptionRemove:function(e){var n=this[L];n.isDisposed||"change"!=e||this.hasSubscriptionsForEvent("change")||(D.utils.objectForEach(n.dependencyTracking,function(e,t){t.dispose&&(n.dependencyTracking[e]={_target:t._target,_order:t._order,_version:t._version},t.dispose())}),n.isSleeping=!0,this.notifySubscribers(ew,"asleep"))},getVersion:function(){var e=this[L];return e.isSleeping&&(e.isStale||this.haveDependenciesChanged())&&this.evaluateImmediate(),D.subscribable.fn.getVersion.call(this)}},H={beforeSubscriptionAdd:function(e){"change"!=e&&"beforeChange"!=e||this.peek()}};D.utils.canSetPrototype&&D.utils.setPrototypeOf(z,D.subscribable.fn);var V,G,W,Y,q,X,U,K,$,J,Q,Z,ee,te,ne,ie,re=D.observable.protoProperty;function oe(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(var i in e)t(i)}function se(){this.keys=[],this.values=[]}function ae(e){var t=D.utils.stringTrim(e);123===t.charCodeAt(0)&&(t=t.slice(1,-1));var n,i=[],r=t.match(Y),o=[],s=0;if(r){r.push(",");for(var a,l=0;a=r[l];++l){var c=a.charCodeAt(0);if(44===c){if(s<=0){i.push(n&&o.length?{key:n,value:o.join("")}:{unknown:n||o.join("")}),n=s=0,o=[];continue}}else if(58===c){if(!s&&!n&&1===o.length){n=o.pop();continue}}else if(47===c&&l&&1<a.length){var u=r[l-1].match(q);u&&!X[u[0]]&&((r=(t=t.substr(t.indexOf(a)+1)).match(Y)).push(","),l=-1,a="/")}else 40===c||123===c||91===c?++s:41===c||125===c||93===c?--s:n||o.length||34!==c&&39!==c||(a=a.slice(1,-1));o.push(a)}}return i}function le(e){return 8==e.nodeType&&$.test(K?e.text:e.nodeValue)}function ce(e){return 8==e.nodeType&&J.test(K?e.text:e.nodeValue)}function ue(e,t){for(var n=e,i=1,r=[];n=n.nextSibling;){if(ce(n)&&0==--i)return r;r.push(n),le(n)&&i++}if(!t)throw new Error("Cannot find closing comment tag to match: "+e.nodeValue);return null}function de(e,t){var n=ue(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}function pe(e){var t=e.firstChild,n=null;if(t)do{if(n)n.push(t);else if(le(t)){var i=de(t,!0);i?t=i:n=[t]}else ce(t)&&(n=[t])}while(t=t.nextSibling);return n}function he(e,t){return e.hasOwnProperty(t)?e[t]:ee}function fe(t,n,i,r){var e=(r=r||D.components.loaders.slice(0)).shift();if(e){var o=e[t];if(o){var s=!1;if(o.apply(e,n.concat(function(e){s?i(null):null!==e?i(e):fe(t,n,i,r)}))!==ee&&(s=!0,!e.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else fe(t,n,i,r)}else i(null)}D.computed[re]=D.observable,z[re]=D.computed,D.isComputed=function(e){return D.hasPrototype(e,D.computed)},D.isPureComputed=function(e){return D.hasPrototype(e,D.computed)&&e[L]&&e[L].pure},D.exportSymbol("computed",D.computed),D.exportSymbol("dependentObservable",D.computed),D.exportSymbol("isComputed",D.isComputed),D.exportSymbol("isPureComputed",D.isPureComputed),D.exportSymbol("computed.fn",z),D.exportProperty(z,"peek",z.peek),D.exportProperty(z,"dispose",z.dispose),D.exportProperty(z,"isActive",z.isActive),D.exportProperty(z,"getDependenciesCount",z.getDependenciesCount),D.pureComputed=function(e,t){return"function"==typeof e?D.computed(e,t,{pure:!0}):((e=D.utils.extend({},e)).pure=!0,D.computed(e,t))},D.exportSymbol("pureComputed",D.pureComputed),D.toJS=function(e){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return function i(r,o,s){s=s||new se;var e=!("object"!=typeof(r=o(r))||null===r||r===ew||r instanceof RegExp||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean);if(!e)return r;var a=r instanceof Array?[]:{};return s.save(r,a),oe(r,function(e){var t=o(r[e]);switch(typeof t){case"boolean":case"number":case"string":case"function":a[e]=t;break;case"object":case"undefined":var n=s.get(t);a[e]=n!==ew?n:i(t,o,s)}}),a}(e,function(e){for(var t=0;D.isObservable(e)&&t<10;t++)e=e();return e})},D.toJSON=function(e,t,n){var i=D.toJS(e);return D.utils.stringifyJson(i,t,n)},se.prototype={constructor:se,save:function(e,t){var n=D.utils.arrayIndexOf(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var t=D.utils.arrayIndexOf(this.keys,e);return 0<=t?this.values[t]:ew}},D.exportSymbol("toJS",D.toJS),D.exportSymbol("toJSON",D.toJSON),V="__ko__hasDomDataOptionValue__",D.selectExtensions={readValue:function(e){switch(D.utils.tagNameLower(e)){case"option":return!0===e[V]?D.utils.domData.get(e,D.bindingHandlers.options.optionValueDomDataKey):D.utils.ieVersion<=7?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?D.selectExtensions.readValue(e.options[e.selectedIndex]):ew;default:return e.value}},writeValue:function(e,t,n){switch(D.utils.tagNameLower(e)){case"option":switch(typeof t){case"string":D.utils.domData.set(e,D.bindingHandlers.options.optionValueDomDataKey,ew),V in e&&delete e[V],e.value=t;break;default:D.utils.domData.set(e,D.bindingHandlers.options.optionValueDomDataKey,t),e[V]=!0,e.value="number"==typeof t?t:""}break;case"select":""!==t&&null!==t||(t=ew);for(var i,r=-1,o=0,s=e.options.length;o<s;++o)if((i=D.selectExtensions.readValue(e.options[o]))==t||""==i&&t===ew){r=o;break}(n||0<=r||t===ew&&1<e.size)&&(e.selectedIndex=r);break;default:null!==t&&t!==ew||(t=""),e.value=t}}},D.exportSymbol("selectExtensions",D.selectExtensions),D.exportSymbol("selectExtensions.readValue",D.selectExtensions.readValue),D.exportSymbol("selectExtensions.writeValue",D.selectExtensions.writeValue),D.expressionRewriting=(G=["true","false","null","undefined"],W=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,Y=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),q=/[\])"'A-Za-z0-9_$]+$/,X={in:1,return:1,typeof:1},{bindingRewriteValidators:[],twoWayBindings:U={},parseObjectLiteral:ae,preProcessBindings:function(e,t){function r(e,t){var n,i;if(!l){if((i=D.getBindingHandler(e))&&i.preprocess&&!(t=i.preprocess(t,e,r)))return;U[e]&&(n=function(e){if(0<=D.utils.arrayIndexOf(G,e))return!1;var t=e.match(W);return null!==t&&(t[1]?"Object("+t[1]+")"+t[2]:e)}(t))&&s.push("'"+e+"':function(_z){"+n+"=_z}")}a&&(t="function(){return "+t+" }"),o.push("'"+e+"':"+t)}var o=[],s=[],a=(t=t||{}).valueAccessors,l=t.bindingParams,n="string"==typeof e?ae(e):e;return D.utils.arrayForEach(n,function(e){r(e.key||e.unknown,e.value)}),s.length&&r("_ko_property_writers","{"+s.join(",")+" }"),o.join(",")},keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},writeValueToProperty:function(e,t,n,i,r){if(e&&D.isObservable(e))!D.isWriteableObservable(e)||r&&e.peek()===i||e(i);else{var o=t.get("_ko_property_writers");o&&o[n]&&o[n](i)}}}),D.exportSymbol("expressionRewriting",D.expressionRewriting),D.exportSymbol("expressionRewriting.bindingRewriteValidators",D.expressionRewriting.bindingRewriteValidators),D.exportSymbol("expressionRewriting.parseObjectLiteral",D.expressionRewriting.parseObjectLiteral),D.exportSymbol("expressionRewriting.preProcessBindings",D.expressionRewriting.preProcessBindings),D.exportSymbol("expressionRewriting._twoWayBindings",D.expressionRewriting.twoWayBindings),D.exportSymbol("jsonExpressionRewriting",D.expressionRewriting),D.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",D.expressionRewriting.preProcessBindings),K=gw&&"\x3c!--test--\x3e"===gw.createComment("test").text,$=K?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,J=K?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,Q={ul:!0,ol:!0},D.virtualElements={allowedBindings:{},childNodes:function(e){return le(e)?ue(e):e.childNodes},emptyNode:function(e){if(le(e))for(var t=D.virtualElements.childNodes(e),n=0,i=t.length;n<i;n++)D.removeNode(t[n]);else D.utils.emptyDomNode(e)},setDomNodeChildren:function(e,t){if(le(e)){D.virtualElements.emptyNode(e);for(var n=e.nextSibling,i=0,r=t.length;i<r;i++)n.parentNode.insertBefore(t[i],n)}else D.utils.setDomNodeChildren(e,t)},prepend:function(e,t){le(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},insertAfter:function(e,t,n){n?le(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):D.virtualElements.prepend(e,t)},firstChild:function(e){return le(e)?!e.nextSibling||ce(e.nextSibling)?null:e.nextSibling:e.firstChild},nextSibling:function(e){return le(e)&&(e=de(e)),e.nextSibling&&ce(e.nextSibling)?null:e.nextSibling},hasBindingValue:le,virtualNodeBindingValue:function(e){var t=(K?e.text:e.nodeValue).match($);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(Q[D.utils.tagNameLower(e)]){var t=e.firstChild;if(t)do{if(1===t.nodeType){var n=pe(t);if(n)for(var i=t.nextSibling,r=0;r<n.length;r++)i?e.insertBefore(n[r],i):e.appendChild(n[r])}}while(t=t.nextSibling)}}},D.exportSymbol("virtualElements",D.virtualElements),D.exportSymbol("virtualElements.allowedBindings",D.virtualElements.allowedBindings),D.exportSymbol("virtualElements.emptyNode",D.virtualElements.emptyNode),D.exportSymbol("virtualElements.insertAfter",D.virtualElements.insertAfter),D.exportSymbol("virtualElements.prepend",D.virtualElements.prepend),D.exportSymbol("virtualElements.setDomNodeChildren",D.virtualElements.setDomNodeChildren),Z="data-bind",D.bindingProvider=function(){this.bindingCache={}},D.utils.extend(D.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute(Z)||D.components.getComponentNameForNode(e);case 8:return D.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),i=n?this.parseBindingsString(n,t,e):null;return D.components.addBindingsForCustomElement(i,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),i=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return D.components.addBindingsForCustomElement(i,e,t,!0)},getBindingsString:function(e,t){switch(e.nodeType){case 1:return e.getAttribute(Z);case 8:return D.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,e,n,i){try{return function(e,t,n){var i=e+(n&&n.valueAccessors||"");return t[i]||(t[i]=function(e,t){var n=D.expressionRewriting.preProcessBindings(e,t);return new Function("$context","$element","with($context){with($data||{}){return{"+n+"}}}")}(e,n))}(t,this.bindingCache,i)(e,n)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}}}),D.bindingProvider.instance=new D.bindingProvider,D.exportSymbol("bindingProvider",D.bindingProvider),function(){D.bindingHandlers={};var o={script:!0,textarea:!0,template:!0};function r(e){return function(){return e}}function h(e){return e()}function s(n){return D.utils.objectMap(D.dependencyDetection.ignore(n),function(e,t){return function(){return n()[t]}})}function f(e,t){return s(this.getBindings.bind(this,e,t))}function a(e,t,n){var i,r=D.virtualElements.firstChild(t),o=D.bindingProvider.instance,s=o.preprocessNode;if(s){for(;i=r;)r=D.virtualElements.nextSibling(i),s.call(o,i);r=D.virtualElements.firstChild(t)}for(;i=r;)r=D.virtualElements.nextSibling(i),l(e,i,n)}function l(e,t,n){var i=!0,r=1===t.nodeType;r&&D.virtualElements.normaliseVirtualElementDomStructure(t),(r&&n||D.bindingProvider.instance.nodeHasBindings(t))&&(i=c(t,null,e,n).shouldBindDescendants),i&&!o[D.utils.tagNameLower(t)]&&a(e,t,!r)}D.getBindingHandler=function(e){return D.bindingHandlers[e]},D.bindingContext=function(n,i,r,o,e){function t(){var e=c?n():n,t=D.utils.unwrapObservable(e);return i?(i._subscribable&&i._subscribable(),D.utils.extend(l,i),l._subscribable=a):(l.$parents=[],l.$root=t,l.ko=D),l.$rawData=e,l.$data=t,r&&(l[r]=t),o&&o(l,i,t),l.$data}var s,a,l=this,c="function"==typeof n&&!D.isObservable(n);e&&e.exportDependencies?t():(a=D.dependentObservable(t,null,{disposeWhen:function(){return s&&!D.utils.anyDomNodeIsAttachedToDocument(s)},disposeWhenNodeIsRemoved:!0})).isActive()&&((l._subscribable=a).equalityComparer=null,s=[],a._addNode=function(e){s.push(e),D.utils.domNodeDisposal.addDisposeCallback(e,function(e){D.utils.arrayRemoveItem(s,e),s.length||(a.dispose(),l._subscribable=a=ew)})})},D.bindingContext.prototype.createChildContext=function(e,t,n,i){return new D.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)},i)},D.bindingContext.prototype.extend=function(n){return new D.bindingContext(this._subscribable||this.$data,this,null,function(e,t){e.$rawData=t.$rawData,D.utils.extend(e,"function"==typeof n?n():n)})},D.bindingContext.prototype.createStaticChildContext=function(e,t){return this.createChildContext(e,t,null,{exportDependencies:!0})};var v=D.utils.domData.nextKey();function c(r,e,o,t){var s,a,n=D.utils.domData.get(r,v);if(!e){if(n)throw Error("You cannot apply bindings multiple times to the same element.");D.utils.domData.set(r,v,!0)}if(!n&&t&&D.storedBindingContextForNode(r,o),e&&"function"!=typeof e)s=e;else{var i=D.bindingProvider.instance,l=i.getBindingAccessors||f,c=D.dependentObservable(function(){return(s=e?e(o,r):l.call(i,r,o))&&o._subscribable&&o._subscribable(),s},null,{disposeWhenNodeIsRemoved:r});s&&c.isActive()||(c=null)}if(s){var u=c?function(e){return function(){return h(c()[e])}}:function(e){return s[e]};function d(){return D.utils.objectMap(c?c():s,h)}d.get=function(e){return s[e]&&h(u(e))},d.has=function(e){return e in s};var p=function(i){var r=[],o={},s=[];return D.utils.objectForEach(i,function t(e){if(!o[e]){var n=D.getBindingHandler(e);n&&(n.after&&(s.push(e),D.utils.arrayForEach(n.after,function(e){if(i[e]){if(-1!==D.utils.arrayIndexOf(s,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+s.join(", "));t(e)}}),s.length--),r.push({key:e,handler:n})),o[e]=!0}}),r}(s);D.utils.arrayForEach(p,function(e){var t=e.handler.init,n=e.handler.update,i=e.key;8===r.nodeType&&function(e){if(!D.virtualElements.allowedBindings[e])throw new Error("The binding '"+e+"' cannot be used with virtual elements")}(i);try{"function"==typeof t&&D.dependencyDetection.ignore(function(){var e=t(r,u(i),d,o.$data,o);if(e&&e.controlsDescendantBindings){if(a!==ew)throw new Error("Multiple bindings ("+a+" and "+i+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");a=i}}),"function"==typeof n&&D.dependentObservable(function(){n(r,u(i),d,o.$data,o)},null,{disposeWhenNodeIsRemoved:r})}catch(e){throw e.message='Unable to process binding "'+i+": "+s[i]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:a===ew}}var n=D.utils.domData.nextKey();function u(e){return e&&e instanceof D.bindingContext?e:new D.bindingContext(e)}D.storedBindingContextForNode=function(e,t){if(2!=arguments.length)return D.utils.domData.get(e,n);D.utils.domData.set(e,n,t),t._subscribable&&t._subscribable._addNode(e)},D.applyBindingAccessorsToNode=function(e,t,n){return 1===e.nodeType&&D.virtualElements.normaliseVirtualElementDomStructure(e),c(e,t,u(n),!0)},D.applyBindingsToNode=function(e,t,n){var i=u(n);return D.applyBindingAccessorsToNode(e,function(e,t,n){return"function"==typeof e?s(e.bind(null,t,n)):D.utils.objectMap(e,r)}(t,i,e),i)},D.applyBindingsToDescendants=function(e,t){1!==t.nodeType&&8!==t.nodeType||a(u(e),t,!0)},D.applyBindings=function(e,t){if(!iw&&fw.jQuery&&(iw=fw.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||fw.document.body,l(u(e),t,!0)},D.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=D.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return D.contextFor(e.parentNode)}return ew},D.dataFor=function(e){var t=D.contextFor(e);return t?t.$data:ew},D.exportSymbol("bindingHandlers",D.bindingHandlers),D.exportSymbol("applyBindings",D.applyBindings),D.exportSymbol("applyBindingsToDescendants",D.applyBindingsToDescendants),D.exportSymbol("applyBindingAccessorsToNode",D.applyBindingAccessorsToNode),D.exportSymbol("applyBindingsToNode",D.applyBindingsToNode),D.exportSymbol("contextFor",D.contextFor),D.exportSymbol("dataFor",D.dataFor)}(),te={},ne={},D.components={get:function(e,t){var n=he(ne,e);n?n.isSynchronousComponent?D.dependencyDetection.ignore(function(){t(n.definition)}):D.tasks.schedule(function(){t(n.definition)}):function(i,e){var r,o=he(te,i);o?o.subscribe(e):((o=te[i]=new D.subscribable).subscribe(e),function(e,n){fe("getConfig",[e],function(t){t?fe("loadComponent",[e,t],function(e){n(e,t)}):n(null,null)})}(i,function(e,t){var n=!(!t||!t.synchronous);ne[i]={definition:e,isSynchronousComponent:n},delete te[i],r||n?o.notifySubscribers(e):D.tasks.schedule(function(){o.notifySubscribers(e)})}),r=!0)}(e,t)},clearCachedDefinition:function(e){delete ne[e]},_getFirstResultFromLoaders:fe},D.components.loaders=[],D.exportSymbol("components",D.components),D.exportSymbol("components.get",D.components.get),D.exportSymbol("components.clearCachedDefinition",D.components.clearCachedDefinition),function(){var n={};D.components.register=function(e,t){if(!t)throw new Error("Invalid configuration for "+e);if(D.components.isRegistered(e))throw new Error("Component "+e+" is already registered");n[e]=t},D.components.isRegistered=function(e){return n.hasOwnProperty(e)},D.components.unregister=function(e){delete n[e],D.components.clearCachedDefinition(e)},D.components.defaultLoader={getConfig:function(e,t){t(n.hasOwnProperty(e)?n[e]:null)},loadComponent:function(t,e,n){var i=r(t);u(i,e,function(e){!function(t,e,n,i){function r(){0==--s&&i(o)}var o={},s=2,a=n.template,l=n.viewModel;a?u(e,a,function(e){D.components._getFirstResultFromLoaders("loadTemplate",[t,e],function(e){o.template=e,r()})}):r(),l?u(e,l,function(e){D.components._getFirstResultFromLoaders("loadViewModel",[t,e],function(e){o[c]=e,r()})}):r()}(t,i,e,n)})},loadTemplate:function(e,t,n){!function(e,t,n){if("string"==typeof t)n(D.utils.parseHtmlFragment(t));else if(t instanceof Array)n(t);else if(s(t))n(D.utils.makeArray(t.childNodes));else if(t.element){var i=t.element;if(function(e){return fw.HTMLElement?e instanceof HTMLElement:e&&e.tagName&&1===e.nodeType}(i))n(o(i));else if("string"==typeof i){var r=gw.getElementById(i);r?n(o(r)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i)}else e("Unknown template value: "+t)}(r(e),t,n)},loadViewModel:function(e,t,n){!function e(t,n,i){if("function"==typeof n)i(function(e){return new n(e)});else if("function"==typeof n[c])i(n[c]);else if("instance"in n){var r=n.instance;i(function(e,t){return r})}else"viewModel"in n?e(t,n.viewModel,i):t("Unknown viewModel value: "+n)}(r(e),t,n)}};var c="createViewModel";function o(e){switch(D.utils.tagNameLower(e)){case"script":return D.utils.parseHtmlFragment(e.text);case"textarea":return D.utils.parseHtmlFragment(e.value);case"template":if(s(e.content))return D.utils.cloneNodes(e.content.childNodes)}return D.utils.cloneNodes(e.childNodes)}function s(e){return fw.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function u(e,t,n){"string"==typeof t.require?i||fw.require?(i||fw.require)([t.require],n):e("Uses require, but no AMD loader is present"):n(t)}function r(t){return function(e){throw new Error("Component '"+t+"': "+e)}}D.exportSymbol("components.register",D.components.register),D.exportSymbol("components.isRegistered",D.components.isRegistered),D.exportSymbol("components.unregister",D.components.unregister),D.exportSymbol("components.defaultLoader",D.components.defaultLoader),D.components.loaders.push(D.components.defaultLoader),D.components._allRegisteredComponents=n}(),function(){D.components.getComponentNameForNode=function(e){var t=D.utils.tagNameLower(e);if(D.components.isRegistered(t)&&(-1!=t.indexOf("-")||""+e=="[object HTMLUnknownElement]"||D.utils.ieVersion<=8&&e.tagName===t))return t},D.components.addBindingsForCustomElement=function(e,t,n,i){if(1===t.nodeType){var r=D.components.getComponentNameForNode(t);if(r){if((e=e||{}).component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var o={name:r,params:function(i,e){var t=i.getAttribute("params");if(t){var n=s.parseBindingsString(t,e,i,{valueAccessors:!0,bindingParams:!0}),r=D.utils.objectMap(n,function(e,t){return D.computed(e,null,{disposeWhenNodeIsRemoved:i})}),o=D.utils.objectMap(r,function(t,e){var n=t.peek();return t.isActive()?D.computed({read:function(){return D.utils.unwrapObservable(t())},write:D.isWriteableObservable(n)&&function(e){t()(e)},disposeWhenNodeIsRemoved:i}):n});return o.hasOwnProperty("$raw")||(o.$raw=r),o}return{$raw:{}}}(t,n)};e.component=i?function(){return o}:o}}return e};var i,t,s=new D.bindingProvider;D.utils.ieVersion<9&&(D.components.register=(t=D.components.register,function(e){return gw.createElement(e),t.apply(this,arguments)}),gw.createDocumentFragment=(i=gw.createDocumentFragment,function(){var e=i(),t=D.components._allRegisteredComponents;for(var n in t)t.hasOwnProperty(n)&&e.createElement(n);return e}))}(),ie=0,D.bindingHandlers.component={init:function(s,t,e,n,a){function l(){var e=c&&c.dispose;"function"==typeof e&&e.call(c),u=c=null}var c,u,d=D.utils.makeArray(D.virtualElements.childNodes(s));return D.utils.domNodeDisposal.addDisposeCallback(s,l),D.computed(function(){var i,r,e=D.utils.unwrapObservable(t());if("string"==typeof e?i=e:(i=D.utils.unwrapObservable(e.name),r=D.utils.unwrapObservable(e.params)),!i)throw new Error("No component name specified");var o=u=++ie;D.components.get(i,function(e){if(u===o){if(l(),!e)throw new Error("Unknown component '"+i+"'");!function(e,t,n){var i=t.template;if(!i)throw new Error("Component '"+e+"' has no template");var r=D.utils.cloneNodes(i);D.virtualElements.setDomNodeChildren(n,r)}(i,e,s);var t=function(e,t,n,i){var r=e.createViewModel;return r?r.call(e,i,{element:t,templateNodes:n}):i}(e,s,d,r),n=a.createChildContext(t,void 0,function(e){e.$component=t,e.$componentTemplateNodes=d});c=t,D.applyBindingsToDescendants(n,s)}})},null,{disposeWhenNodeIsRemoved:s}),{controlsDescendantBindings:!0}}},D.virtualElements.allowedBindings.component=!0;var ve={class:"className",for:"htmlFor"};D.bindingHandlers.attr={update:function(i,e,t){var n=D.utils.unwrapObservable(e())||{};D.utils.objectForEach(n,function(e,t){var n=!1===(t=D.utils.unwrapObservable(t))||null===t||t===ew;n&&i.removeAttribute(e),D.utils.ieVersion<=8&&e in ve?(e=ve[e],n?i.removeAttribute(e):i[e]=t):n||i.setAttribute(e,t.toString()),"name"===e&&D.utils.setElementName(i,n?"":t.toString())})}},D.bindingHandlers.checked={after:["value","attr"],init:function(r,o,s){var a=D.pureComputed(function(){return s.has("checkedValue")?D.utils.unwrapObservable(s.get("checkedValue")):s.has("value")?D.utils.unwrapObservable(s.get("value")):r.value});function e(){var e=r.checked,t=p?a():e;if(!D.computedContext.isInitial()&&(!l||e)){var n=D.dependencyDetection.ignore(o);if(c){var i=u?n.peek():n;d!==t?(e&&(D.utils.addOrRemoveItem(i,t,!0),D.utils.addOrRemoveItem(i,d,!1)),d=t):D.utils.addOrRemoveItem(i,t,e),u&&D.isWriteableObservable(n)&&n(i)}else D.expressionRewriting.writeValueToProperty(n,s,"checked",t,!0)}}var t="checkbox"==r.type,l="radio"==r.type;if(t||l){var n=o(),c=t&&D.utils.unwrapObservable(n)instanceof Array,u=!(c&&n.push&&n.splice),d=c?a():ew,p=l||c;l&&!r.name&&D.bindingHandlers.uniqueName.init(r,function(){return!0}),D.computed(e,null,{disposeWhenNodeIsRemoved:r}),D.utils.registerEventHandler(r,"click",e),D.computed(function(){var e=D.utils.unwrapObservable(o());r.checked=c?0<=D.utils.arrayIndexOf(e,a()):t?e:a()===e},null,{disposeWhenNodeIsRemoved:r}),n=ew}}},D.expressionRewriting.twoWayBindings.checked=!0,D.bindingHandlers.checkedValue={update:function(e,t){e.value=D.utils.unwrapObservable(t())}};var ge="__ko__cssValue";D.bindingHandlers.css={update:function(n,e){var t=D.utils.unwrapObservable(e());null!==t&&"object"==typeof t?D.utils.objectForEach(t,function(e,t){t=D.utils.unwrapObservable(t),D.utils.toggleDomNodeCssClass(n,e,t)}):(t=D.utils.stringTrim(String(t||"")),D.utils.toggleDomNodeCssClass(n,n[ge],!1),n[ge]=t,D.utils.toggleDomNodeCssClass(n,t,!0))}},D.bindingHandlers.enable={update:function(e,t){var n=D.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},D.bindingHandlers.disable={update:function(e,t){D.bindingHandlers.enable.update(e,function(){return!D.utils.unwrapObservable(t())})}},D.bindingHandlers.event={init:function(e,o,s,a,l){var t=o()||{};D.utils.objectForEach(t,function(r){"string"==typeof r&&D.utils.registerEventHandler(e,r,function(e){var t,n=o()[r];if(n){try{var i=D.utils.makeArray(arguments);a=l.$data,i.unshift(a),t=n.apply(a,i)}finally{!0!==t&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1!==s.get(r+"Bubble")||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},D.bindingHandlers.foreach={makeTemplateValueAccessor:function(n){return function(){var e=n(),t=D.utils.peekObservable(e);return t&&"number"!=typeof t.length?(D.utils.unwrapObservable(e),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:D.nativeTemplateEngine.instance}):{foreach:e,templateEngine:D.nativeTemplateEngine.instance}}},init:function(e,t,n,i,r){return D.bindingHandlers.template.init(e,D.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,i,r){return D.bindingHandlers.template.update(e,D.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,i,r)}},D.expressionRewriting.bindingRewriteValidators.foreach=!1,D.virtualElements.allowedBindings.foreach=!0;var me="__ko_hasfocusUpdating",be="__ko_hasfocusLastValue";function ye(e,c,u,d){D.bindingHandlers[e]={init:function(r,o,e,t,s){var a,l;return D.computed(function(){var e=o(),t=D.utils.unwrapObservable(e),n=!u!=!t,i=!l;(i||c||n!==a)&&(i&&D.computedContext.getDependenciesCount()&&(l=D.utils.cloneNodes(D.virtualElements.childNodes(r),!0)),n?(i||D.virtualElements.setDomNodeChildren(r,D.utils.cloneNodes(l)),D.applyBindingsToDescendants(d?d(s,e):s,r)):D.virtualElements.emptyNode(r),a=n)},null,{disposeWhenNodeIsRemoved:r}),{controlsDescendantBindings:!0}}},D.expressionRewriting.bindingRewriteValidators[e]=!1,D.virtualElements.allowedBindings[e]=!0}D.bindingHandlers.hasfocus={init:function(r,o,s){function e(e){r[me]=!0;var t=r.ownerDocument;if("activeElement"in t){var n;try{n=t.activeElement}catch(e){n=t.body}e=n===r}var i=o();D.expressionRewriting.writeValueToProperty(i,s,"hasfocus",e,!0),r[be]=e,r[me]=!1}var t=e.bind(null,!0),n=e.bind(null,!1);D.utils.registerEventHandler(r,"focus",t),D.utils.registerEventHandler(r,"focusin",t),D.utils.registerEventHandler(r,"blur",n),D.utils.registerEventHandler(r,"focusout",n)},update:function(e,t){var n=!!D.utils.unwrapObservable(t());e[me]||e[be]===n||(n?e.focus():e.blur(),!n&&e[be]&&e.ownerDocument.body.focus(),D.dependencyDetection.ignore(D.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},D.expressionRewriting.twoWayBindings.hasfocus=!0,D.bindingHandlers.hasFocus=D.bindingHandlers.hasfocus,D.expressionRewriting.twoWayBindings.hasFocus=!0,D.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){D.utils.setHtml(e,t())}},ye("if"),ye("ifnot",!1,!0),ye("with",!0,!1,function(e,t){return e.createStaticChildContext(t)});var xe,we,Se,ke,Ee,Ce,Te={};function De(e,t,n,i){var r=D.expressionRewriting.parseObjectLiteral(e);!function(e){for(var t=D.expressionRewriting.bindingRewriteValidators,n=0;n<e.length;n++){var i=e[n].key;if(t.hasOwnProperty(i)){var r=t[i];if("function"==typeof r){var o=r(e[n].value);if(o)throw new Error(o)}else if(!r)throw new Error("This template engine does not support the '"+i+"' binding within its templates")}}}(r);var o="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+D.expressionRewriting.preProcessBindings(r,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')";return i.createJavaScriptEvaluatorBlock(o)+t}function Be(e,t,n,i,r){var o,s,a,l,c,u=Math.min,d=Math.max,p=[],h=e.length,f=t.length,v=f-h||1,g=h+f+1;for(o=0;o<=h;o++)for(l=a,p.push(a=[]),c=u(f,o+v),s=d(0,o-1);s<=c;s++)if(s)if(o)if(e[o-1]===t[s-1])a[s]=l[s-1];else{var m=l[s]||g,b=a[s-1]||g;a[s]=u(m,b)+1}else a[s]=s+1;else a[s]=o+1;var y,x=[],w=[],S=[];for(o=h,s=f;o||s;)y=p[o][s]-1,s&&y===p[o][s-1]?w.push(x[x.length]={status:n,value:t[--s],index:s}):o&&y===p[o-1][s]?S.push(x[x.length]={status:i,value:e[--o],index:o}):(--s,--o,r.sparse||x.push({status:"retained",value:t[s]}));return D.utils.findMovesInArrayComparison(S,w,!r.dontLimitMoves&&10*h),x.reverse()}function Ae(t,n,i,r,o){var s=[],e=D.dependentObservable(function(){var e=n(i,o,D.utils.fixUpContinuousNodeArray(s,t))||[];0<s.length&&(D.utils.replaceDomNodes(s,e),r&&D.dependencyDetection.ignore(r,null,[i,e,o])),s.length=0,D.utils.arrayPushAll(s,e)},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return!D.utils.anyDomNodeIsAttachedToDocument(s)}});return{mappedNodes:s,dependentObservable:e.isActive()?e:ew}}D.bindingHandlers.options={init:function(e){if("select"!==D.utils.tagNameLower(e))throw new Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(s,e,a){function t(){return D.utils.arrayFilter(s.options,function(e){return e.selected})}var n,i,r=0==s.length,o=s.multiple,l=!r&&o?s.scrollTop:null,c=D.utils.unwrapObservable(e()),u=a.get("valueAllowUnset")&&a.has("value"),d=a.get("optionsIncludeDestroyed"),p={},h=[];function f(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}u||(o?h=D.utils.arrayMap(t(),D.selectExtensions.readValue):0<=s.selectedIndex&&h.push(D.selectExtensions.readValue(s.options[s.selectedIndex]))),c&&(void 0===c.length&&(c=[c]),i=D.utils.arrayFilter(c,function(e){return d||e===ew||null===e||!D.utils.unwrapObservable(e._destroy)}),a.has("optionsCaption")&&null!==(n=D.utils.unwrapObservable(a.get("optionsCaption")))&&n!==ew&&i.unshift(Te));var v=!1;function g(e,t){if(v&&u)D.selectExtensions.writeValue(s,D.utils.unwrapObservable(a.get("value")),!0);else if(h.length){var n=0<=D.utils.arrayIndexOf(h,D.selectExtensions.readValue(t[0]));D.utils.setOptionNodeSelectionState(t[0],n),v&&!n&&D.dependencyDetection.ignore(D.utils.triggerEvent,null,[s,"change"])}}p.beforeRemove=function(e){s.removeChild(e)};var m=g;a.has("optionsAfterRender")&&"function"==typeof a.get("optionsAfterRender")&&(m=function(e,t){g(0,t),D.dependencyDetection.ignore(a.get("optionsAfterRender"),null,[t[0],e!==Te?e:ew])}),D.utils.setDomNodeChildrenFromArrayMapping(s,i,function(e,t,n){n.length&&(h=!u&&n[0].selected?[D.selectExtensions.readValue(n[0])]:[],v=!0);var i=s.ownerDocument.createElement("option");if(e===Te)D.utils.setTextContent(i,a.get("optionsCaption")),D.selectExtensions.writeValue(i,ew);else{var r=f(e,a.get("optionsValue"),e);D.selectExtensions.writeValue(i,D.utils.unwrapObservable(r));var o=f(e,a.get("optionsText"),r);D.utils.setTextContent(i,o)}return[i]},p,m),D.dependencyDetection.ignore(function(){u?D.selectExtensions.writeValue(s,D.utils.unwrapObservable(a.get("value")),!0):(o?h.length&&t().length<h.length:h.length&&0<=s.selectedIndex?D.selectExtensions.readValue(s.options[s.selectedIndex])!==h[0]:h.length||0<=s.selectedIndex)&&D.utils.triggerEvent(s,"change")}),D.utils.ensureSelectElementIsRenderedCorrectly(s),l&&20<Math.abs(l-s.scrollTop)&&(s.scrollTop=l)}},D.bindingHandlers.options.optionValueDomDataKey=D.utils.domData.nextKey(),D.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(n,i,r){D.utils.registerEventHandler(n,"change",function(){var e=i(),t=[];D.utils.arrayForEach(n.getElementsByTagName("option"),function(e){e.selected&&t.push(D.selectExtensions.readValue(e))}),D.expressionRewriting.writeValueToProperty(e,r,"selectedOptions",t)})},update:function(e,t){if("select"!=D.utils.tagNameLower(e))throw new Error("values binding applies only to SELECT elements");var n=D.utils.unwrapObservable(t()),i=e.scrollTop;n&&"number"==typeof n.length&&D.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=0<=D.utils.arrayIndexOf(n,D.selectExtensions.readValue(e));e.selected!=t&&D.utils.setOptionNodeSelectionState(e,t)}),e.scrollTop=i}},D.expressionRewriting.twoWayBindings.selectedOptions=!0,D.bindingHandlers.style={update:function(n,e){var t=D.utils.unwrapObservable(e()||{});D.utils.objectForEach(t,function(e,t){null!==(t=D.utils.unwrapObservable(t))&&t!==ew&&!1!==t||(t=""),n.style[e]=t})}},D.bindingHandlers.submit={init:function(i,r,e,t,o){if("function"!=typeof r())throw new Error("The value for a submit binding must be a function");D.utils.registerEventHandler(i,"submit",function(e){var t,n=r();try{t=n.call(o.$data,i)}finally{!0!==t&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}})}},D.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){D.utils.setTextContent(e,t())}},D.virtualElements.allowedBindings.text=!0,function(){if(fw&&fw.navigator){function e(e){if(e)return parseFloat(e[1])}var p=fw.opera&&fw.opera.version&&parseInt(fw.opera.version()),t=fw.navigator.userAgent,h=e(t.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),f=e(t.match(/Firefox\/([^ ]*)/))}if(D.utils.ieVersion<10){function i(e){var t=this.activeElement,n=t&&D.utils.domData.get(t,o);n&&n(e)}var r=D.utils.domData.nextKey(),o=D.utils.domData.nextKey(),v=function(e,t){var n=e.ownerDocument;D.utils.domData.get(n,r)||(D.utils.domData.set(n,r,!0),D.utils.registerEventHandler(n,"selectionchange",i)),D.utils.domData.set(e,o,t)}}D.bindingHandlers.textInput={init:function(n,i,r){function o(e){clearTimeout(a),l=a=ew;var t=n.value;c!==t&&(e&&(n._ko_textInputProcessedEvent=e.type),c=t,D.expressionRewriting.writeValueToProperty(i(),r,"textInput",t))}function t(e){if(!a){l=n.value;var t=o.bind(n,{type:e.type});a=D.utils.setTimeout(t,4)}}function s(e,t){D.utils.registerEventHandler(n,e,t)}var a,l,c=n.value,u=9==D.utils.ieVersion?t:o,d=function(){var e=D.utils.unwrapObservable(i());null!==e&&e!==ew||(e=""),l===ew||e!==l?n.value!==e&&(c=e,n.value=e):D.utils.setTimeout(d,4)};D.bindingHandlers.textInput._forceUpdateOn?D.utils.arrayForEach(D.bindingHandlers.textInput._forceUpdateOn,function(e){"after"==e.slice(0,5)?s(e.slice(5),t):s(e,o)}):D.utils.ieVersion<10?(s("propertychange",function(e){"value"===e.propertyName&&u(e)}),8==D.utils.ieVersion&&(s("keyup",o),s("keydown",o)),8<=D.utils.ieVersion&&(v(n,u),s("dragend",t))):(s("input",o),h<5&&"textarea"===D.utils.tagNameLower(n)?(s("keydown",t),s("paste",t),s("cut",t)):p<11?s("keydown",t):f<4&&(s("DOMAutoComplete",o),s("dragdrop",o),s("drop",o))),s("change",o),D.computed(d,null,{disposeWhenNodeIsRemoved:n})}},D.expressionRewriting.twoWayBindings.textInput=!0,D.bindingHandlers.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),D.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++D.bindingHandlers.uniqueName.currentIndex;D.utils.setElementName(e,n)}}},D.bindingHandlers.uniqueName.currentIndex=0,D.bindingHandlers.value={after:["options","foreach"],init:function(r,o,s){if("input"!=r.tagName.toLowerCase()||"checkbox"!=r.type&&"radio"!=r.type){var e=["change"],t=s.get("valueUpdate"),n=!1,a=null;function i(){a=null,n=!1;var e=o(),t=D.selectExtensions.readValue(r);D.expressionRewriting.writeValueToProperty(e,s,"value",t)}t&&("string"==typeof t&&(t=[t]),D.utils.arrayPushAll(e,t),e=D.utils.arrayGetDistinctValues(e)),!D.utils.ieVersion||"input"!=r.tagName.toLowerCase()||"text"!=r.type||"off"==r.autocomplete||r.form&&"off"==r.form.autocomplete||-1!=D.utils.arrayIndexOf(e,"propertychange")||(D.utils.registerEventHandler(r,"propertychange",function(){n=!0}),D.utils.registerEventHandler(r,"focus",function(){n=!1}),D.utils.registerEventHandler(r,"blur",function(){n&&i()})),D.utils.arrayForEach(e,function(e){var t=i;D.utils.stringStartsWith(e,"after")&&(t=function(){a=D.selectExtensions.readValue(r),D.utils.setTimeout(i,0)},e=e.substring("after".length)),D.utils.registerEventHandler(r,e,t)});var l=function(){var e=D.utils.unwrapObservable(o()),t=D.selectExtensions.readValue(r);if(null===a||e!==a){if(e!==t)if("select"===D.utils.tagNameLower(r)){function n(){D.selectExtensions.writeValue(r,e,i)}var i=s.get("valueAllowUnset");n(),i||e===D.selectExtensions.readValue(r)?D.utils.setTimeout(n,0):D.dependencyDetection.ignore(D.utils.triggerEvent,null,[r,"change"])}else D.selectExtensions.writeValue(r,e)}else D.utils.setTimeout(l,0)};D.computed(l,null,{disposeWhenNodeIsRemoved:r})}else D.applyBindingAccessorsToNode(r,{checkedValue:o})},update:function(){}},D.expressionRewriting.twoWayBindings.value=!0,D.bindingHandlers.visible={update:function(e,t){var n=D.utils.unwrapObservable(t()),i=!("none"==e.style.display);n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},xe="click",D.bindingHandlers[xe]={init:function(e,t,n,i,r){return D.bindingHandlers.event.init.call(this,e,function(){var e={};return e[xe]=t(),e},n,i,r)}},D.templateEngine=function(){},D.templateEngine.prototype.renderTemplateSource=function(e,t,n,i){throw new Error("Override renderTemplateSource")},D.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},D.templateEngine.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var n=(t=t||gw).getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new D.templateSources.domElement(n)}if(1==e.nodeType||8==e.nodeType)return new D.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},D.templateEngine.prototype.renderTemplate=function(e,t,n,i){var r=this.makeTemplateSource(e,i);return this.renderTemplateSource(r,t,n,i)},D.templateEngine.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},D.templateEngine.prototype.rewriteTemplate=function(e,t,n){var i=this.makeTemplateSource(e,n),r=t(i.text());i.text(r),i.data("isRewritten",!0)},D.exportSymbol("templateEngine",D.templateEngine),D.templateRewriting=(we=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,Se=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g,{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return D.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,t){return e.replace(we,function(){return De(arguments[4],arguments[1],arguments[2],t)}).replace(Se,function(){return De(arguments[1],"\x3c!-- ko --\x3e","#comment",t)})},applyMemoizedBindingsToNextSibling:function(i,r){return D.memoization.memoize(function(e,t){var n=e.nextSibling;n&&n.nodeName.toLowerCase()===r&&D.applyBindingAccessorsToNode(n,i,t)})}}),D.exportSymbol("__tr_ambtns",D.templateRewriting.applyMemoizedBindingsToNextSibling),function(){D.templateSources={},D.templateSources.domElement=function(e){if(this.domElement=e){var t=D.utils.tagNameLower(e);this.templateType="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},D.templateSources.domElement.prototype.text=function(){var e=1===this.templateType?"text":2===this.templateType?"value":"innerHTML";if(0==arguments.length)return this.domElement[e];var t=arguments[0];"innerHTML"==e?D.utils.setHtml(this.domElement,t):this.domElement[e]=t};var t=D.utils.domData.nextKey()+"_";D.templateSources.domElement.prototype.data=function(e){if(1===arguments.length)return D.utils.domData.get(this.domElement,t+e);D.utils.domData.set(this.domElement,t+e,arguments[1])};var n=D.utils.domData.nextKey();function i(e){return D.utils.domData.get(e,n)||{}}function r(e,t){D.utils.domData.set(e,n,t)}D.templateSources.domElement.prototype.nodes=function(){var e=this.domElement;if(0==arguments.length)return i(e).containerData||(3===this.templateType?e.content:4===this.templateType?e:ew);r(e,{containerData:arguments[0]})},D.templateSources.anonymousTemplate=function(e){this.domElement=e},D.templateSources.anonymousTemplate.prototype=new D.templateSources.domElement,D.templateSources.anonymousTemplate.prototype.constructor=D.templateSources.anonymousTemplate,D.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var e=i(this.domElement);return e.textData===ew&&e.containerData&&(e.textData=e.containerData.innerHTML),e.textData}var t=arguments[0];r(this.domElement,{textData:t})},D.exportSymbol("templateSources",D.templateSources),D.exportSymbol("templateSources.domElement",D.templateSources.domElement),D.exportSymbol("templateSources.anonymousTemplate",D.templateSources.anonymousTemplate)}(),function(){var c;function i(e,t,n){for(var i,r=e,o=D.virtualElements.nextSibling(t);r&&(i=r)!==o;)n(i,r=D.virtualElements.nextSibling(i))}function u(e,t){if(e.length){var r=e[0],o=e[e.length-1],n=r.parentNode,s=D.bindingProvider.instance,a=s.preprocessNode;if(a){if(i(r,o,function(e,t){var n=e.previousSibling,i=a.call(s,e);i&&(e===r&&(r=i[0]||t),e===o&&(o=i[i.length-1]||n))}),e.length=0,!r)return;r===o?e.push(r):(e.push(r,o),D.utils.fixUpContinuousNodeArray(e,n))}i(r,o,function(e){1!==e.nodeType&&8!==e.nodeType||D.applyBindings(t,e)}),i(r,o,function(e){1!==e.nodeType&&8!==e.nodeType||D.memoization.unmemoizeDomNodeAndDescendants(e,[t])}),D.utils.fixUpContinuousNodeArray(e,n)}}function d(e){return e.nodeType?e:0<e.length?e[0]:null}function p(e,t,n,i,r){r=r||{};var o=(e&&d(e)||n||{}).ownerDocument,s=r.templateEngine||c;D.templateRewriting.ensureTemplateIsRewritten(n,s,o);var a=s.renderTemplate(n,i,r,o);if("number"!=typeof a.length||0<a.length&&"number"!=typeof a[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var l=!1;switch(t){case"replaceChildren":D.virtualElements.setDomNodeChildren(e,a),l=!0;break;case"replaceNode":D.utils.replaceDomNodes(e,a),l=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+t)}return l&&(u(a,i),r.afterRender&&D.dependencyDetection.ignore(r.afterRender,null,[a,i.$data])),a}function h(e,t,n){return D.isObservable(e)?e():"function"==typeof e?e(t,n):e}D.setTemplateEngine=function(e){if(e!=ew&&!(e instanceof D.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");c=e},D.renderTemplate=function(i,r,o,s,a){if(((o=o||{}).templateEngine||c)==ew)throw new Error("Set a template engine before calling renderTemplate");if(a=a||"replaceChildren",s){var l=d(s),e=l&&"replaceNode"==a?l.parentNode:l;return D.dependentObservable(function(){var e=r&&r instanceof D.bindingContext?r:new D.bindingContext(r,null,null,null,{exportDependencies:!0}),t=h(i,e.$data,e),n=p(s,a,t,e,o);"replaceNode"==a&&(l=d(s=n))},null,{disposeWhen:function(){return!l||!D.utils.domNodeIsAttachedToDocument(l)},disposeWhenNodeIsRemoved:e})}return D.memoization.memoize(function(e){D.renderTemplate(i,r,o,e,"replaceNode")})},D.renderTemplateForEach=function(n,i,r,o,s){function a(e,t){return c=s.createChildContext(e,r.as,function(e){e.$index=t}),p(null,"ignoreTargetNode",h(n,e,c),c,r)}function l(e,t,n){u(t,c),r.afterRender&&r.afterRender(t,e),c=null}var c;return D.dependentObservable(function(){var e=D.utils.unwrapObservable(i)||[];void 0===e.length&&(e=[e]);var t=D.utils.arrayFilter(e,function(e){return r.includeDestroyed||e===ew||null===e||!D.utils.unwrapObservable(e._destroy)});D.dependencyDetection.ignore(D.utils.setDomNodeChildrenFromArrayMapping,null,[o,t,a,r,l])},null,{disposeWhenNodeIsRemoved:o})};var f=D.utils.domData.nextKey();D.bindingHandlers.template={init:function(e,t){var n=D.utils.unwrapObservable(t());if("string"==typeof n||n.name)D.virtualElements.emptyNode(e);else if("nodes"in n){var i=n.nodes||[];if(D.isObservable(i))throw new Error('The "nodes" option must be a plain, non-observable array.');var r=D.utils.moveCleanedNodesToContainerElement(i);new D.templateSources.anonymousTemplate(e).nodes(r)}else{var o=D.virtualElements.childNodes(e);r=D.utils.moveCleanedNodesToContainerElement(o),new D.templateSources.anonymousTemplate(e).nodes(r)}return{controlsDescendantBindings:!0}},update:function(e,t,n,i,r){var o,s=t(),a=D.utils.unwrapObservable(s),l=!0,c=null;if("string"==typeof a?(o=s,a={}):(o=a.name,"if"in a&&(l=D.utils.unwrapObservable(a.if)),l&&"ifnot"in a&&(l=!D.utils.unwrapObservable(a.ifnot))),"foreach"in a){var u=l&&a.foreach||[];c=D.renderTemplateForEach(o||e,u,a,e,r)}else if(l){var d="data"in a?r.createStaticChildContext(a.data,a.as):r;c=D.renderTemplate(o||e,d,a,e)}else D.virtualElements.emptyNode(e);!function(e,t){var n=D.utils.domData.get(e,f);n&&"function"==typeof n.dispose&&n.dispose(),D.utils.domData.set(e,f,t&&t.isActive()?t:ew)}(e,c)}},D.expressionRewriting.bindingRewriteValidators.template=function(e){var t=D.expressionRewriting.parseObjectLiteral(e);return 1==t.length&&t[0].unknown?null:D.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},D.virtualElements.allowedBindings.template=!0}(),D.exportSymbol("setTemplateEngine",D.setTemplateEngine),D.exportSymbol("renderTemplate",D.renderTemplate),D.utils.findMovesInArrayComparison=function(e,t,n){var i,r,o,s,a;if(e.length&&t.length)for(i=r=0;(!n||i<n)&&(s=e[r]);++r){for(o=0;a=t[o];++o)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(o,1),i=o=0;break}i+=o}},D.utils.compareArrays=(ke="deleted",function(e,t,n){return n="boolean"==typeof n?{dontLimitMoves:n}:n||{},(e=e||[]).length<(t=t||[]).length?Be(e,t,"added",ke,n):Be(t,e,ke,"added",n)}),D.exportSymbol("utils.compareArrays",D.utils.compareArrays),Ee=D.utils.domData.nextKey(),Ce=D.utils.domData.nextKey(),D.utils.setDomNodeChildrenFromArrayMapping=function(n,e,t,i,r){e=e||[],i=i||{};var o,s=D.utils.domData.get(n,Ee)===ew,a=D.utils.domData.get(n,Ee)||[],l=D.utils.arrayMap(a,function(e){return e.arrayEntry}),c=D.utils.compareArrays(l,e,i.dontLimitMoves),u=[],d=0,p=0,h=[],f=[],v=[],g=[],m=[];function b(e,t){o=a[t],p!==t&&(g[e]=o),o.indexObservable(p++),D.utils.fixUpContinuousNodeArray(o.mappedNodes,n),u.push(o),f.push(o)}function y(t,n){if(t)for(var i=0,e=n.length;i<e;i++)n[i]&&D.utils.arrayForEach(n[i].mappedNodes,function(e){t(e,i,n[i].arrayEntry)})}for(var x,w,S=0;x=c[S];S++)switch(w=x.moved,x.status){case"deleted":w===ew&&((o=a[d]).dependentObservable&&(o.dependentObservable.dispose(),o.dependentObservable=ew),D.utils.fixUpContinuousNodeArray(o.mappedNodes,n).length&&(i.beforeRemove&&(u.push(o),f.push(o),o.arrayEntry===Ce?o=null:v[S]=o),o&&h.push.apply(h,o.mappedNodes))),d++;break;case"retained":b(S,d++);break;case"added":w!==ew?b(S,w):(o={arrayEntry:x.value,indexObservable:D.observable(p++)},u.push(o),f.push(o),s||(m[S]=o))}D.utils.domData.set(n,Ee,u),y(i.beforeMove,g),D.utils.arrayForEach(h,i.beforeRemove?D.cleanNode:D.removeNode),S=0;for(var k,E,C=D.virtualElements.firstChild(n);o=f[S];S++){o.mappedNodes||D.utils.extend(o,Ae(n,t,o.arrayEntry,r,o.indexObservable));for(var T=0;E=o.mappedNodes[T];C=E.nextSibling,k=E,T++)E!==C&&D.virtualElements.insertAfter(n,E,k);!o.initialized&&r&&(r(o.arrayEntry,o.mappedNodes,o.indexObservable),o.initialized=!0)}for(y(i.beforeRemove,v),S=0;S<v.length;++S)v[S]&&(v[S].arrayEntry=Ce);y(i.afterMove,g),y(i.afterAdd,m)},D.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",D.utils.setDomNodeChildrenFromArrayMapping),D.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},D.nativeTemplateEngine.prototype=new D.templateEngine,D.nativeTemplateEngine.prototype.constructor=D.nativeTemplateEngine,D.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n,i){var r=D.utils.ieVersion<9||!e.nodes?null:e.nodes();if(r)return D.utils.makeArray(r.cloneNode(!0).childNodes);var o=e.text();return D.utils.parseHtmlFragment(o,i)},D.nativeTemplateEngine.instance=new D.nativeTemplateEngine,D.setTemplateEngine(D.nativeTemplateEngine.instance),D.exportSymbol("nativeTemplateEngine",D.nativeTemplateEngine),function(){D.jqueryTmplTemplateEngine=function(){var a=this.jQueryTmplVersion=function(){if(!iw||!iw.tmpl)return 0;try{if(0<=iw.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(e,t,n,i){i=i||gw,n=n||{},function(){if(a<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}();var r=e.data("precompiled");if(!r){var o=e.text()||"";o="{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}",r=iw.template(null,o),e.data("precompiled",r)}var s=function(e,t,n){return iw.tmpl(e,t,n)}(r,[t.$data],iw.extend({koBindingContext:t},n.templateOptions));return s.appendTo(i.createElement("div")),iw.fragments={},s},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){gw.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<a&&(iw.tmpl.tag.ko_code={open:"__.push($1 || '');"},iw.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},D.jqueryTmplTemplateEngine.prototype=new D.templateEngine,D.jqueryTmplTemplateEngine.prototype.constructor=D.jqueryTmplTemplateEngine;var e=new D.jqueryTmplTemplateEngine;0<e.jQueryTmplVersion&&D.setTemplateEngine(e),D.exportSymbol("jqueryTmplTemplateEngine",D.jqueryTmplTemplateEngine)}()},"function"==typeof define&&define.amd?define(["exports","require"],kw):kw("object"==typeof cw&&"object"==typeof bw?bw.exports||cw:fw.ko={})}()},{}],12:[function(e,t,n){var i,r,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],d=!1,p=-1;function h(){d&&c&&(d=!1,c.length?u=c.concat(u):p=-1,u.length&&f())}function f(){if(!d){var e=l(h);d=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,d=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new v(e,t)),1!==u.length||d||l(f)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],13:[function(e,t,n){t.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),t=i.toString()}return t}},{}],14:[function(e,t,n){t.exports=function(){"use strict";var o={};function r(e){return"0"<=e&&e<="9"}function s(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"}return o.invalidToken={string:"",cat:0},o.Parser=function(e,t,n,i){this.buffer=e,this.begin=t,(this.state=n).error="",n.position=0,this.symbolTable=i},o.Parser.prototype.markError=function(e,t){this.state.error=e,this.state.position=t},o.Parser.prototype.empty=function(){return this.begin>=this.buffer.length},o.Parser.prototype.skipSpace=function(){for(var e=this.begin,t=this.buffer.length;e<t;){var n=this.peekChar();if(" "!==n&&"\n"!==n&&"\r"!==n&&"\t"!==n){if(!("/"===n&&e+1<t&&"/"===this.buffer[e+1]))break;for(this.readChar(),this.readChar();"\n"!==(n=this.readChar())&&!this.empty(););}else this.readChar()}},o.Parser.prototype.peekChar=function(){return this.buffer[this.begin]},o.Parser.prototype.readChar=function(){var e="";return this.begin<this.buffer.length&&(e=this.buffer[this.begin],this.begin+=1),e},o.Parser.prototype.scanNumberToken=function(e){for(var t=e?"-":"",n="";t+=this.readChar(),r(n=this.peekChar())||"."===n;);return{string:t,category:4}},o.Parser.prototype.scanSymbolToken=function(e){var t=e?"-":"",n=5;do{t+=this.readChar();var i=this.peekChar()}while(r(i)||s(i));if(":"===i){if(e)return this.markError("Invalid negated name",this.begin),o.invalidToken;n=6,this.readChar()}return{string:t,category:n}},o.Parser.prototype.scanStringToken=function(){this.readChar();for(var e="",t=this.begin,n=this.readChar();"'"!==n&&!this.empty();)n=("\\"!==n?e+=n:"n"===(n=this.readChar())?e+="\n":"'"===n?e+="'":'"'===n?e+='"':"\\"===n?e+="\\":"u"===n||this.markError("Invalid string escape",this.begin),this.readChar());return"'"!==n&&this.markError("Invalid string",t),{string:e,category:3}},o.Parser.prototype.readToken=function(){this.skipSpace();var e=this.peekChar(),t=!1;return"("===e?{string:this.readChar(),category:1}:")"===e?{string:this.readChar(),category:2}:"'"===e?this.scanStringToken():("-"===e&&(t=!0,this.readChar(),e=this.peekChar()),r(e)?this.scanNumberToken(t):s(e)?this.scanSymbolToken(t):o.invalidToken)},o.Parser.prototype.tokenToObject=function(e){var t=e.string;return 4===e.category?t.includes(".")?parseFloat(t,10):parseInt(t,10):3===e.category?t:5===e.category?"true"===t||"false"!==t&&("null"===t?null:"nan"===t?Number.NaN:"inf"===t?Number.POSITIVE_INFINITY:"-inf"===t?Number.NEGATIVE_INFINITY:this.lookupSymbol(t)):0===e.category?(this.markError("Invalid token",this.begin),null):void this.markError("Invalid token category :"+e.category,this.begin)},o.Parser.prototype.lookupSymbol=function(e){var t=void 0;if(Array.isArray(this.symbolTable))for(var n=0;n<this.symbolTable.length&&void 0===(t=this.symbolTable[n][e]);n++);else{if("function"==typeof this.symbolTable)return this.symbolTable(e);t=this.symbolTable[e]}return t},o.Parser.prototype.parseObject=function(e){var t=null,n=[],i=0;if(1===e.category){var r=[];for(e=this.readToken();2!==e.category&&!this.empty();){if(6===e.category&&(n[i]=e.string,e=this.readToken()),6===e.category)return this.markError("Invalid token",this.begin),null;r.push(this.parseObject(e)),e=this.readToken(),i+=1}if(0<n.length){for(var o={},s=r.length,a=0;a<s;a++){var l=n[a];void 0===l&&(l="_"+a),o[l]=r[a]}t=o}else t=r;if(2!==e.category)return this.markError("Invalid expression",this.begin),null}else t=this.tokenToObject(e);return t},o.parse=function(e,t,n){null==t&&(t={}),void 0!==n&&null!==t||(n={});var i="",r=(i=Array.from?new o.Parser(Array.from(e),0,t,n):new o.Parser(e.split(""),0,t,n)).readToken();return i.parseObject(r)},o}()},{}],15:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function r(){i.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,s=i.length;o<s;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},t.exports=i},{}],16:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],17:[function(T,e,D){(function(i,r){var a=/%[sdj%]/g;D.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,r=i.length,o=String(e).replace(a,function(e){if("%%"===e)return"%";if(r<=n)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),s=i[n];n<r;s=i[++n])m(s)||!u(s)?o+=" "+s:o+=" "+l(s);return o},D.deprecate=function(e,t){if(x(r.process))return function(){return D.deprecate(e,t).apply(this,arguments)};if(!0===i.noDeprecation)return e;var n=!1;return function(){if(!n){if(i.throwDeprecation)throw new Error(t);i.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,o={};function l(e,t){var n={seen:[],stylize:c};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&D._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),p(n,e,n.depth)}function s(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function c(e,t){return e}function p(t,n,i){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==D.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(i,t);return y(e)||(e=p(t,e,i)),e}var r=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(t,n);if(r)return r;var o=Object.keys(n),s=function(e){var n={};return e.forEach(function(e,t){n[e]=!0}),n}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),k(n)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return h(n);if(0===o.length){if(E(n)){var a=n.name?": "+n.name:"";return t.stylize("[Function"+a+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(k(n))return h(n)}var l,c="",u=!1,d=["{","}"];v(n)&&(u=!0,d=["[","]"]),E(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(c=" "+RegExp.prototype.toString.call(n)),S(n)&&(c=" "+Date.prototype.toUTCString.call(n)),k(n)&&(c=" "+h(n)),0!==o.length||u&&0!=n.length?i<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=u?function(t,n,i,r,e){for(var o=[],s=0,a=n.length;s<a;++s)C(n,String(s))?o.push(f(t,n,i,r,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(f(t,n,i,r,e,!0))}),o}(t,n,i,s,o):o.map(function(e){return f(t,n,i,s,e,u)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,c,d)):d[0]+c+d[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,i,r,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),C(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(l.value)<0?-1<(a=m(n)?p(e,l.value,null):p(e,l.value,n-1)).indexOf("\n")&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return a;s=(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(s,"string"))}return s+": "+a}function v(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function b(e){return"number"==typeof e}function y(e){return"string"==typeof e}function x(e){return void 0===e}function w(e){return u(e)&&"[object RegExp]"===t(e)}function u(e){return"object"==typeof e&&null!==e}function S(e){return u(e)&&"[object Date]"===t(e)}function k(e){return u(e)&&("[object Error]"===t(e)||e instanceof Error)}function E(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}D.debuglog=function(t){if(x(e)&&(e=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=i.pid;o[t]=function(){var e=D.format.apply(D,arguments);console.error("%s %d: %s",t,n,e)}}else o[t]=function(){};return o[t]},(D.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},D.isArray=v,D.isBoolean=g,D.isNull=m,D.isNullOrUndefined=function(e){return null==e},D.isNumber=b,D.isString=y,D.isSymbol=function(e){return"symbol"==typeof e},D.isUndefined=x,D.isRegExp=w,D.isObject=u,D.isDate=S,D.isError=k,D.isFunction=E,D.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},D.isBuffer=T("./support/isBuffer");var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}D.log=function(){console.log("%s - %s",function(){var e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":");return[e.getDate(),d[e.getMonth()],t].join(" ")}(),D.format.apply(D,arguments))},D.inherits=T("inherits"),D._extend=function(e,t){if(!t||!u(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,T("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":16,_process:12,inherits:9}],18:[function(g,e,t){"use strict";e.exports=function(){var h=g("log.js"),f=g("fastr.js"),v={};v.buildFlags=g("../buildFlags.js");var e={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};return h.trace("TBlocks starting.",(new Date).toLocaleDateString("en-US",e)),v.hideCookieSheet=function(){document.getElementById("cookieSheet").innerHTML="",v.storage.setItem("cookiesAccepted",!0)},v.pause=function(){h.trace("TBlocks pause.",(new Date).toLocaleDateString("en-US",e)),v.overlays.pauseResume(!0)},v.resume=function(){h.trace("TBlocks resuming.",(new Date).toLocaleDateString("en-US",e)),v.overlays.pauseResume(!1)},v.start=function(){void 0!==window.cordova?v.platformId="iOS":v.platformId="desktop broswer";var e=v.isCordovaApp;h.trace("isApp: ",v.isCordovaApp),h.trace("platform: ",v.platformId),document.addEventListener("pause",v.pause,!1),document.addEventListener("resume",v.resume,!1);var t=g("knockout"),n=g("clipboard");v.tbe=g("./teakblocks.js"),v.conductor=g("./conductor.js"),v.dots=g("./overlays/actionDots.js"),v.defaultFiles=g("./defaultFiles.js"),v.teaktext=g("./teaktext.js");var i=v.tbe;v.overlays=g("./overlays/overlays.js").init(),v.fileManager=v.overlays.screens.fileOverlay,v.storage=v.fileManager.localStorage(),window.MobileAccessibility&&window.MobileAccessibility.usePreferredTextZoom(!1),i.components={},i.components.blockSettings=g("./block-settings.js"),t.applyBindings(i.components);var r=document.getElementById("tbe-forms");i.components.blockSettings.insert(r);var o=document.getElementById("cookieSheet"),s=v.storage.getItem("cookiesAccepted");e||null!==s&&!1!==s||(o.innerHTML="\n        <div id='cookiesGlass'></dev>\n        <div id='cookiesForm'>\n            <div id='cookiesNote'>\n              <input id='cookiesButton' type=\"button\" value=\"  Accept Cookies  \" style=\"float:right\">\n              <p>\n                  We use cookies and similar technologies for document\n                  stroage functionality and to measure performance of application features.\n                  You consent to our cookies if you continue to use our website.\n              </p>\n            </div>\n        </div>\n        ",document.getElementById("cookiesButton").onclick=v.hideCookieSheet);i.audio={shortClick:document.getElementById("short-click"),poof:document.getElementById("poof"),playSound:function(e){e.play()}},i.audio.shortClick.preload="true",i.audio.poof.preload="true";var a=[{label:"A",command:"loadDocA"},{label:"B",command:"loadDocB"},{label:"C",command:"loadDocC"},{label:"D",command:"loadDocD"},{label:"E",command:"loadDocE"}],l=[{label:f.copy,command:"copy"},{label:f.paste,command:"paste"},{label:f.trash,command:"trash"},{label:f.settings,command:"splashOverlay"}];i.deleteRay=null,i.commands={play:function(){v.conductor.playAll()},stop:function(){v.conductor.stopAll()},trash:function(){i.clearAllBlocks()},pages:function(){i.clearStates(),i.dropdownButtons=v.dots.showDropdown(a,i,f.folder,"pages")},edit:function(){i.clearStates(),i.dropdownButtons=v.dots.showDropdown(l,i,f.edit,"edit")},loadDocA:function(){i.loadDoc("docA")},loadDocB:function(){i.loadDoc("docB")},loadDocC:function(){i.loadDoc("docC")},loadDocD:function(){i.loadDoc("docD")},loadDocE:function(){i.loadDoc("docE")},docSnapShot:function(){v.overlays.fileOverlay.cameraFlash()},driveOverlay:"driveOverlay",debugOverlay:"debugOverlay",splashOverlay:"splashOverlay",deviceScanOverlay:"deviceScanOverlay",settings:function(){i.loadSettings()},copy:function(){i.copyText=v.teaktext.blocksToText(i.forEachDiagramChain)},paste:function(){null!==i.copyTest&&v.teaktext.textToBlocks(i,i.copyText)},save:function(){var e=v.teaktext.blocksToText(i.forEachDiagramChain);v.storage.setItem(i.currentDoc,e)}};var c=new n(".copy-button",{text:function(){return v.teaktext.blocksToText(i.forEachDiagramChain)}});c.on("success",function(e){h.trace("clipboard success",e)}),c.on("error",function(e){h.trace("clipboard error",e)});var u=[{alignment:"L",label:f.play,command:"play",tweakx:4},{alignment:"L",label:f.stop,command:"stop"},{alignment:"L",label:f.gamepad,command:"driveOverlay"},{alignment:"M",label:f.debug,command:"debugOverlay"},{alignment:"M",label:f.file,command:"pages",sub:a},{alignment:"M",label:f.edit,command:"edit",sub:l},{alignment:"R",label:"",command:"deviceScanOverlay"}],d=v.dots.defineButtons(u,document.getElementById("editorSvgCanvas"));v.defaultFiles.setupDefaultPages(!1),i.init(document.getElementById("editorSvgCanvas"),d);var p=v.storage.getItem("docA");null!==p&&v.teaktext.textToBlocks(i,p),i.addPalette({blocks:[{name:"identity",group:"start"},{name:"identityAccelerometer",group:"start"},{name:"identityButton",group:"start"},{name:"identityTemperature",group:"start"},{name:"picture",group:"fx"},{name:"sound",group:"fx"},{name:"motor",group:"fx"},{name:"twoMotor",group:"fx"},{name:"variableSet",group:"fx"},{name:"print",group:"fx"},{name:"wait",group:"control"},{name:"loop",group:"control"}]}),document.body.onresize=i.resize,i.resize(),v.conductor.attachToScoreEditor(i);v.isRegularBrowser},v.doCommand=function(e){v.tbe.saveCurrentDoc();var t=v.tbe.commands[e];v.overlays.isAnimating||(null!==v.overlays.currentShowing?v.overlays.currentShowing===t?(v.dots.activate(e,0),v.overlays.hideOverlay(null)):("string"==typeof t&&v.dots.activate(e,3),v.overlays.hideOverlay(function(){v.doCommand(e)})):"function"==typeof t?t():"string"==typeof t&&(v.dots.activate(t,3),v.overlays.showOverlay(t)))},v}()},{"../buildFlags.js":1,"./block-settings.js":19,"./conductor.js":38,"./defaultFiles.js":40,"./overlays/actionDots.js":43,"./overlays/overlays.js":48,"./teakblocks.js":50,"./teaktext.js":52,clipboard:4,"fastr.js":55,knockout:11,"log.js":57}],19:[function(e,t,n){"use strict";var i,c,r,o,u;t.exports=(i=e("knockout"),c=e("./teakblocks.js"),r=e("./conductor.js"),o=0,u={visible:i.observable(!0),activeBlock:null,insert:function(e){u.commonDiv=document.createElement("div"),u.commonDiv.innerHTML='<div id="block-settings" class="block-config-form">\n      <div class="group-div">\n        <button class="block-run width-third">\n          <i class="fa fa-step-forward" aria-hidden="true"></i>\n        </button>\n        <button class="block-clone width-third">\n          <i class="fa fa-clone" aria-hidden="true"></i>\n        </button>\n        <button class="block-clear width-third">\n          <i class="fa fa-trash-o" aria-hidden="true"></i>\n        </button>\n      </div>\n      <div id="block-settings-custom"></div>\n      <div id="block-controller-tabs"></div>\n    </div>',u.commonDiv.style.width="240px",e.appendChild(u.commonDiv),u.groupDiv=document.createElement("div"),u.groupDiv.innerHTML='<div id="block-settings" class="block-config-form">\n      <div class="group-div">\n        <button class="block-run width-third">\n          <i class="fa fa-step-forward" aria-hidden="true"></i>\n        </button>\n        <button class="block-clone width-third">\n          <i class="fa fa-clone" aria-hidden="true"></i>\n        </button>\n        <button class="block-clear width-third">\n          <i class="fa fa-trash-o" aria-hidden="true"></i>\n        </button>\n      </div>\n    </div>',u.groupDiv.style.width="240px",e.appendChild(u.groupDiv);for(var t=0;t<2;t++)document.getElementsByClassName("block-run")[t].onclick=function(){r.playOne(u.activeBlock)},document.getElementsByClassName("block-clone")[t].onclick=u.cloneGroup,document.getElementsByClassName("block-clear")[t].onclick=u.deleteGroup;u.customDiv=document.getElementById("block-settings-custom"),u.controllersDiv=document.getElementById("block-controller-tabs")},cloneGroup:function(){if(null!==u.activeBlock){var e=c.findChunkStart(u.activeBlock);e.isLoopTail()&&(e=e.flowHead);var t=e;t.isLoopHead()&&(t=t.flowTail),e.isGroupSelected()&&(t=e.selectionEnd());var n=c.replicateChunk(e,t,0,0),i=0;0===o?o=i=-120:o<0?o=i=-40+o:0<o&&(o=i=40+o),n.top<-i?o=i=120:n.bottom>c.height-o-80&&(o=i=120),c.animateMove(n,n.last,0,i,20)}},deleteGroup:function(){if(null!==u.activeBlock){var e=c.findChunkStart(u.activeBlock);e.isLoopTail()&&(e=e.flowHead),e.isLoopHead()&&e.next===e.flowTail?c.deleteChunk(e,e.next):e.isLoopHead()&&!e.next.isSelected()?(c.deleteChunk(e.flowTail,e.flowTail),c.deleteChunk(e,e)):e.isLoopHead()&&e.next.isSelected()?c.deleteChunk(e,e.flowTail):c.deleteChunk(e,e.selectionEnd())}},isOpen:function(){return null!==this.activeBlock},hide:function(e){var t=!1,n=this.activeBlock;if(null!==n&&n.isGroupSelected()&&(n.isIsolatedLoop()||(t=!0)),null!==n&&n!==e){void 0!==n.funcs.configuratorClose&&n.funcs.configuratorClose(this.customDiv,n);var i=this.activeBlock=null;(i=t?this.groupDiv:this.commonDiv).style.transition="all 0.2s ease",i.style.position="absolute",i.style.transform="scale(0.33, 0.0)",this.customDiv.innerHTML="",this.tabNames=[],this.tabButtons=[]}},tap:function(e){this.activeBlock===e?c.clearStates():null!==this.activeBlock?(c.clearStates(),"tail"===(this.activeBlock=e).name?(e.markSelected(!0),e.flowHead.markSelected(!0)):"loop"===e.name?(e.markSelected(!0),e.flowTail.markSelected(!0)):e.markSelected(!0),setTimeout(function(){u.showActive()},400)):("tail"===e.name?(e.markSelected(!0),e.flowHead.markSelected(!0)):"loop"===e.name?(e.markSelected(!0),e.flowTail.markSelected(!0)):e.markSelected(!0),this.activeBlock=e,this.showActive(null))},buildControllerTabs:function(){u.controllersDiv.innerHTML="";var e=this.activeBlock.funcs.tabs;if(this.tabButtons=[],void 0!==e){this.tabNames=Object.keys(e);for(var t=this.tabNames.length,n=document.createElement("div"),i=100/t+"%",r=0;r<t;r++){var o=document.createElement("button"),s=this.tabNames[r];u.tabButtons.push(o),n.appendChild(o),o.id=s,o.className="block-settings-tab",o.style.width=i,o.style.borderRadius=0===r?"0px 0px 0px 10px":r===t-1?"0px 0px 10px 0px":"0px",o.innerHTML=e[s],o.onclick=u.onClickTab}this.controllersDiv.appendChild(n),this.selectActiveTab(this.activeBlock.controllerSettings.controller)}else{var a=this.activeBlock.funcs.controllers;"function"==typeof a?a(u.controllersDiv):u.controllersDiv.innerHTML=""}},onClickTab:function(){u.selectActiveTab(this.id)},selectActiveTab:function(e){for(var t=this.tabNames.length,n=0;n<t;n++)this.tabNames[n]===e?this.tabButtons[n].classList.add("tab-selected"):this.tabButtons[n].classList.remove("tab-selected")},buildController:function(){var e=this.activeBlock.funcs.configuratorOpen;"function"==typeof e?e(u.customDiv,this.activeBlock):u.customDiv.innerHTML='<div>\n          <label><input type="checkbox">\n            <span class="label-text">Power</span>\n          </label>\n      </div>'},showActive:function(e){var t=!1,n=0,i=0,r=this.activeBlock;if(null!==r){null!==r&&r.isGroupSelected()&&(r.isIsolatedLoop()||(t=!0)),this.buildControllerTabs(),this.buildController();var o=r.left,s=r.bottom,a=null,l=(a=t?u.groupDiv:u.commonDiv).clientHeight;450<c.height?(o-80<0?n=85-o:o+160>c.width&&(n=c.width-(o+165)),s+l>c.height&&(i=-l-10-r.height)):(o=o+60<c.width/2?c.width-175:100,s=65),a.style.transition="all 0.0s ease",a.style.left=o-80+n+"px",a.style.right=o+80+n+"px",a.style.top=s+5+i+"px",setTimeout(function(){a.style.transition="all 0.2s ease",a.style.position="absolute",a.style.transform="scale(1.0, 1.0)"},10)}}})},{"./conductor.js":38,"./teakblocks.js":50,knockout:11}],20:[function(e,t,n){"use strict";var x,w,S,l,c,u,s;t.exports=(x=e("svgbuilder.js"),w=e("interact.js"),S=e("knockout"),l=e("icons.js"),u={assign:":=",increment:"+=",decrement:"-=",scale:"*=",divscale:"/=",add:"+",subtract:"-",divide:"/",multiply:"*",rshift:">>",lshift:"<<",mod:"%",greater:">","greater-equal":"≥",equal:"=","not-equal":"≠","less-equal":"≤",less:"<",and:"&",or:"|",xor:"⊕"},s={cat:"infixop",name:"decrement",flex:"assign|increment|decrement",args:[{cat:"variable",name:"A",flex:"variable"},{cat:"integer",name:"0",flex:"integer|variable"}]},(c={}).argExists=function(e,t){return void 0!==e.args&&void 0!==e.args[t]},c.calcExprPlacements=function(e,t){return c.argExists(e,0)&&(t=c.calcExprPlacements(e.args[0],t)),e.boxLeft=t,"variable"===e.cat?t+=70:"integer"===e.cat?t+=50:"boolean"===e.cat?t+=40:"infixop"===e.cat&&(t+=50),e.boxRight=t,c.argExists(e,1)&&(t=c.calcExprPlacements(e.args[1],t)),t},c.buildExprSvg=function(e,t,n,i){var r=null;c.argExists(e,0)&&c.buildExprSvg(e.args[0],t,n,i);var o=e.boxLeft,s=e.boxRight;if(console.log("rect bounds",e,o,n+6,s-o,i),e.boxObj=x.createRect("expr-region",o,n,s-o,i),e.boxObj.setAttribute("name",e.name),t.appendChild(e.boxObj),"variable"===e.cat)r=l.variable(.7,o+15,n+1,e.name),t.appendChild(r);else if("integer"===e.cat)(r=x.createText("svg-clear vars-bottom-txt",o+20,n+22,e.name)).setAttribute("text-anchor","middle"),t.appendChild(r);else if("boolean"===e.cat)(r=x.createText("svg-clear vars-bottom-txt",o+20,n+22,e.name)).setAttribute("text-anchor","middle"),t.appendChild(r);else if("infixop"===e.cat){var a=u[e.name];(r=x.createText("svg-clear vars-bottom-txt",o+20,n+22,a)).setAttribute("text-anchor","middle"),t.appendChild(r)}c.argExists(e,0)&&c.buildExprSvg(e.args[1],t,n,i)},c.clearSvg=function(e,t){},c.highlightExprSvg=function(e){},c.configKeyBoard=function(e,t){"variable"===e.cat?c.addVarKeypad(t):"integer"===e.cat?c.addNumberKeypad(t):"boolean"===e.cat?c.addVarKeypad(t):"infixop"===e.cat&&c.addVarKeypad(t)},c.open=function(e,t){c.activeBlock=t,e.innerHTML="<div id='pictureEditorDiv' class='editorDiv'>\n        <svg id='calcpadSvg' width=231px height=190px xmlns='http://www.w3.org/2000/svg'>\n        </svg>\n      </div>";var n=document.getElementById("calcpadSvg"),i=x.createGroup("",0,0),r=x.createRect("calc-shell",2,2,226,38,4),o=x.createRect("calc-keybase",2,41,226,145,4);i.appendChild(r),i.appendChild(o),n.appendChild(i),c.calcExprPlacements(s,30),c.exprGroup=x.createGroup("",0,0),c.buildExprSvg(s,c.exprGroup,4,34),n.appendChild(c.exprGroup),c.configKeyBoard(s,n),c.connectEvents(n)},c.connectEvents=function(e){w(".calc-button",{context:e}).on("tap",function(e){var t=e.target.getAttribute("name");console.log("calc-button ->",t)}),w(".expr-region",{context:e}).on("tap",function(e){var t=e.target.getAttribute("name");console.log("expr-region ->",t)})},c.addVarKeypad=function(e){for(var t=["7","8","9","+1","4","5","6","-1","1","2","3","+/-","0","0",".","C"],n=0,i=0;i<4;i++)for(var r=0;r<4;r++){var o=l.calcbutton(.8,6+56*r,42+36*i,53,34,t[n],"calc-numbers");e.appendChild(o),n+=1}},c.openTabs=function(e,t){var i=t.block,r=t.min,o=t.max,s=t.suffix,a=t.type,l=t.setValue,n=t.getValue,c=t.numArray,u=t.calcLayout;void 0===t.inner?e.innerHTML="<div id='keypadDiv' class='editorDiv'>\n                <div id=\"numeric-display\" class = \"numeric-display svg-clear\" width='80px' height='80px' data-bind='text: keyPadValue'>\n                </div>\n                <svg id=\"keypadSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n            </div>":e.innerHTML=t.inner,S.applyBindings(a,e);var d=document.getElementById("numeric-display"),p=document.getElementById("keypadSvg"),h=n().toString();a.keyPadValue(h.toString()+s);for(var f="",v=0;v<4;v++)for(var g=0;g<3;g++)if(void 0!==c[3*v+g]){var m=x.createGroup("dataButton",0,0),b=x.createRect("calcButtons",2.5+75*g,5+35*v,70,30,6),y=x.createText("svg-clear",37.5+75*g,27.5+35*v,c[3*v+g]);y.setAttribute("text-anchor","middle"),m.appendChild(b),m.appendChild(y),b.setAttribute("name",c[3*v+g]),p.appendChild(m)}w(".calcButtons",{context:p}).on("tap",function(e){if(f=e.target.getAttribute("name"),"simple"===u){var t="";d.classList.remove("error"),"+"!==f.substring(0,1)&&"-"!==f.substring(0,1)||(t=f.substring(0,1),f=f.substring(1)),"<-"!==f&&"C"!==f||(h="0"),"-"===t?parseInt(h,10)-parseInt(f,10)>=r?h=(parseInt(h,10)-parseInt(f,10)).toString():(h=r,d.classList.add("error")):"+"===t&&(parseInt(h,10)+parseInt(f,10)<=o?h=(parseInt(h,10)+parseInt(f,10)).toString():(h=o,d.classList.add("error")))}else if("complex"===u){var n="+/-"===f;"<-"===f||"C"===f?(h="0",d.classList.remove("error")):n&&"0"!==h?(d.classList.remove("error"),h="-"===h.substring(0,1)?h.substring(1):"-"+h):"0"!==h||n?parseInt(h+f,10)<=o&&parseInt(h+f,10)>=r&&!n?h+=f:n||d.classList.add("error"):(d.classList.remove("error"),h=f)}else"defined"===u&&(h=f);a.keyPadValue(h.toString()+s),l(h),i.updateSvg()})},c.openBeats=function(e){var t=e.getBeats,n=e.setBeats,i=e.type,r=e.block,o=e.beatsRay;void 0===o&&(o=["1","2","3","4","5","6","7","8","9"]);var s=document.getElementById("beatsSvg"),a=t().toString();"1"===a?i.beatsValue(a.toString()+" beat"):i.beatsValue(a.toString()+" beats");for(var l=0;l<4;l++)for(var c=0;c<3;c++)if(void 0!==o[3*l+c]){var u=x.createGroup("",0,0),d=x.createRect("beatsButtons",2.5+75*c,5+35*l,70,30,6),p=x.createText("svg-clear",37.5+75*c,27.5+35*l,o[3*l+c]);p.setAttribute("text-anchor","middle"),u.appendChild(d),u.appendChild(p),d.setAttribute("name",o[3*l+c]),s.appendChild(u)}w(".beatsButtons",{context:s}).on("tap",function(e){var t=e.target.getAttribute("name");"1"===(a=t)?i.beatsValue(a.toString()+" beat"):i.beatsValue(a.toString()+" beats"),n(a),r.updateSvg()})},c.openTabsWithBeats=function(e,t){t.inner="<div id='keypadDiv' class='editorDiv'>\n              <div id=\"numeric-display\" class = \"numeric-display-half svg-clear\" width='80px' height='80px' data-bind='text: keyPadValue'>\n\n              </div>\n              <div id=\"beats-display\" class = \"beats-display svg-clear\" width='80px' height='80px' data-bind='text: beatsValue'>\n\n              </div>\n              <svg id=\"keypadSvg\" class='area' width='225px' height='72px' xmlns='http://www.w3.org/2000/svg'></svg>\n              <svg id=\"beatsSvg\" class='area' width='225px' height='80px' xmlns='http://www.w3.org/2000/svg'></svg>\n          </div>",c.openTabs(e,t),t.beatsRay=["1","2","3","4","5","6"],c.openBeats(t)},c.close=function(e){S.cleanNode(e)},c)},{"icons.js":56,"interact.js":10,knockout:11,"svgbuilder.js":59}],21:[function(e,t,n){"use strict";t.exports={svg:function(e){return e}}},{}],22:[function(e,t,n){"use strict";var i,c,o,r,s,a;t.exports=(i=e("knockout"),c=e("svgbuilder.js"),o=e("fastr.js"),r=e("./keypadTab.js"),a={},(s={}).tabs={},s.keyPadValue=i.observable("0 times"),s.svg=function(e,t){var n=c.createText("fa fas svg-clear block-flowhead-loop",20,40,o.loop);e.appendChild(n);var i=t.controllerSettings.data.duration,r=c.createText("svg-clear block-flowhead-count block-stencil-fill",35,70,i);return r.setAttribute("text-anchor","middle"),e.appendChild(r),e},s.defaultSettings=function(){return{data:{duration:5},controller:"forLoop",width:50}},a.defaultSettings=s.defaultSettings,a.calculateEnclosedScopeDepth=function(e){for(var t=0,n=0,i=e.prev;null!==i&&i!==e.flowHead;)null!==i.flowHead?n<(t+=1)&&(n=t):null!==i.flowTail&&(t-=1),i=i.prev;return n},a.svg=function(){},a.crossBlockSvg=function(e){var t=e.svgCrossBlock;void 0!==t&&e.svgGroup.removeChild(t);var n=this.calculateEnclosedScopeDepth(e)+1,i=25-(e.left-e.flowHead.left),r=e.right-e.flowHead.left-50,o=8*n,s=4*n,a=c.pathBuilder,l="";l=a.move(i,0),l+=a.line(s,-o),l+=a.arc(8,60,0,1,7.2,-5.6),l+=a.hline(r-16-2*s),l+=a.arc(8,60,0,1,7.2,5.6),l+=a.line(s,o),t=c.createPath("flow-path svg-clear",l),e.svgGroup.insertBefore(t,e.svgRect),e.svgCrossBlock=t},s.configuratorOpen=function(e,t){r.openTabs(e,{getValue:function(){return t.controllerSettings.data.duration},setValue:function(e){t.controllerSettings.data.duration=e},type:s,block:t,min:1,max:100,suffix:" times",numArray:["+1","C","+10","-1",void 0,"-10"],calcLayout:"simple"})},s.configuratorClose=function(e){r.closeTabs(e)},a.configuratorOpen=function(e,t){s.configuratorOpen(e,t.flowHead)},a.configuratorClose=function(e){s.configuratorClose(e)},{flowBlockHead:s,flowBlockTail:a})},{"./keypadTab.js":28,"fastr.js":55,knockout:11,"svgbuilder.js":59}],23:[function(e,t,n){"use strict";var i,o,r,s;t.exports=(i=e("knockout"),o=e("./../keypadTab.js"),r=e("icons.js"),(s={}).keyPadValue=i.observable(0),s.defaultSettings=function(){return{data:{comparison:">",value:0}}},s.configuratorOpen=function(e,t){o.openTabs(e,{getValue:function(){return t.controllerSettings.data.value},setValue:function(e){t.controllerSettings.data.value=e},type:s,block:t,min:-100,max:100,suffix:"",numArray:["-10","C","+10","-50",void 0,"+50"],calcLayout:"simple",inner:'<div id=\'keypadDiv\' class=\'editorDiv\'>\n          <div class="dropdown-label-txt svg-clear">accel\n          </div>\n          <select class="dropdown-comparison" id="comparison-list">\n            <option value=">" id="idAccel-greater">></option>\n            <option value="<" id="idAccel-less"><</option>\n            <option value="=" id="idAccel-equals">=</option>\n          </select>\n          <div id="numeric-display" class = "numeric-display-third svg-clear" width=\'30px\' height=\'80px\' data-bind=\'text: keyPadValue\'>\n          </div>\n          <svg id="keypadSvg" class=\'area\' width=\'225px\' height=\'200px\' xmlns=\'http://www.w3.org/2000/svg\'></svg>\n      </div>'});for(var n=document.getElementById("comparison-list"),i=n.options,r=0;r<i.length;r++)if(i[r].value===t.controllerSettings.data.comparison){n.selectedIndex=r;break}},s.configuratorClose=function(e,t){var n=document.getElementById("comparison-list"),i=n.selectedIndex;t.controllerSettings.data.comparison=n.options[i].value,o.closeTabs(e)},s.svg=function(e){var t=r.accelerometer(1,"svg-clear block-stencil-fill",38,40);e.appendChild(t)},s)},{"./../keypadTab.js":28,"icons.js":56,knockout:11}],24:[function(e,t,n){"use strict";var i,r,o,s;t.exports=(i=e("knockout"),r=e("svgbuilder.js"),o=e("fastr.js"),s={defaultSettings:function(){return{data:{start:!0}}},configuratorOpen:function(e,t){s.activeBlock=t,e.innerHTML="<div class='group-div'>\n        <div class='svg-clear'>Play upon program run<div/>\n      </div>",i.applyBindings(s,e)},configuratorClose:function(e){s.activeBlock=null,i.cleanNode(e)},svg:function(e,t){var n=r.createText("fa fas svg-clear block-identity-text",40,55,o.play),i=r.createRect("svg-clear block-identity-text",10,35,40,10,5);e.appendChild(n),e.appendChild(i)}})},{"fastr.js":55,knockout:11,"svgbuilder.js":59}],25:[function(e,t,n){"use strict";var a,o;t.exports=(a=e("svgbuilder.js"),o={defaultSettings:function(){return{data:{button:"A"}}},configuratorOpen:function(e,t){o.activeBlock=t,e.innerHTML='<div class=\'editorDiv\'>\n          <div class="dropdown-label-txt svg-clear idButton-comparison-label">button:\n          </div>\n          <select class="dropdown-comparison idButton-comparison" id="dropdown-comparison">\n            <option value="A" id="idButton-A">A</option>\n            <option value="B" id="idButton-B">B</option>\n            <option value="A+B" id="idButton-AB">A+B</option>\n          </select>\n      </div>';for(var n=document.getElementById("dropdown-comparison"),i=n.options,r=0;r<i.length;r++)if(i[r].value===t.controllerSettings.data.button){n.selectedIndex=r;break}},configuratorClose:function(e,t){var n=document.getElementById("dropdown-comparison"),i=n.selectedIndex;t.controllerSettings.data.button=n.options[i].value,o.activeBlock=null,t.updateSvg()},svg:function(e,t){var n=a.createRect("svg-clear block-idButton-back",15,10,50,50,3);e.appendChild(n);var i=a.createCircle("svg-clear block-idButton-screw",23,18,4);e.appendChild(i),i=a.createCircle("svg-clear block-idButton-screw",57,18,4),e.appendChild(i),i=a.createCircle("svg-clear block-idButton-screw",57,52,4),e.appendChild(i),i=a.createCircle("svg-clear block-idButton-screw",23,52,4),e.appendChild(i);var r=a.createCircle("svg-clear block-idButton-button",40,35,18);e.appendChild(r);var o=t.controllerSettings.data.button,s=a.createText("svg-clear block-idButton-label",40,40,o);s.setAttribute("text-anchor","middle"),e.appendChild(s)}})},{"svgbuilder.js":59}],26:[function(e,t,n){"use strict";var a,i,o,l,s;t.exports=(a=e("svgbuilder.js"),i=e("knockout"),o=e("./../keypadTab.js"),l=a.pathBuilder,(s={}).keyPadValue=i.observable(0),s.defaultSettings=function(){return{data:{comparison:"=",value:0}}},s.configuratorOpen=function(e,t){o.openTabs(e,{getValue:function(){return t.controllerSettings.data.value},setValue:function(e){t.controllerSettings.data.value=e},type:s,block:t,min:-2048,max:2048,suffix:"",numArray:["-10","C","+10","-100",void 0,"+100"],calcLayout:"simple",inner:'<div id=\'keypadDiv\' class=\'editorDiv\'>\n          <div class="dropdown-label-txt svg-clear">gyro\n          </div>\n          <select class="dropdown-comparison" id="dropdown-comparison">\n            <option value="=" id="idGyro-equals">=</option>\n            <option value=">" id="idGyro-greater">></option>\n            <option value="<" id="idGyro-less"><</option>\n          </select>\n          <div id="numeric-display" class = "numeric-display-third svg-clear" width=\'30px\' height=\'80px\' data-bind=\'text: keyPadValue\'>\n          </div>\n          <svg id="keypadSvg" class=\'area\' width=\'225px\' height=\'200px\' xmlns=\'http://www.w3.org/2000/svg\'></svg>\n      </div>'});for(var n=document.getElementById("dropdown-comparison"),i=n.options,r=0;r<i.length;r++)if(i[r].value===t.controllerSettings.data.comparison){n.selectedIndex=r;break}},s.configuratorClose=function(e,t){var n=document.getElementById("dropdown-comparison"),i=n.selectedIndex;t.controllerSettings.data.comparison=n.options[i].value,o.closeTabs(e)},s.svg=function(e,t){var n="";n+=l.move(38,40),n+=l.vline(-30),n+=l.hline(2),n+=l.vline(30),n+=l.line(25,20),n+=l.line(-1,1.5),n+=l.line(-25,-20),n+=l.line(-25,20),n+=l.line(-1,-1.5),n+=l.line(25,-20);var i=a.createPath("svg-clear block-stencil-fill",n);e.appendChild(i);var r=a.createCircle("svg-clear block-stencil-fill",28,13,8);r.setAttribute("style","transform: rotate(20deg) scale(1, 1.5);"),e.appendChild(r);var o=a.createCircle("svg-clear block-stencil-fill",46,30,8);o.setAttribute("style","transform: rotate(-20deg) scale(1, 1.5);"),e.appendChild(o);var s=a.createCircle("svg-clear block-stencil-fill",65,-27,8);s.setAttribute("style","transform: rotate(90deg) scale(1, 1.5);"),e.appendChild(s)},s)},{"./../keypadTab.js":28,knockout:11,"svgbuilder.js":59}],27:[function(e,t,n){"use strict";var i,r,o,s,a;t.exports=(i=e("knockout"),r=e("svgbuilder.js"),o=e("fastr.js"),s=e("./../keypadTab.js"),(a={}).keyPadValue=i.observable(0),a.defaultSettings=function(){return{data:{comparison:">",value:80}}},a.configuratorOpen=function(e,t){s.openTabs(e,{getValue:function(){return t.controllerSettings.data.value},setValue:function(e){t.controllerSettings.data.value=e},type:a,block:t,min:20,max:120,suffix:"˚F",numArray:["-1","C","+1","-10",void 0,"+10"],calcLayout:"simple",inner:'<div id=\'keypadDiv\' class=\'editorDiv\'>\n          <div class="dropdown-label-txt svg-clear">temp\n          </div>\n          <select class="dropdown-comparison" id="dropdown-comparison">\n            <option value=">" id="idTemp-greater">></option>\n            <option value="<" id="idTemp-less"><</option>\n            <option value="=" id="idTemp-equals">=</option>\n          </select>\n          <div id="numeric-display" class = "numeric-display-third svg-clear" width=\'30px\' height=\'80px\' data-bind=\'text: keyPadValue\'>\n          </div>\n          <svg id="keypadSvg" class=\'area\' width=\'225px\' height=\'200px\' xmlns=\'http://www.w3.org/2000/svg\'></svg>\n      </div>'});for(var n=document.getElementById("dropdown-comparison"),i=n.options,r=0;r<i.length;r++)if(i[r].value===t.controllerSettings.data.comparison){n.selectedIndex=r;break}},a.configuratorClose=function(e,t){var n=document.getElementById("dropdown-comparison"),i=n.selectedIndex;t.controllerSettings.data.comparison=n.options[i].value,s.closeTabs(e)},a.svg=function(e,t){var n=r.createText("fa fas svg-clear block-temperature-text block-identity-text",42,60,o.temp);n.setAttribute("text-anchor","middle"),e.appendChild(n)},a)},{"./../keypadTab.js":28,"fastr.js":55,knockout:11,"svgbuilder.js":59}],28:[function(e,t,n){"use strict";var x,w,S,a;t.exports=(x=e("svgbuilder.js"),w=e("interact.js"),S=e("knockout"),a={tabbedButtons:function(i,r){r.inner="<div id='keypadDiv' class='editorDiv'>\n              <div id=\"numeric-display\" class = \"numeric-display-half svg-clear selectedDisplay\" width='80px' height='80px' data-bind='text: keyPadValue'>\n              </div>\n              <div id=\"beats-display\" class = \"beats-display svg-clear\" width='80px' height='80px' data-bind='text: beatsValue'>\n              </div>\n              <svg id=\"keypadSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n              <svg id=\"beatsSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n          </div>",a.openTabs(i,r);var o=document.getElementById("beats-display"),s=document.getElementById("numeric-display");o.onclick=function(){var e=document.getElementsByClassName("dataButton");o.className+=" selectedDisplay",s.className="numeric-display-half svg-clear";for(var t=e.length,n=0;n<t;n++)e[0].parentNode.removeChild(e[0]);var i=document.getElementById("keypadSvg");i.parentNode.removeChild(i),a.openBeats(r)},s.onclick=function(){var e=document.getElementsByClassName("beatsButton");s.className+=" selectedDisplay",o.className="beats-display svg-clear";for(var t=e.length,n=0;n<t;n++)e[0].parentNode.removeChild(e[0]);S.cleanNode(i),a.tabbedButtons(r)}},openTabs:function(e,t){var i=t.block,r=t.min,o=t.max,s=t.suffix,a=t.type,l=t.setValue,n=t.getValue,c=t.numArray,u=t.calcLayout;void 0===t.inner?e.innerHTML="<div id='keypadDiv' class='editorDiv'>\n                <div id=\"numeric-display\" class = \"numeric-display svg-clear\" width='80px' height='80px' data-bind='text: keyPadValue'>\n                </div>\n                <svg id=\"keypadSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n            </div>":e.innerHTML=t.inner,S.applyBindings(a,e);var d=document.getElementById("numeric-display"),p=document.getElementById("keypadSvg"),h=n().toString();a.keyPadValue(h.toString()+s);for(var f="",v=0;v<4;v++)for(var g=0;g<3;g++)if(void 0!==c[3*v+g]){var m=x.createGroup("dataButton",0,0),b=x.createRect("calcButtons",2.5+75*g,5+35*v,70,30,6),y=x.createText("svg-clear",37.5+75*g,27.5+35*v,c[3*v+g]);y.setAttribute("text-anchor","middle"),m.appendChild(b),m.appendChild(y),b.setAttribute("name",c[3*v+g]),p.appendChild(m)}w(".calcButtons",{context:p}).on("tap",function(e){if(f=e.target.getAttribute("name"),console.log("tap ->",f),"simple"===u){var t="";d.classList.remove("error"),"+"!==f.substring(0,1)&&"-"!==f.substring(0,1)||(t=f.substring(0,1),f=f.substring(1)),"<-"!==f&&"C"!==f||(h="0"),"-"===t?parseInt(h,10)-parseInt(f,10)>=r?h=(parseInt(h,10)-parseInt(f,10)).toString():(h=r,d.classList.add("error")):"+"===t&&(parseInt(h,10)+parseInt(f,10)<=o?h=(parseInt(h,10)+parseInt(f,10)).toString():(h=o,d.classList.add("error")))}else if("complex"===u){var n="+/-"===f;"<-"===f||"C"===f?(h="0",d.classList.remove("error")):n&&"0"!==h?(d.classList.remove("error"),h="-"===h.substring(0,1)?h.substring(1):"-"+h):"0"!==h||n?parseInt(h+f,10)<=o&&parseInt(h+f,10)>=r&&!n?h+=f:n||d.classList.add("error"):(d.classList.remove("error"),h=f)}else"defined"===u&&(h=f);a.keyPadValue(h.toString()+s),l(h),i.updateSvg()})},openBeats:function(e){var t=e.getBeats,n=e.setBeats,i=e.type,r=e.block,o=e.beatsRay;void 0===o&&(o=["1","2","3","4","5","6","7","8","9"]);var s=document.getElementById("beatsSvg"),a=t().toString();"1"===a?i.beatsValue(a.toString()+" beat"):i.beatsValue(a.toString()+" beats");for(var l=0;l<4;l++)for(var c=0;c<3;c++)if(void 0!==o[3*l+c]){var u=x.createGroup("",0,0),d=x.createRect("beatsButtons",2.5+75*c,5+35*l,70,30,6),p=x.createText("svg-clear",37.5+75*c,27.5+35*l,o[3*l+c]);p.setAttribute("text-anchor","middle"),u.appendChild(d),u.appendChild(p),d.setAttribute("name",o[3*l+c]),s.appendChild(u)}w(".beatsButtons",{context:s}).on("tap",function(e){var t=e.target.getAttribute("name");"1"===(a=t)?i.beatsValue(a.toString()+" beat"):i.beatsValue(a.toString()+" beats"),n(a),r.updateSvg()})},openTabsWithBeats:function(e,t){t.inner="<div id='keypadDiv' class='editorDiv'>\n              <div id=\"numeric-display\" class = \"numeric-display-half svg-clear\" width='80px' height='80px' data-bind='text: keyPadValue'>\n\n              </div>\n              <div id=\"beats-display\" class = \"beats-display svg-clear\" width='80px' height='80px' data-bind='text: beatsValue'>\n\n              </div>\n              <svg id=\"keypadSvg\" class='area' width='225px' height='72px' xmlns='http://www.w3.org/2000/svg'></svg>\n              <svg id=\"beatsSvg\" class='area' width='225px' height='80px' xmlns='http://www.w3.org/2000/svg'></svg>\n          </div>",a.openTabs(e,t),t.beatsRay=["1","2","3","4","5","6"],a.openBeats(t)},closeTabs:function(e){S.cleanNode(e)}})},{"interact.js":10,knockout:11,"svgbuilder.js":59}],29:[function(e,t,n){"use strict";var a,r,i,l,o;t.exports=(a=e("svgbuilder.js"),r=e("./keypadTab.js"),i=e("knockout"),l=e("icons.js"),a.pathBuilder,(o={tabs:{1:"1",2:"2"}}).keyPadValue=i.observable("100%"),o.beatsValue=i.observable("1 beat"),o.defaultSettings=function(){return{data:{speed:100,duration:1,motor:"1"},controller:"speed"}},o.svg=function(e,t){var n=t.controllerSettings.data.speed,i=l.motorWithDial(1,5,0,n);e.appendChild(i);var r=t.controllerSettings.data.duration,o=a.createGroup("displayText",0,0),s=a.createText("svg-clear block-motor-text-duration block-stencil-fill",45,70,r+" ");return o.appendChild(s),o.setAttribute("text-anchor","middle"),e.appendChild(o),e},o.configuratorOpen=function(e,t){for(var n=document.getElementsByClassName("block-settings-tab"),i=0;i<n.length;i++)n[i].textContent===t.controllerSettings.data.motor&&n[i].classList.add("tab-selected");r.tabbedButtons(e,{getValue:function(){return t.controllerSettings.data.speed},setValue:function(e){t.controllerSettings.data.speed=e},type:o,block:t,min:-100,max:100,suffix:" %",numArray:["+1","+10","+50","-1","-10","-50",void 0,"C"],calcLayout:"simple",getBeats:function(){return t.controllerSettings.data.duration},setBeats:function(e){t.controllerSettings.data.duration=e}})},o.configuratorClose=function(e,t){for(var n=document.getElementsByClassName("block-settings-tab"),i=0;i<n.length;i++)n[i].classList.contains("tab-selected")&&(t.controllerSettings.data.motor=n[i].textContent);r.closeTabs(e)},o)},{"./keypadTab.js":28,"icons.js":56,knockout:11,"svgbuilder.js":59}],30:[function(e,t,n){"use strict";function c(e,t){void 0!==e&&(1===t?e.setAttribute("class","svg-clear block-picture-led-on"):e.setAttribute("class","svg-clear block-picture-led-off"))}function u(e){var t=e.target.parentNode.getBoundingClientRect(),n=Math.floor((e.pageX-t.left)/35),i=Math.floor((e.pageY-t.top)/35);return 4<n||4<i?-1:5*i+n}var d,p,i,r;t.exports=(d=e("interact.js"),p=e("svgbuilder.js"),i={},r=e("icons.js"),i.tabs={},i.defaultSettings=function(){return{data:{pix:[0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,1,0,1,1,1,0]},controller:"5x5picture"}},i.svg=function(e,t){var n=t.controllerSettings.data.pix,i=r.picture(1.15,25,18,n);e.appendChild(i)},i.configuratorClose=function(){},i.configuratorOpen=function(e,n){e.innerHTML="<div id='pictureEditorDiv' class='editorDiv'>\n          <svg id='pictureEditor' width=175px height=175px xmlns='http://www.w3.org/2000/svg'>\n            <rect id='pictureRect' width=175px height=175px rx=10 ry=10 class='pix-editor block-picture-board'/>\n          </svg>\n        </div>";for(var t=document.getElementById("pictureEditor"),i=n.controllerSettings.data.pix,r=0,o=0,s=0;s<5;s++)for(var a=0;a<5;a++){var l=p.createCircle("",17.5+35*a,17.5+35*s,13);c(l,i[o]),t.appendChild(l),o+=1}d(".pix-editor",{context:t}).on("down",function(e){var t=u(e);0<=t&&(r=0===i[t]?1:0),i[t]=r,c(e.target.parentNode.children[t+1],i[t]),n.updateSvg()}).on("move",function(e){if(e.interaction.pointerIsDown){var t=u(e);0<=t&&i[t]!==r&&(i[t]=r,c(e.target.parentNode.children[t+1],i[t]),n.updateSvg())}})},i)},{"icons.js":56,"interact.js":10,"svgbuilder.js":59}],31:[function(e,t,n){"use strict";var s,i,c,u,a,l;t.exports=(s=e("interact.js"),i=e("knockout"),c=e("svgbuilder.js"),u=e("icons.js"),a={},l=e("./../variables.js"),a.keyPadValue=i.observable(0),a.defaultSettings=function(){return{data:{print:"var",variable:"A",sensor:"accel",button:"A",value:0}}},a.configuratorOpen=function(e,r){var t=r.controllerSettings.data;a.activeBlock=r,e.innerHTML="<div id='printEditorDiv' class='editorDiv'>\n          <div class='printBlock-buttons' y=\"100%\">\n            <div class='printBlock-option' value='A'><span class=\"svg-clear\">A</span></div>\n            <div class='printBlock-option' value='B'><span class=\"svg-clear\">B</span></div>\n          </div>\n          <div class=\"vert-line\"></div>\n          <div id='printBlock-editor'>\n          </div>\n        </div>",a.loadSlide(t.button,r);for(var n=document.getElementById("var-list"),i=n.options,o=0;o<i.length;o++){if("var"===t.print&&i[o].value===t.variable){n.selectedIndex=o;break}if("sensor"===t.print&&i[o].value===t.sensor){n.selectedIndex=o;break}}s(".printBlock-option").on("down",function(e){for(var t=e.srcElement,n=document.getElementsByClassName("printBlock-option"),i=0;i<n.length;i++)n[i].setAttribute("class","printBlock-option");t.classList.add("printBlock-selected"),a.loadSlide(t.getAttribute("value"),r)})},a.loadSlide=function(e,t){for(var n=document.getElementById("printBlock-editor"),i=document.getElementsByClassName("printBlock-option"),r=0;r<i.length;r++)i[r].getAttribute("value")===e&&i[r].setAttribute("class","printBlock-option printBlock-selected");"A"===e?(t.controllerSettings.data.print="var",t.controllerSettings.data.button="A",n.innerHTML='<select class="dropdown-comparison printBlock-dropdown" id="var-list">\n      </select>'):"B"===e&&(t.controllerSettings.data.print="sensor",t.controllerSettings.data.button="B",n.innerHTML='<select class="dropdown-comparison printBlock-dropdown" id="var-list">\n        <option value="accel">accel</option>\n        <option value="temp">temp</option>\n      </select>');var o=document.getElementById("var-list");l.addOptions(o,t.controllerSettings.data.variable)},a.configuratorClose=function(e,t){var n=document.getElementById("var-list"),i=l.getSelected(n),r=t.controllerSettings.data;"var"===r.print?r.variable=i:"sensor"===r.print&&(r.sensor=i),t.updateSvg(),a.activeBlock=null},a.svg=function(e,t){var n=u.pictureNumeric(1,32,15);n.setAttribute("text-anchor","middle"),e.appendChild(n);var i=t.controllerSettings.data.print;if("var"===i){var r=t.controllerSettings.data.variable,o=u.variable(.5,32,52,r);e.appendChild(o)}else if("sensor"===i){var s=t.controllerSettings.data.sensor;if("accel"===s){var a=u.accelerometer(.5,"svg-clear block-stencil-fill",90,135);e.appendChild(a)}else if("temp"===s){var l=c.createText("svg-clear block-identity-text",90,160,"");l.setAttribute("transform","scale(0.45)"),e.appendChild(l)}}},a)},{"./../variables.js":61,"icons.js":56,"interact.js":10,knockout:11,"svgbuilder.js":59}],32:[function(e,t,n){"use strict";var a,i,l,r,o;t.exports=(a=e("svgbuilder.js"),i=e("./keypadTab.js"),l=a.pathBuilder,r={},o=e("knockout"),r.keyPadValue=o.observable("0%"),r.defaultSettings=function(){return{data:{pos:0}}},r.svg=function(e,t){var n=a.createRect("svg-clear block-micro-servo-body",18,20,44,24,2.5);e.appendChild(n);var i="";i=l.move(45,32),i+=l.line(2.5,-19),i+=l.hline(1),i+=l.line(2.5,19),i+=l.arc(3,180,1,1,-6,0),i+=l.close();var r=a.createPath("svg-clear block-stencil-fill",i),o=t.controllerSettings.data.pos;r.setAttribute("transform","rotate("+o+" 48 32)"),e.appendChild(r);var s=a.createText("svg-clear block-servo-text block-stencil-fill",40,70,o+"˚");return s.setAttribute("text-anchor","middle"),e.appendChild(s),e},r.testExpression=function(e){var t="";t=l.move(24,52),t+=l.line(-9,0),t+=l.line(9,2.5),t+=l.line(-9,2.5),t+=l.line(9,2.5),t+=l.line(-9,2.5),t+=l.line(9,2.5),t+=l.line(-9,2.5),t+=l.line(9,2.5),t+=l.line(-9,2.5),t+=l.line(9,0);var n=a.createPath("svg-clear block-sensor-stencil",t);e.appendChild(n);var i=a.createCircle("svg-clear block-sensor-stencil-value",19.5,62,4);return e.appendChild(i),i=a.createCircle("svg-clear",19.5,62,1),e.appendChild(i),e},r.configuratorOpen=function(e,t){i.openTabs(e,{getValue:function(){return t.controllerSettings.data.pos},setValue:function(e){t.controllerSettings.data.pos=e},type:r,block:t,min:0,max:180,suffix:"˚",numArray:["+50","+10","+1","-50","-10","-1",void 0,"C"],calcLayout:"simple"})},r.configuratorClose=function(e){i.closeTabs(e)},r)},{"./keypadTab.js":28,knockout:11,"svgbuilder.js":59}],33:[function(e,t,n){"use strict";t.exports=function(){var g=e("interact.js"),m=e("svgbuilder.js"),b={},a=e("icons.js");b.tabs={},b.defaultSettings=function(){return{data:{description:"C4 C4 C4 C4",period:"1/4",s:"1 1 1 1",duration:0},controller:"pianoKeyboard"}};var y=[{name:"C4",f:261.6,s:1},{name:"D4",f:293.7,s:3},{name:"E4",f:329.6,s:5},{name:"F4",f:349.2,s:6},{name:"G4",f:392,s:8},{name:"A4",f:440,s:10},{name:"B4",f:493.9,s:12},{name:"C5",f:523.2,s:13},{name:"C#4",f:277.2,keyShift:-3,s:2},{name:"D#4",f:311.1,keyShift:3,s:4},{name:"F#4",f:370,keyShift:-4,s:7},{name:"G#4",f:415.3,keyShift:0,s:9},{name:"A#4",f:466.1,keyShift:4,s:11}];return b.configuratorOpen=function(e,t){b.activeBlock=t,e.innerHTML="<div id='pictureEditorDiv' class='editorDiv'>\n            <svg id='pianoSvg' width=231px height=190px xmlns='http://www.w3.org/2000/svg'>\n              <rect id='pictureRect' y=2px width=231px height=100px rx=4 ry=4 class='block-sound-piano'/>\n            </svg>\n          </div>";for(var n=document.getElementById("pianoSvg"),i=0,r=0;r<8;r++){var o=m.createRect("piano-key block-sound-piano-w",4+28*r,15,27,84,3);o.setAttribute("key",i),i+=1,n.appendChild(o)}for(var s=0;s<7;s++)if(2!==s&&6!==s){var a=21+28*s+y[i].keyShift,l=m.createRect("piano-key block-sound-piano-b",a,15,22,45,3);l.setAttribute("key",i),i+=1,n.appendChild(l)}var c=m.createRect("svg-clear block-sound-piano",0,2,231,15,4);n.appendChild(c);for(var u=b.activeBlock.controllerSettings.data.description.split(" "),d=0;d<4;d++){var p=m.createRect("svg-clear block-sound-txtBox block-sound-noteBox",5+60*d,108,40,30,3);n.appendChild(p);var h=m.createText("svg-clear block-sound-text block-sound-noteTxt",13+60*d,130,"__");void 0!==u[d]&&""!==u[d]&&(h.innerHTML=u[d]),h.setAttribute("box",d),n.appendChild(h)}var f=m.createRect("block-sound-txtBox block-sound-clearBox",75,145,80,25,3);n.appendChild(f);var v=m.createText("svg-clear block-sound-text block-sound-clearTxt",90,165,"Clear");n.appendChild(v),b.audioContext=new(window.AudioContext||window.webkitAudioContext),g(".piano-key ",{context:n}).on("down",function(e){b.lastKey=e.target,b.playKey(e.target)}).on("move",function(e){e.interaction.pointerIsDown&&b.currentKey!==e.target&&b.lastKey!==e.target&&(b.lastKey=e.target,b.playKey(e.target))}).on("up",function(){b.stopCurrentKey()}),g(".block-sound-clearBox",{context:n}).on("down",function(){b.activeBlock.controllerSettings.data.description="",b.activeBlock.controllerSettings.data.s="";for(var e=document.getElementsByClassName("block-sound-noteTxt"),t=0;t<4;t++)e[t].innerHTML="__";b.activeBlock.controllerSettings.data.duration=0,b.activeBlock.updateSvg()})},b.configuratorClose=function(){b.audioContext.close(),b.audioContext=null},b.currentKey=null,b.originalClass=null,b.lastKey=null,b.playKey=function(e){var t=Number(e.getAttribute("key"));e.setAttribute("key",t),b.stopCurrentKey(),b.currentKey=e,b.originalClass=e.getAttribute("class");var n=b.originalClass+"-pressed";e.setAttribute("class",n);var i=b.audioContext,r=i.createOscillator(),o=i.createGain();r.connect(o),o.connect(i.destination),o.gain.value=.3,r.type="sine",r.frequency.value=y[t].f,r.start(),r.stop(i.currentTime+.4),o.gain.setTargetAtTime(0,i.currentTime+.3,.015),b.keyTimer=setTimeout(function(){b.stopCurrentKey()},400);for(var s=document.getElementsByClassName("block-sound-text"),a=b.activeBlock.controllerSettings.data.description,l=b.activeBlock.controllerSettings.data.s,c=0;c<4;c++)if("__"===s[c].innerHTML){s[c].innerHTML=y[t].name,l=""===a||""===l?(a=s[c].innerHTML,String(y[t].s)):(a=a+" "+s[c].innerHTML,l+" "+y[t].s),b.activeBlock.controllerSettings.data.duration+=1;break}b.activeBlock.controllerSettings.data.description=a,b.activeBlock.controllerSettings.data.s=l,b.activeBlock.updateSvg()},b.stopCurrentKey=function(){null!==b.currentKey&&(clearTimeout(b.keyTimer),b.keyTimer=void 0,b.currentKey.setAttribute("class",b.originalClass),b.currentKey=null)},b.svg=function(e,t){var n=a.sound(1.15,20,20);if(e.appendChild(n),""!==t.controllerSettings.data.s){var i=t.controllerSettings.data.s.split(" "),r="";r+=m.pathBuilder.move(8,75);for(var o=0;o<i.length;o++){r+=m.pathBuilder.move(5,0-1.5*i[o]),r+=m.pathBuilder.line(10,0),r+=m.pathBuilder.move(0,1.5*i[o]);var s=m.createPath("svg-clear block-stencil",r);e.appendChild(s)}}return e},b}()},{"icons.js":56,"interact.js":10,"svgbuilder.js":59}],34:[function(e,t,n){"use strict";var i,l,c,r,o;t.exports=(i=e("knockout"),l=e("svgbuilder.js"),c=e("icons.js"),r=e("./keypadTab.js"),(o={}).keyPadValue=i.observable("100%"),o.beatsValue=i.observable("1 beat"),o.defaultSettings=function(){return{data:{speed:100,duration:1},controller:"speed"}},o.svg=function(e,t){var n=c.motor(.85,3,3);e.appendChild(n);var i=t.controllerSettings.data.speed,r=c.motorWithDial(.85,23,3,i);e.appendChild(r);var o=t.controllerSettings.data.duration,s=l.createGroup("displayText",0,0),a=l.createText("svg-clear block-motor-text-duration block-stencil-fill",45,70,o+" ");return s.appendChild(a),s.setAttribute("text-anchor","middle"),e.appendChild(s),e},o.configuratorOpen=function(e,t){r.tabbedButtons(e,{getValue:function(){return t.controllerSettings.data.speed},setValue:function(e){t.controllerSettings.data.speed=e},type:o,block:t,min:-100,max:100,suffix:"%",numArray:["+1","+10","+50","-1","-10","-50",void 0,"C"],calcLayout:"simple",getBeats:function(){return t.controllerSettings.data.duration},setBeats:function(e){t.controllerSettings.data.duration=e}})},o.configuratorClose=function(e){r.closeTabs(e)},o)},{"./keypadTab.js":28,"icons.js":56,knockout:11,"svgbuilder.js":59}],35:[function(e,t,n){"use strict";var a,i,r,l,o,s;t.exports=(a=e("svgbuilder.js"),i=e("knockout"),r=e("./../keypadTab.js"),l=e("icons.js"),o={},s=e("./../../variables.js"),o.keyPadValue=i.observable(0),o.defaultSettings=function(){return{data:{variable:"A",incdec:"+",value:1}}},o.configuratorOpen=function(e,t){r.openTabs(e,{getValue:function(){return t.controllerSettings.data.value},setValue:function(e){t.controllerSettings.data.value=e,"0"===t.controllerSettings.data.value?t.controllerSettings.data.incdec="":t.controllerSettings.data.value<0?t.controllerSettings.data.incdec="-":0<t.controllerSettings.data.value&&(t.controllerSettings.data.incdec="+")},type:o,block:t,min:-100,max:100,suffix:"",numArray:["-1","C","+1","-10",void 0,"+10"],calcLayout:"simple",inner:"<div id='keypadDiv' class='editorDiv'>\n          <select class=\"dropdown-comparison vars-dropdown-comparison\" id=\"var-list\">\n          </select>\n          <div class=\"dropdown-label-txt varAdd-label-txt svg-clear\" id=\"varAdd-incdec\">\n          </div>\n          <div id=\"numeric-display\" class = \"numeric-display-third svg-clear\" width='30px' height='80px' data-bind='text: keyPadValue'>\n          </div>\n          <svg id=\"keypadSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n      </div>"});var n=document.getElementById("var-list");s.addOptions(n,t.controllerSettings.data.variable)},o.configuratorClose=function(e,t){var n=document.getElementById("var-list");t.controllerSettings.data.variable=s.getSelected(n),t.updateSvg(),r.closeTabs(e)},o.svg=function(e,t){var n=t.controllerSettings.data.variable,i=l.variable(.9,20,5,n);e.appendChild(i);var r=t.controllerSettings.data.value,o=t.controllerSettings.data.incdec,s=a.createText("svg-clear vars-bottom-txt",45,71,o+" "+Math.abs(String(r)));s.setAttribute("text-anchor","middle"),e.appendChild(s)},o)},{"./../../variables.js":61,"./../keypadTab.js":28,"icons.js":56,knockout:11,"svgbuilder.js":59}],36:[function(e,t,n){"use strict";var i,s,a,r,o,l;t.exports=(i=e("knockout"),s=e("svgbuilder.js"),a=e("icons.js"),r=e("./../keypadTab.js"),e("./../calcpad.js"),o=e("./../../variables.js"),(l={}).keyPadValue=i.observable(0),l.defaultSettings=function(){return{data:{variable:"A",value:0}}},l.configuratorOpen=function(e,t){r.openTabs(e,{getValue:function(){return t.controllerSettings.data.value},setValue:function(e){t.controllerSettings.data.value=e},type:l,block:t,min:-100,max:100,suffix:"",numArray:["-1","C","+1","-10",void 0,"+10"],calcLayout:"simple",inner:"<div id='keypadDiv' class='editorDiv'>\n          <select class=\"dropdown-comparison vars-dropdown-comparison\" id=\"var-list\">\n          </select>\n          <div class=\"dropdown-label-txt varSet-label-txt svg-clear\">=\n          </div>\n          <div id=\"numeric-display\" class = \"numeric-display-third svg-clear\" width='30px' height='80px' data-bind='text: keyPadValue'>\n          </div>\n          <svg id=\"keypadSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n      </div>"});var n=document.getElementById("var-list");o.addOptions(n,t.controllerSettings.data.variable)},l.configuratorClose=function(e,t){var n=document.getElementById("var-list");t.controllerSettings.data.variable=o.getSelected(n),t.updateSvg(),r.closeTabs(e)},l.svg=function(e,t){var n=t.controllerSettings.data.variable,i=a.variable(.9,20,5,n);e.appendChild(i);var r=t.controllerSettings.data.value,o=s.createText("svg-clear vars-bottom-txt",45,71,String(r));o.setAttribute("text-anchor","middle"),e.appendChild(o)},l)},{"./../../variables.js":61,"./../calcpad.js":20,"./../keypadTab.js":28,"icons.js":56,knockout:11,"svgbuilder.js":59}],37:[function(e,t,n){"use strict";var i,o,s,r,a;t.exports=(i=e("knockout"),o=e("svgbuilder.js"),s=e("icons.js"),r=e("./keypadTab.js"),(a={}).keyPadValue=i.observable(1),a.defaultSettings=function(){return{data:{duration:1}}},a.svg=function(e,t){var n=s.wait(.9,50,19);e.appendChild(n);var i=t.controllerSettings.data.duration,r=o.createText("svg-clear block-wait-text block-stencil-fill",45,70,i+" ");return r.setAttribute("text-anchor","middle"),e.appendChild(r),e},a.configuratorOpen=function(e,t){r.openTabs(e,{getValue:function(){return t.controllerSettings.data.duration},setValue:function(e){t.controllerSettings.data.duration=e},type:a,block:t,min:1,max:50,suffix:" beats",numArray:["+1","C","-1","+10",void 0,"-10"],calcLayout:"simple"})},a.configuratorClose=function(e){r.closeTabs(e)},a)},{"./keypadTab.js":28,"icons.js":56,knockout:11,"svgbuilder.js":59}],38:[function(e,t,n){"use strict";var i,o,s,r,a,l;t.exports=(i=e("log.js"),o={},s=e("./overlays/deviceScanOverlay.js"),r=e("./overlays/actionDots.js"),a=e("./cxn.js"),l=e("./variables.js"),o.cxn=e("./cxn.js"),o.tbe=null,o.hbTimer=0,o.sensorTimer=0,o.runningBlocks=[],o.count=null,o.defaultPix="0000000000",o.run=!1,o.soundCount=0,o.activeBits=[],o.attachToScoreEditor=function(e){o.tbe=e,o.linkHeartBeat(),o.cxn.connectionChanged.subscribe(o.updateIndentityBlocks)},o.updateIndentityBlocks=function(){(0,o.tbe.forEachDiagramChain)(function(e){if(e.name.startsWith("identity")){var t=s.deviceName;o.cxn.connectionStatus(t)===o.cxn.statusEnum.BEACON&&o.cxn.connect(t),e.updateSvg()}})},o.linkHeartBeat=function(){var e=s.deviceName;if(o.hbTimer=0,o.tbe.forEachDiagramBlock(function(e){e.svgRect.classList.remove("running-block")}),0<o.runningBlocks.length)for(var t=0;t<o.runningBlocks.length;t++){var n=o.runningBlocks[t];null!==n&&(void 0===o.loopCount&&n.isLoopHead()&&(o.loopCount=n.controllerSettings.data.duration),"tail"===n.name&&1<o.loopCount?(n=n.flowHead,o.loopCount-=1):"tail"===n.name&&1===o.loopCount&&(o.loopCount=void 0,null!==n.next?n=n.next:o.stopAll()),null!==n&&"loop"===n.name&&(n=n.next),null===o.count&&(o.count=n.controllerSettings.data.duration),void 0!==o.count&&"0"!==o.count||(o.count=1),null!==n&&(o.count=parseInt(o.count,10),n.first.name.startsWith("identity")&&(n.moveToFront(),n.svgRect.classList.add("running-block")),o.playOne(n),1<o.count?o.count-=1:(o.runningBlocks[t]=n.next,o.count=null,o.cxn.write(e,"(m:(1 2) d:0);"))))}o.hbTimer=setTimeout(function(){o.linkHeartBeat()},1e3)},o.playAll=function(){r.activate("play",5),o.runningBlocks=[],o.run=!0,l.resetVars(),(0,o.tbe.forEachDiagramChain)(function(e){"identity"===e.name?o.runningBlocks.push(e.next):"identityAccelerometer"!==e.name&&"identityButton"!==e.name&&"identityTemperature"!==e.name||(a.buttonA=null,a.buttonB=null,a.buttonAB=null,o.checkSensorIdentity(e))})},o.satisfiesStart=function(e,t,n){var i=parseInt(t.controllerSettings.data.value,10);return"<"===t.controllerSettings.data.comparison?e<i:">"===t.controllerSettings.data.comparison?i<e:"="===t.controllerSettings.data.comparison?e===i||i<e+n&&e-n<i:null},o.runningBlockIsNotInChain=function(e){for(;null!==e;){if(e.svgRect.classList.contains("running-block"))return!1;e=e.next}return!0},o.checkSensorIdentity=function(e){o.sensorTimer=0;var t=e.controllerSettings.data;if(o.run)if("identityAccelerometer"===e.name&&null!==a.accelerometer){var n=a.accelerometer;console.log("Accelerometer",n),o.satisfiesStart(n,e,5)&&o.runningBlockIsNotInChain(e)&&o.runningBlocks.push(e.next)}else if("identityTemperature"===e.name&&null!==a.temperature){var i=a.temperature;console.log("Temperature",i),o.satisfiesStart(i,e,0)&&o.runningBlocks.push(e.next)}else"identityButton"===e.name&&("A"===t.button&&a.buttonA?(o.runningBlocks.push(e.next),a.buttonA=null):"B"===t.button&&a.buttonB?(o.runningBlocks.push(e.next),a.buttonB=null):"A+B"===t.button&&a.buttonAB&&(o.runningBlocks.push(e.next),a.buttonAB=null));o.sensorTimer=setTimeout(function(){o.checkSensorIdentity(e)},500)},o.stopAll=function(){r.activate("play",0);var e=o.tbe.forEachDiagramChain,t="",n="(px:"+o.defaultPix+");";o.run=!1,e(function(e){e.svgRect.classList.remove("running-block"),e.name.startsWith("identity")&&(t=s.deviceName,o.cxn.write(t,"(m:(1 2) d:0);"),o.cxn.write(t,n))}),o.count=null,o.runningBlocks=[],o.soundCount=0,i.trace("stop all")},o.playOne=function(e){if(e.first.name.startsWith("identity")){var t=s.deviceName,n="",i=e.controllerSettings.data;if("picture"===e.name){var r=i.pix;n="(px:"+o.packPix(r)+":1);"}else"servo"===e.name?n="(sr:50);":"motor"===e.name?n="(m:"+i.motor+" d:"+-i.speed+" b:"+i.duration+");":"twoMotor"===e.name?n="(m:(1 2) d:"+-i.speed+");":"sound"===e.name?(n="(nt:"+i.s.split(" ")[o.soundCount]+");",o.soundCount===i.duration-1?o.soundCount=0:o.soundCount+=1,console.log("message",n)):"wait"===e.name?n="":"variableSet"===e.name?l.set(i.variable,i.value):"variableAdd"===e.name?l.func(i.variable,"+",i.value):"print"===e.name&&(n="(pr:"+o.getPrintVal(i)+");");o.cxn.write(t,n)}},o.getPrintVal=function(e){var t=0;return"var"===e.print?(console.log("var------"),t=l.get(e.variable)):"sensor"===e.print&&(console.log("sensor------"),"accel"===e.sensor?t=a.accelerometer:"temp"===e.sensor&&(t=a.temperature)),console.log("conductor print",e.print,e.variable,t),t},o.playSingleChain=function(){i.trace("play single chain")},o.packPix=function(e){for(var t="",n=0;n<5;n++){for(var i=0,r=0;r<5;r++)i*=2,0!==e[5*n+r]&&(i+=1);var o=i.toString(16);1===o.length&&(o="0"+o),t+=o}return t},o)},{"./cxn.js":39,"./overlays/actionDots.js":43,"./overlays/deviceScanOverlay.js":45,"./variables.js":61,"log.js":57}],39:[function(t,e,n){"use strict";e.exports=function(){var s=t("log.js"),e=t("knockout"),a={};a.connectionChanged=e.observable({}),a.connectionChanged.extend({notify:"always"}),a.messages=[],a.compass=0,a.temp=0,a.connectingTimeout=0,a.hostSelectedName="",a.accelerometer=null,a.temperature=null,a.buttonA=null,a.buttonB=null,a.buttonAB=null,a.statusEnum={NOT_THERE:0,BEACON:1,CONNECTING:2,CONNECTED:3,CONNECTION_ERROR:4};var r="6e400001-b5a3-f393-e0a9-e50e24dcca9e",o="6e400002-b5a3-f393-e0a9-e50e24dcca9e",l="6e400003-b5a3-f393-e0a9-e50e24dcca9e";function c(e){for(var t=new Uint8Array(e.length),n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t.buffer}return a.webBLERead=null,a.webBLEWrite=null,"undefined"!=typeof ble?(a.appBLE=ble,a.webBLE=null):null!==navigator.bluetooth&&void 0!==navigator.bluetooth?(a.appBLE=null,a.webBLE=navigator.bluetooth):(a.appBLE=null,a.webBLE=null),a.scanUsesHostDialog=function(){return null!==a.webBLE},a.devices={},a.scanning=!1,a.stopScanning=function(){s.trace("cxn.stopScanning"),a.scanning=!1,a.appBLE&&a.appBLE.stopScan()},a.findDeviceByMac=function(e){for(var t in a.devices){var n=a.devices[t];if(e===n.mac)return n}return null},a.bleNameToBotName=function(e){return e.startsWith("BBC micro:bit [")?e.split("[",2)[1].split("]",1)[0]:null},a.beaconReceived=function(e){if(void 0!==e.name){var t=a.bleNameToBotName(e.name);null!==(e.botName=t)&&(this.devices.hasOwnProperty(t)||(this.devices[t]={name:t,mac:e.id},a.setConnectionStatus(t,a.statusEnum.BEACON)),this.devices[t].ts=Date.now(),Number.isInteger(e.rssi)&&(this.devices[t].rssi=e.rssi),this.cullList())}},a.cullList=function(){var e=Date.now();for(var t in a.devices){var n=a.devices[t];n.status===a.statusEnum.BEACON&&4e3<e-n.ts?(s.trace("culling beacon thath has not been refreshed for a long while."),delete a.devices[t]):n.status===a.statusEnum.NOT_THERE?(s.trace("culling missing bot"),delete a.devices[t]):n.status===a.statusEnum.CONNECTING&&(s.trace("culling hung connection",a.connectingTimeout),1e4<Date.now()-a.connectingStart&&delete a.devices[t])}a.connectionChanged(a.devices)},a.isBLESupported=function(){return!!a.webBLE||!(!a.appBLE||!a.appBLE.isEnabled)},a.startScanning=function(){a.connectingStart=Date.now(),a.scanning=!0,a.webBLE?a.webBTConnect():a.appBLE?(a.appBLE.isEnabled(function(){console.log("Bluetooth is enabled")},function(){console.log("Bluetooth is *not* enabled")}),s.trace("appBLE:"+a.scanning),a.appBLE.startScanWithOptions([],{reportDuplicates:!0},function(e){a.beaconReceived(e)},function(e){s.trace("error1:"+e)})):s.trace("Bluetooth not supported in this context")},a.webBTConnect=function(){var e={filters:[{namePrefix:"BBC micro:bit"}],optionalServices:[r,"link_loss"]};navigator.bluetooth.requestDevice(e).then(function(e){s.trace("> device:",e);var t={name:e.name,id:e.id,rssi:-1,autoSelect:!0};return a.beaconReceived(t),e.addEventListener("gattserverdisconnected",a.onDisconnecWebBLE),a.setConnectionStatus(t.botName,a.statusEnum.CONNECTING),e.gatt.connect()}).then(function(e){return s.trace("> GATT connected:",e),e.getPrimaryService(r)}).then(function(e){return s.trace("> Nordic UART service connected:",e),e.getCharacteristics()}).then(function(e){var t=e[0].service.device.name;s.trace("> UART characteristics:",t,e);var n=a.bleNameToBotName(t);if(a.scanning=!1,a.setConnectionStatus(n,a.statusEnum.CONNECTED),2<=e.length){var i=e[0],r=e[1];i.uuid===o?a.webBLEWrite=i:r.uuid===o&&(a.webBLEWrite=r),i.uuid===l?a.webBLERead=i:r.uuid===l&&(a.webBLERead=r)}a.webBLERead.startNotifications().then(function(){s.trace("adding event listener"),a.webBLERead.addEventListener("characteristicvaluechanged",a.onValChange)})}).catch(function(e){a.scanning=!1,a.connectionChanged(a.devices)})},a.onDisconnectAppBLE=function(e){s.trace("onDisconnectAppBLE:",e);var t=a.bleNameToBotName(e.name);a.setConnectionStatus(t,a.statusEnum.NOT_THERE),a.cullList()},a.onDisconnecWebBLE=function(e){s.trace("onDisconnecWebBLE:",e.target.name);var t=a.bleNameToBotName(e.target.name);a.setConnectionStatus(t,a.statusEnum.NOT_THERE),a.cullList()},a.connectionStatus=function(e){try{return a.devices.hasOwnProperty(e)?a.devices[e].status:a.statusEnum.NOT_THERE}catch(e){return s.trace("execption in BLE onData",e),0}},a.setConnectionStatus=function(e,t){var n=a.devices[e];null!==n&&(n.status=t),a.connectionChanged(a.devices)},a.disconnectAll=function(){if(a.appBLE)for(var e in a.devices){var t=a.devices[e].mac;a.appBLE.disconnect(t),a.setConnectionStatus(e,a.statusEnum.NOT_THERE)}else if(null!==a.webBLEWrite){var n=a.webBLEWrite.service.device;n.gatt.connected&&n.gatt.disconnect(),a.webBLEWrite=null,a.webBLERead=null}},a.disconnect=function(e){if(a.appBLE){var t=a.devices[e].mac;console.log("disconnecting appble",t),a.appBLE.disconnect(t),a.setConnectionStatus(e,a.statusEnum.NOT_THERE),a.cullList()}else a.webBLE&&a.disconnectAll()},a.connect=function(e){if(console.log("cns.connect",e,a.devices),a.connectingStart=Date.now(),a.devices.hasOwnProperty(e)){var t=a.devices[e].mac;console.log("cns.connect",e,t),a.appBLE?(console.log("cns.connect is app BLE"),a.setConnectionStatus(e,a.statusEnum.CONNECTING),a.appBLE.connect(t,a.onConnectAppBLE,a.onDisconnectAppBLE,a.onError)):a.webBLE||a.setConnectionStatus(e,a.statusEnum.CONNECTED)}},a.onConnectAppBLE=function(t){s.trace("On Connected:",t.name,t),a.appBLE.startNotification(t.id,r,l,function(e){a.onData(t.name,e)},a.onError);var e=a.findDeviceByMac(t.id);null!==e&&a.setConnectionStatus(e.name,a.statusEnum.CONNECTED)},a.onData=function(e,t){try{var n=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}(t);if(a.messages.push(e+":"+n),n.includes("accel")){var i=n.substring(7,n.length-1);a.accelerometer=parseInt(i,10)/20}else if(n.includes("(a)"))a.buttonA=!0;else if(n.includes("(b)"))a.buttonB=!0;else if(n.includes("(ab)"))a.buttonAB=!0;else if(n.includes("compass"))a.compass=n.substring(9,n.length-2);else if(n.includes("temp")){var r=n.substring(6,n.length-1),o=1.8*parseInt(r,10)+32;a.temperature=o}}catch(e){s.trace("execption in BLE onData",e)}},a.onValChange=function(e){var t=e.target.value;a.onData("Received",t.buffer)},a.onError=function(e){s.trace("Error2:",e)},a.write=function(e,t){try{if(a.devices.hasOwnProperty(e)){var n=a.devices[e].mac,i=c(t);a.appBLE?(i=c(t),a.appBLE.write(n,r,o,i,a.onWriteOK,a.onWriteFail)):a.webBLE&&a.webBLEWrite&&a.webBLEWrite.writeValue(i).then(function(){}).catch(function(e){s.trace("write failed",t,e)})}}catch(e){s.trace("execption in BLE Write",e)}},a.onWriteOK=function(e){s.trace("write ok",e)},a.onWriteFail=function(e){s.trace("write fail",e)},a}()},{knockout:11,"log.js":57}],40:[function(e,t,n){"use strict";var i,r,o;t.exports=(i={},r=e("./appMain.js"),o=[{title:"docA",text:"()"},{title:"docB",text:"(\n    (chain x:80 y:160 (\n      (identity start:'click' deviceName:'-?-' bus:'ble')\n      (picture pix:(0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 0 0 0 1 0 1 1 1 0))\n      (picture pix:(0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 1))\n      (picture pix:(0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 1 1 1 1 0 0 0 0 0))\n      (picture pix:(0 1 0 1 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 1 0 1 1 1 0))\n    )))"},{title:"docC",text:"(\n      (chain x:80 y:160 (\n        (identity start:'click' deviceName:'-?-' bus:'ble')\n        (loop count:'25' (\n          (picture pix:(1 1 1 1 1 1 0 0 0 1 1 0 0 0 1 1 0 0 0 1 1 1 1 1 1))\n          (picture pix:(0 0 0 0 0 0 1 1 1 0 0 1 0 1 0 0 1 1 1 0 0 0 0 0 0))\n          (picture pix:(0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0))\n        ))\n      )))"},{title:"docD",text:"(\n      (chain x:80 y:160 (\n        (identity start:'click' deviceName:'-?-' bus:'ble')\n        (sound description:'C4' period:'1/4')\n        (sound description:'E4' period:'1/4')\n        (sound description:'G4' period:'1/4')\n        (sound description:'E4' period:'1/4')\n        (sound description:'C4' period:'1/4')\n      )))"},{title:"docE",text:"(\n      (chain x:80 y:160 (\n        (identity start:'click' deviceName:'-?-' bus:'ble')\n        (motor speed:50 duration:0)\n        (motor speed:'100' duration:0)\n        (motor speed:50 duration:0)\n        (motor speed:'0' duration:0)\n        (motor speed:'-50' duration:0)\n        (motor speed:'-100' duration:0)\n        (motor speed:'-50' duration:0)\n      )))"}],i.setupDefaultPages=function(e){for(var t=0;t<o.length;t++){var n=o[t];!e&&null!==r.storage.getItem(n.title)||r.storage.setItem(n.title,n.text)}},i)},{"./appMain.js":18}],41:[function(n,e,t){"use strict";e.exports=function(){var i=n("log.js"),r=n("svgbuilder.js"),e={bind:function(e){var t=e+"Block",n=this[t];return void 0===n&&(n=this.unknownBlock,i.trace("cant find style for ",t)),n}};e.unknownBlock={svg:function(e,t){var n=r.createText("function-text svg-clear",10,40,t.name);return e.appendChild(n),e}},e.identityBlock=n("./blocks/identityBlocks/identityBlock.js"),e.pictureBlock=n("./blocks/pictureBlock.js"),e.soundBlock=n("./blocks/soundBlock.js"),e.servoBlock=n("./blocks/servoBlock.js"),e.waitBlock=n("./blocks/waitBlock.js"),e.colorStripBlock=n("./blocks/colorStripBlock.js");var t=n("./blocks/flowBlocks.js");return e.loopBlock=t.flowBlockHead,e.tailBlock=t.flowBlockTail,e.motorBlock=n("./blocks/motorBlock.js"),e.twoMotorBlock=n("./blocks/twoMotorBlock.js"),e.identityAccelerometerBlock=n("./blocks/identityBlocks/identityAccelerometerBlock.js"),e.identityButtonBlock=n("./blocks/identityBlocks/identityButtonBlock.js"),e.identityGyroBlock=n("./blocks/identityBlocks/identityGyroBlock.js"),e.identityTemperatureBlock=n("./blocks/identityBlocks/identityTemperatureBlock.js"),e.variableSetBlock=n("./blocks/variables/variableSetBlock.js"),e.variableAddBlock=n("./blocks/variables/variableAddBlock.js"),e.printBlock=n("./blocks/printBlock.js"),e.digitalWriteBlock={svg:function(e){return e}},e.analogWriteBlock={},e.serialWriteBlock={},e.I2CWriteBlock={},e.calculatorBlock={svg:function(e){return e}},e.musicNoteValue={},e.constantValue={},e.rangeValue={},e.acceleromoterValue={},e.timeValue={},e.compassValue={},e.temperatureValue={},e.funcionValue={},e.messageValue={},e}()},{"./blocks/colorStripBlock.js":21,"./blocks/flowBlocks.js":22,"./blocks/identityBlocks/identityAccelerometerBlock.js":23,"./blocks/identityBlocks/identityBlock.js":24,"./blocks/identityBlocks/identityButtonBlock.js":25,"./blocks/identityBlocks/identityGyroBlock.js":26,"./blocks/identityBlocks/identityTemperatureBlock.js":27,"./blocks/motorBlock.js":29,"./blocks/pictureBlock.js":30,"./blocks/printBlock.js":31,"./blocks/servoBlock.js":32,"./blocks/soundBlock.js":33,"./blocks/twoMotorBlock.js":34,"./blocks/variables/variableAddBlock.js":35,"./blocks/variables/variableSetBlock.js":36,"./blocks/waitBlock.js":37,"log.js":57,"svgbuilder.js":59}],42:[function(e,t,n){"use strict";var i=e("./appMain.js");if(i.isRegularBrowser=0<=document.URL.indexOf("http://")||-0<=document.URL.indexOf("https://"),i.isRegularBrowser)i.isCordovaApp=!1,i.start();else{i.isCordovaApp=!0,document.addEventListener("deviceready",i.start,!1);var r=document.createElement("script");r.setAttribute("src","./cordova.js"),document.head.appendChild(r)}},{"./appMain.js":18}],43:[function(e,t,n){"use strict";var p,o,h,f,i,v,g;t.exports=(p={},o=e("interact.js"),h=e("svgbuilder.js"),f=e("editStyle.js"),i=e("./../appMain.js"),v=e("fastr.js"),g=e("./deviceScanOverlay.js"),p.mapIndex=0,p.dotMap=[],p.topDots=[],p.commandDots=[],p.dotsLeft=0,p.dotsMiddle=0,p.dotsRight=0,p.isAnimating=!1,p.currentSubShowing=null,p.docTitleSVG=null,p.ActionDot=function(e){if((p.dotMap[p.mapIndex]=this).dotIndex=p.mapIndex,p.mapIndex+=1,this.command=e.command,this.label=e.label,this.alignment=e.alignment,void 0===this.alignment&&(this.alignment="S"),this.tweakx=e.tweakx,void 0===this.tweakx&&(this.tweakx=0),this.svgDot=null,this.svgDotGroup=null,this.svgSubGroup=null,this.sub=e.sub,this.subShowing=!1,"L"===e.alignment?(this.position=p.dotsLeft,p.dotsLeft+=1):"M"===e.alignment?(this.position=p.dotsMiddle,p.dotsMiddle+=1):"R"===e.alignment&&(this.position=p.dotsRight,p.dotsRight+=1),this.subDots=[],void 0!==this.sub)for(var t=0;t<this.sub.length;t++)this.subDots.push(new p.ActionDot(this.sub[t]))},p.resize=function(e,t){for(var n=.1*e,i=0,r=f.calcSreenScale(e,t),o=7*r,s=e/2-33-(p.dotsMiddle+1)*(n/2),a=0;a<p.topDots.length;a++){var l=p.topDots[a].position,c=p.topDots[a].alignment;"L"===c?i=n*l+14:"M"===c?i=s+n*(l+1):"R"===c&&(i=e-n*l),p.topDots[a].updateSvg(i,o,r)}},p.setDocTitle=function(e){null!==p.docTitleSVG&&(p.docTitleSVG.textContent=e)},p.ActionDot.prototype.updateSvg=function(e,t,n){var i=66*n,r=34*n;null!==this.svgDotGroup&&(null!==this.svgSubGroup&&this.subShowing&&(p.svgDotParent.removeChild(this.svgSubGroup),this.subShowing=!1),p.svgDotParent.removeChild(this.svgDotGroup)),this.svgDotGroup=null,this.svgDot=null,this.svgText=null,this.svgTextOverlay=null,this.svgText2=null,this.dotDiameter=i,this.dopTop=t;var o=h.createGroup("action-dot",0,0),s=this.label,a=i/2,l=t+a+r/3;if("deviceScanOverlay"===this.command){var c=170*n,u=e-c-20,d=u+80*n;this.svgDot=h.createRect("action-dot-bg",u,t,c,i,a),this.svgText=h.createText("fa fas action-dot-fatext",d,l,g.decoratedName()),this.svgText.setAttribute("id","device-name-label")}else this.label===v.file?(this.svgDot=h.createCircle("action-dot-bg",e+a,t+a,a),this.svgText=h.createText("fa fas action-dot-fatext",e+a,l,s.substring(0,1)),this.svgTextOverlay=h.createText("action-dot-doc-label",e+a,l,"A"),p.docTitleSVG=this.svgTextOverlay):(this.svgDot=h.createCircle("action-dot-bg",e+a,t+a,a),this.svgText=h.createText("fa action-dot-fatext fas",e+a+this.tweakx,l,s));f.setFontSize(this.svgText.style,r),this.svgDot.setAttribute("id","action-dot-"+this.command),o.appendChild(this.svgDot),o.appendChild(this.svgText),null!==this.svgTextOverlay&&o.appendChild(this.svgTextOverlay),o.setAttribute("dotIndex",this.dotIndex),this.svgDotGroup=o,void 0!==this.sub&&(this.svgSubGroup=this.updateDropdownSvg(e,t,i,r)),p.svgDotParent.appendChild(this.svgDotGroup)},p.ActionDot.prototype.updateDropdownSvg=function(e,t,n,i){var r=t,o=h.createGroup("action-dot-dropdown",0,0),s=n+2*r;this.subBackBottom=(this.subDots.length+1)*(n+r)+r,this.subBackD=s,this.svgSubBack=h.createRect("action-dot-dropdown-bg",e-r,t-r,s,s,s/2),o.appendChild(this.svgSubBack);for(var a=t,l=0;l<this.subDots.length;l++){a+=n+r;var c=this.subDots[l].buildSubDot(e,a,t,n,i);o.appendChild(c)}return o},p.ActionDot.prototype.buildSubDot=function(e,t,n,i,r){this.x=e,this.dotTop=t,this.dotTopHide=n;var o=i/2,s=h.createGroup("action-dot",0,0),a=t+o+r/3;return this.svgDot=h.createCircle("action-dot-bg",e+o,t+o,o),this.svgText=h.createText("fa action-dot-fatext",e+o,a,this.label),f.setFontSize(this.svgText.style,r),this.command,this.svgDot.setAttribute("id","action-dot-"+this.command),s.appendChild(this.svgDot),s.appendChild(this.svgText),s.setAttribute("dotIndex",this.dotIndex),this.svgDotGroup=s},p.ActionDot.prototype.activate=function(e){null!==this.svgDot&&(1===e?this.svgDot.classList.add("action-dot-active"):0===e||2===e?(this.svgDot.classList.remove("running"),this.svgDot.classList.remove("overlay-showing"),this.svgDot.classList.remove("action-dot-active"),this.svgText.classList.remove("running"),0===e&&this.subShowing&&this.animateDropDown()):3===e?this.svgDot.classList.add("overlay-showing"):5===e&&(this.svgDot.classList.add("running"),this.svgText.classList.add("running")))},p.hideOverlay=function(){null!==i.overlays.currentShowing&&(p.activate(i.overlays.currentShowing,0),i.overlays.hideOverlay(null))},p.ActionDot.prototype.doCommand=function(){if(this.activate(2),void 0===this.sub){var e=this.command;p.reset(),i.doCommand(e)}else p.hideOverlay(),this.animateDropDown()},p.ActionDot.prototype.animateDropDown=function(){p.isAnimating||(p.isAnimating=!0,this.subShowing?(this.subShowing=!1,this.slideDots({frame:0,frameEnd:10},!1),p.currentSubShowing=null):(void 0!==this.sub&&(null!==p.currentSubShowing&&(p.currentSubShowing.subShowing=!1,p.currentSubShowing.slideDots({frame:0,frameEnd:10},!1),p.currentSubShowing=null),p.svgDotParent.insertBefore(this.svgSubGroup,this.svgDotGroup),(p.currentSubShowing=this).slideDots({frame:0,frameEnd:10},!0)),this.subShowing=!0))},p.ActionDot.prototype.slideDots=function(e,t){var n=this,i=e.frame/e.frameEnd;t||(i=1-i);var r=(this.subBackBottom-this.subBackD)*i;this.svgSubBack.setAttribute("height",String(this.subBackD+r)+"px");for(var o=this.subDots.length,s=0;s<o;s++){var a=this.subDots[s],l=-(1-i)*(a.dotTop-a.dotTopHide);a.svgDotGroup.setAttribute("transform","translate(0 "+l+")")}e.frame+=1,e.frame<=e.frameEnd?requestAnimationFrame(function(){n.slideDots(e,t)}):(p.isAnimating=!1,t||p.svgDotParent.removeChild(this.svgSubGroup))},p.reset=function(){for(var e=1;e<p.topDots.length;e++)p.topDots[e].activate(0)},p.activate=function(e,t){var n=p.commandDots[e];void 0!==n&&n.activate(t)},p.doPointerEvent=function(e){var t=document.elementFromPoint(e.clientX,e.clientY),n=e.type,i=p.activeIndex;if(null!==t){var r=t.parentNode.getAttribute("dotIndex");"dragend"===n||"tap"===n?(r===p.activeIndex?p.dotMap[i].doCommand():p.dotMap[i].activate(0),p.activeIndex=-1):"dragmove"===n&&p.dotMap[i].activate(r===i?1:0)}},p.defineButtons=function(e,t){p.activeIndex=-1,p.svgDotParent=t;var n=h.createGroup("action-dot",0,0);t.appendChild(n);var i=0;for(i=0;i<e.length;i++){var r=new this.ActionDot(e[i]);p.topDots.push(r),p.commandDots[r.command]=r}return o(".action-dot",{context:t}).draggable({}).on("down",function(e){var t=e.currentTarget.getAttribute("dotIndex");p.activeIndex=t,p.dotMap[t].activate(1)}).on("dragmove",function(e){p.doPointerEvent(e)}).on("dragend",function(e){p.doPointerEvent(e)}).on("tap",function(e){p.doPointerEvent(e)}),n},p)},{"./../appMain.js":18,"./deviceScanOverlay.js":45,"editStyle.js":54,"fastr.js":55,"interact.js":10,"svgbuilder.js":59}],44:[function(e,t,n){"use strict";var i,r,o;t.exports=(i=e("log.js"),r=e("./overlays.js"),o={start:function(){r.insertHTML("\n      <div id='debugOverlay'>\n        <div id='debugLogBackground'>\n          <div id='debugLog'></div>\n        </div>\n      </div>"),o.logElement=document.getElementById("debugLog"),o.updateDebug()},updateDebug:function(){o.logElement.innerHTML=i.buffer,o.timer=setTimeout(function(){o.updateDebug()},2e3)},exit:function(){clearTimeout(o.timer)}})},{"./overlays.js":48,"log.js":57}],45:[function(e,t,n){"use strict";var i,r,o,s,a,l,c,u;t.exports=(i=e("interact.js"),e("log.js"),r=e("fastr.js"),o=e("tbot.js"),s=e("icons.js"),a=e("svgbuilder.js"),l=e("./../cxn.js"),c=e("./overlays.js"),(u={nonName:"-?-",tbots:{}}).deviceName=u.nonName,u.selectDevice=function(e){"string"==typeof e&&u.updateScreenName(e)},u.decoratedName=function(){return r.robot+"  "+u.deviceName},u.updateScreenName=function(e){u.deviceName=e,u.disconnectButton.disabled=u.deviceName===u.nonName,u.deviceNameLabel.innerHTML=u.decoratedName()},u.updateLabel=function(){u.scanButton.innerHTML=l.scanning?"Searching for "+r.robot:"Search for "+r.robot},u.defaultSettings=function(){return{data:{start:"click",deviceName:u.nonName,bus:"ble"},controller:"target-bt",status:0}},u.testButton=function(e){e.pageX<60&&e.pageY<200&&!u.testBotsShowing?(u.testBotsShowing=!0,u.addTestBots()):e.pageX<60&&250<e.pageY&&(u.testBotsShowing=!1,u.removeAllBots())},u.addTestBots=function(){var e=["CUPUR","CAPAZ","FELIX","SADOW","NATAN","GATON","FUTOL","BATON","FILON","CAPON"];for(var t in e)u.addNewBlock(e[t],0,s.t55)},u.removeAllBots=function(){u.tbots={},u.svg.removeChild(u.tbotGroup),u.tbotGroup=u.svg.appendChild(a.createGroup("",0,0))},u.testKeyTCount=0,u.testKeyCCount=0,u.keyEvent=function(e){"T"===e.key?u.testKeyTCount+=1:"C"===e.key?u.testKeyCCount+=1:u.testKeyTCount=u.testKeyCCount=0,3<u.testKeyTCount?(u.addTestBots(),u.testKeyTCount=u.testKeyCCount=0):3<u.testKeyCCount&&(u.removeAllBots(),u.testKeyTCount=u.testKeyCCount=0)},u.start=function(){document.body.addEventListener("keydown",u.keyEvent,!1),c.insertHTML("\n        <div id='dsoOverlay'>\n            <div id='dsoSvgShell' class='dso-list-box-shell'>\n              <svg id='dsoSVG' class= 'dso-svg-backgound' width='100%' height='100%' xmlns=\"http://www.w3.org/2000/svg\"></svg>\n            </div>\n            <div class='dso-botton-bar'>\n                <button id='dsoScan' class='fa fas dso-button'>\n                LABEL SET BASED ON STATE\n                </button>\n                <button id='dsoDisconnect' class='fa fas dso-button' style='float:right'>\n                Disconnect\n                </button>\n            </div>\n        </div>"),u.svg=document.getElementById("dsoSVG"),u.background=a.createRect("dso-svg-backgound",0,0,20,20,0);var e=u.svg.appendChild(a.createGroup("",0,0));for(var t in e.appendChild(u.background),u.tbotGroup=u.svg.appendChild(a.createGroup("",0,0)),u.resize(),u.tbots)u.tbots[t].buildSvg(u.svg);u.scanButton=document.getElementById("dsoScan"),u.scanButton.onclick=u.onScanButton,u.disconnectButton=document.getElementById("dsoDisconnect"),u.disconnectButton.onclick=u.onDisconnectButton,u.saveHold=i.debug().defaultOptions._holdDuration,i.debug().defaultOptions._holdDuration=2e3,u.interact=i(".dso-svg-backgound",{context:u.svg}).on("hold",function(e){u.testButton(e)}),u.deviceNameLabel=document.getElementById("device-name-label"),l.isBLESupported()||u.sorryCantDoIt(),l.scanUsesHostDialog()||(u.watch=l.connectionChanged.subscribe(u.refreshList),l.startScanning()),u.updateLabel(),u.updateScreenName(u.deviceName)},u.sorryCantDoIt=function(){new o.Class(u.tbotGroup,100,20,"-----",s.sad55),u.tbotGroup=u.svg.appendChild(a.createGroup("",0,0)),u.tbotGroup.appendChild(a.createText("svg-clear tbot-device-name",450,95,"Can not access Bluetooth (BLE)"))},u.nextLocation=function(e){var t=u.columns;return{x:20+e%t*150,y:20+150*Math.floor(e/t)}},u.pauseResume=function(e){},u.resize=function(){var e=document.getElementById("dsoOverlay");u.w=e.clientWidth,u.h=e.clientHeight;var t=u.h-95+"px";document.getElementById("dsoSvgShell").style.height=t,a.resizeRect(u.background,u.w,u.h),u.columns=Math.floor((u.w-40)/150);var n=0;for(var i in u.tbots){var r=u.nextLocation(n);n+=1,u.tbots[i].setLocation(r.x,r.y)}},u.exit=function(){for(var e in document.body.removeEventListener("keydown",u.keyEvent,!1),i.debug().defaultOptions._holdDuration=u.saveHold,u.tbots)u.tbots[e].releaseSvg();u.testBotsShowing=!1,u.svg=null,u.background=null,u.tbotGroup=null,l.scanning&&(l.stopScanning(),u.watch.dispose(),u.watch=null)},u.tryConnect=function(e){l.scanUsesHostDialog()?u.onScanButton():e.selected?l.disconnectAll():(l.disconnectAll(),l.connect(e.name),u.selectDevice(e.name))},u.onScanButton=function(e){l.scanUsesHostDialog()&&(l.scanning?(l.stopScanning(),u.watch.dispose(),u.watch=null):(u.onDisconnectButton(),u.refreshList(l.devices),u.watch=l.connectionChanged.subscribe(u.refreshList),l.startScanning()))},u.onDisconnectButton=function(){l.disconnectAll()},u.addNewBlock=function(e,t,n){var i=u.nextLocation(Object.keys(u.tbots).length),r=new o.Class(u.tbotGroup,i.x,i.y,e,n);return r.onclick=function(){u.tryConnect(r)},r.setConnectionStatus(t),u.tbots[e]=r},u.refreshList=function(e){var t=u.nonName;for(var n in e){var i=e[n].status,r=u.tbots[n];void 0!==r?r.setConnectionStatus(i):r=u.addNewBlock(n,i,s.smile55),i===l.statusEnum.CONNECTED&&(t=n)}u.updateLabel(),u.updateScreenName(t)},u)},{"./../cxn.js":39,"./overlays.js":48,"fastr.js":55,"icons.js":56,"interact.js":10,"log.js":57,"svgbuilder.js":59,"tbot.js":60}],46:[function(e,t,n){"use strict";var r,i,o,s,a;t.exports=(r=e("./../conductor.js"),i=e("./overlays.js"),o=e("./deviceScanOverlay.js"),s=e("slideControl.js"),a={start:function(){i.insertHTML("<svg id='driveOverlay' xmlns='http://www.w3.org/2000/svg'></svg>"),a.svg=document.getElementById("driveOverlay"),a.lSlide=new s.Class(a.svg,"L"),a.rSlide=new s.Class(a.svg,"R"),a.resize(),a.sendValuesToBot()},resize:function(){var e=a;for(e.w=e.svg.clientWidth,e.h=e.svg.clientHeight;e.svg.lastChild;)e.svg.removeChild(e.svg.lastChild);var t=e.w,n=e.h;e.scaleH=1,e.scaleW=1,t<500&&(t<200&&(t=200),e.scaleW=t/500),n<500&&(n<200&&(n=200),e.scaleH=n/500);var i=100*e.scaleH,r=120*Math.min(e.scaleH,e.scaleW),o=r/2,s=80*e.scaleW;e.lSlide.buildSvg(s+o,r,i,n,e.scaleH),e.rSlide.buildSvg(t-s-o,r,i,n,e.scaleH)},chartUpdate:function(){var t=a.lSlide.vvalue.value;a.rSlide.vvalue.value;console.log("updateChart"),a.chart.data.datasets.forEach(function(e){e.data.shift(),e.data.push(t)}),a.chart.update()},sendValuesToBot:function(){var e=o.deviceName,t=a;if(null!==e&&e!==o.nonName){if(t.lSlide.vvalue.hasChanged()){var n="(m:1 d:"+-t.lSlide.vvalue.value+" b:1);";r.cxn.write(e,n)}if(t.rSlide.vvalue.hasChanged()){var i="(m:2 d:"+-t.rSlide.vvalue.value+");";r.cxn.write(e,i)}t.lSlide.vvalue.sync(),t.rSlide.vvalue.sync()}a.timer=setTimeout(function(){a.sendValuesToBot()},500)},exit:function(){clearTimeout(a.timer)}})},{"./../conductor.js":38,"./deviceScanOverlay.js":45,"./overlays.js":48,"slideControl.js":58}],47:[function(e,t,n){"use strict";var i,r;t.exports=(i={},r=e("./overlays.js"),i.saveCamera=document.getElementById("saveCamera"),i.start=function(){r.overlayShell.innerHTML="\n      <div id='debugLogBackground'>\n        <div id='debugLog'></div>\n      </div>"},i.exit=function(){},i.mockLocalStorage={getItem:function(e){return null},setItem:function(e,t){},key:function(e){return null}},i.localStorage=function(){return void 0!==window.localStorage?window.localStorage:i.mockLocalStorage},i.cameraFlash=function(){i.saveCamera.className="cameraFlash",setTimeout(function(){i.saveCamera.className="cameraIdle"},1e3)},i.snapShot=function(){},i)},{"./overlays.js":48}],48:[function(t,e,n){"use strict";var a,l;e.exports=(a=t("editStyle.js"),l={currentShowing:null,currentIsClosing:!1,isAnimating:!1,afterCommand:null,init:function(){l.overlayLayer=document.getElementById("overlayLayer"),l.overlay=null,window.addEventListener("resize",l.resize,!1),l.overlayLayer.addEventListener("webkitAnimationEnd",l.endAnimation),l.overlayLayer.addEventListener("animationend",l.endAnimation);var e={};return e.driveOverlay=t("./driveOverlay.js"),e.debugOverlay=t("./debugOverlay.js"),e.deviceScanOverlay=t("./deviceScanOverlay.js"),e.fileOverlay=t("./fileOverlay.js"),e.splashOverlay=t("./splashOverlay.js"),l.screens=e,l},insertHTML:function(e){var t="<div id='overlayRoot'><div id='overlayShell'>"+e+"</div></div>";l.overlayLayer.innerHTML=t,l.overlayShell=document.getElementById("overlayShell")},resize:function(){var e=window.innerWidth,t=window.innerHeight,n=a.calcSreenScale(e,t),i=a.findCSSRule("#overlayRoot"),r=(80*n).toString()+"px",o="calc(100% - "+r+")";if(i.style.top=r,i.style.height=o,null!==l.currentShowing){var s=l.screens[l.currentShowing].resize;"function"==typeof s&&s(e,t)}},showOverlay:function(e){if(null===l.currentShowing){var t=l.screens[e];l.currentShowing=e,l.overlayLayer.innerHTML="",t.start(),l.overlayShell.classList.add("fullScreenSlideIn"),l.isAnimating=!0}},hideOverlay:function(e){null!==l.currentShowing&&(l.currentIsClosing=!0,l.screens[l.currentShowing].exit(),l.currentShowing=null,l.afterCommand=e,null!==l.overlayShell&&(l.overlayShell.classList.remove("fullScreenSlideIn"),l.overlayShell.classList.add("fullScreenSlideOut"),l.isAnimating=!0))},endAnimation:function(){var e=l.afterCommand;l.afterCommand=null,!(l.isAnimating=!1)===l.currentIsClosing&&(l.currentIsClosing=!1,l.overlayLayer.innerHTML="",l.overlayShell=null),null!==e&&e()},pauseResume:function(e){if(null!==l.currentShowing){var t=l.screens[l.currentShowing].pauseResume;"function"==typeof t&&t(e)}}})},{"./debugOverlay.js":44,"./deviceScanOverlay.js":45,"./driveOverlay.js":46,"./fileOverlay.js":47,"./splashOverlay.js":49,"editStyle.js":54}],49:[function(e,t,n){"use strict";var i,s,r,o;t.exports=(i={},s=e("editStyle.js"),r=e("./../appMain.js"),o=e("./overlays.js"),i.start=function(){o.insertHTML("\n        <div id='splashOverlay'>\n            <div id='splashDialog'>\n              <p class='splash-title'>TBlocks</p>\n              <p id = 'splash-about' class='splash-body splash-text'>A block sequencing tool for interactive programming.</p>\n              <p id = 'splash-copy' class='splash-body splash-text'>© 2019 Paul Austin and Sidharth Srinivasan. All rights reserved.</p>\n              <br>\n            <div>\n                <button id='splash-done' class='splash-button splash-text'>OK</button>\n                <br><br>\n                <button id='splash-reset' class='splash-button splash-text'>Clear all.</button>\n            </div>\n            <br>\n            </div>\n        </div>");var e=document.getElementById("splash-about");e.textContent=e.textContent+" Version "+r.buildFlags.version,document.getElementById("splash-done").onclick=i.hideAbout,document.getElementById("splash-reset").onclick=i.resetApp,i.resize()},i.resize=function(){var e=document.getElementById("splashOverlay"),t=e.clientWidth,n=e.clientHeight,i=s.calcSreenScale(t,n),r=s.findCSSRule(".splash-text");s.setFontSize(r.style,18*i);var o=s.findCSSRule(".splash-button");s.setHeight(o.style,50*i)},i.hideAbout=function(){o.hideOverlay(null)},i.resetApp=function(){r.tbe.clearAllBlocks(),r.defaultFiles.setupDefaultPages(!0),o.hideOverlay(null)},i.exit=function(){},i.showLaunchAboutBox=function(){var e=r.storage.getItem("teakBlockShowAboutBox");return null===e||!0===e},i)},{"./../appMain.js":18,"./overlays.js":48,"editStyle.js":54}],50:[function(e,t,n){"use strict";var p,o,l,d,c,s,i,r,a,u,h,f,v,g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=(p=e("log.js"),o=e("assert"),l=e("interact.js"),d=e("./teaktext.js"),c=e("svgbuilder.js"),s=e("icons.js"),i=e("./trashBlocks.js"),r=e("./fblock-settings.js"),a=e("./teakselection"),u=e("./overlays/actionDots.js"),h=e("./conductor.js"),f=e("./appMain.js"),(v={}).fblocks=r,v.diagramBlocks={},v.paletteBlocks={},v.blockIdSequence=100,v.currentDoc="docA",v.currentUndoIndex=0,v.stopUndo=!1,v.draggingSelectionArea=null,v.defaultBlockLoc=[40,120],v.identityIndent=120,v.forEachDiagramBlock=function(e){for(var t in v.diagramBlocks)if(v.diagramBlocks.hasOwnProperty(t)){var n=v.diagramBlocks[t];"object"===(void 0===n?"undefined":g(n))&&e(n)}},v.forEachPalette=function(e){for(var t in v.paletteBlocks)if(v.paletteBlocks.hasOwnProperty(t)){var n=v.paletteBlocks[t];"object"===(void 0===n?"undefined":g(n))&&e(n)}},v.forEachDiagramChain=function(t){v.forEachDiagramBlock(function(e){null===e.prev&&t(e)})},v.clearStates=function(e){u.reset(),f.overlays.hideOverlay(null),this.components.blockSettings.hide(e),v.forEachDiagramBlock(function(e){e.markSelected(!1)})},v.init=function(e,t){return this.width=window.innerWidth,this.height=window.innerHeight,this.svg=e,this.svgCeiling=t,this.background=c.createRect("editor-background",0,0,20,20,0),this.svg.insertBefore(this.background,this.svgCeiling),this.configInteractions(),l.maxInteractions(1/0),a.init(v),this},v.elementToBlock=function(e){var t=e.getAttribute("interact-id");if(null===t)return p.trace("svg elt had no id:",e),null;var n=t.split(":"),i=null;return"d"===n[0]?i=this.diagramBlocks[t]:"p"===n[0]&&(i=this.paletteBlocks[t]),void 0===i&&(i=null),null===i&&p.trace("block not found, id was <",t,">"),i},v.clearAllBlocks=function(){v.clearStates(),i(v)},v.saveCurrentDoc=function(){var e=d.blocksToText(v.forEachDiagramChain);f.storage.setItem(v.currentDoc,e)},v.loadDoc=function(e){if(v.currentDoc!==e){v.clearStates(),v.clearDiagramBlocks(),v.currentDoc=e;var t=f.storage.getItem(e);null!==t&&d.textToBlocks(v,t),u.setDocTitle(e.substring(3,4))}},v.nextBlockId=function(e){var t=e+String(v.blockIdSequence);return v.blockIdSequence+=1,t},v.addBlock=function(e,t,n){var i=new this.FunctionBlock(e,t,n);return i.isPaletteBlock=!1,i.interactId=v.nextBlockId("d:"),this.diagramBlocks[i.interactId]=i},v.addPaletteBlock=function(e,t,n,i){var r=new this.FunctionBlock(e,t,n);return r.pgroup=i,r.isPaletteBlock=!0,r.interactId=v.nextBlockId("p:"),this.paletteBlocks[r.interactId]=r,v.svg.removeChild(r.svgGroup),r.rect.right+30>v.width&&r.svgGroup.setAttribute("class","drag-group hiddenPaletteBlock"),v.tabGroups[i].appendChild(r.svgGroup),r},v.deleteChunk=function(e,t){var n=t.next,i=e.prev;null!==i&&(i.next=n),null!==n&&(n.prev=i),e.prev=null,t.next=null;var r=e.chainWidth,o=null;if(e.flowTail!==t||e.isGroupSelected())for(v.clearStates();null!==e;)o=e.next,delete v.diagramBlocks[e.interactId],v.svg.removeChild(e.svgGroup),e.svgGroup=null,e.svgRect=null,e.next=null,e.prev=null,e=o;else v.clearStates(),null!==e.prev?e.next.prev=e.prev:e.next.prev=null,(e.next=null)!==t.next?t.prev.next=t.next:t.prev.next=null,t.prev=null,delete v.diagramBlocks[e.interactId],v.svg.removeChild(e.svgGroup),e.svgGroup=null,e.svgRect=null,e.next=null,e.prev=null,delete v.diagramBlocks[t.interactId],v.svg.removeChild(t.svgGroup),t.svgGroup=null,t.svgRect=null,t.next=null,t.prev=null;null!==n&&v.animateMove(n,n.last,-r,0,10)},v.deleteBlock=function(){},v.replicateChunk=function(e,t,n,i){this.clearStates();var r=null;null!=t&&(r=t.next);var o=null,s=null,a=null;for(a=e;a!==r;)s=new this.FunctionBlock(a.left+n,a.top+i,a.name),a.newBlock=s,null===o&&(o=s),s.controllerSettings=JSON.parse(JSON.stringify(a.controllerSettings)),s.isPaletteBlock=!1,s.interactId=v.nextBlockId("d:"),this.diagramBlocks[s.interactId]=s,a=a.next;for(a=e;a!==r;)(s=a.newBlock).next=a.mapToNewBlock(a.next),s.prev=a.mapToNewBlock(a.prev),s.flowHead=a.mapToNewBlock(a.flowHead),s.flowTail=a.mapToNewBlock(a.flowTail),a=a.next;for(a=e;a!==r;){var l=a.newBlock;a.newBlock=null,a=a.next,l.fixupChainCrossBlockSvg()}for(a=o;null!==a;)a.updateSvg(),a=a.next;return o},v.FunctionBlock=function(e,t,n){this.name=n,this.funcs=r.bind(n),"function"==typeof this.funcs.defaultSettings?this.controllerSettings=this.funcs.defaultSettings():this.controllerSettings={controller:"none",data:4},this.prev=null,this.next=null,this.flowHead=null,this.flowTail=null,this.nesting=0,this.newBlock=null,this.dragging=!1,this.snapTarget=null,this.snapOpen={top:null,left:null},this.snapAction=null,this.targetShadow=null;var i=this.controllerSettings.width;void 0===i&&(i=70),this.rect={left:0,top:0,right:i,bottom:80},this.svgGroup=c.createGroup("drag-group",0,0),n.startsWith("identity")?this.svgRect=s.paletteBlockIdentity(1,"function-block identity-block",0,0,i):this.svgRect=s.paletteBlock(1,"function-block",0,0,this),this.svgGroup.appendChild(this.svgRect),this.svgCustomGroup=null,this.updateSvg(),this.dmove(e,t,!0),this.moveToFront()},v.FunctionBlock.prototype.isStartBlock=function(){return this.name.startsWith("identity")},v.FunctionBlock.prototype.updateSvg=function(){null!==this.svgCustomGroup&&this.svgGroup.removeChild(this.svgCustomGroup),this.svgCustomGroup=c.createGroup("",0,0),"function"==typeof this.funcs.svg&&this.funcs.svg(this.svgCustomGroup,this),this.svgGroup.appendChild(this.svgCustomGroup)},v.FunctionBlock.prototype.chainContainsBlock=function(e){for(var t=this.first;null!==t;){if(t===e)return!0;t=t.next}return!1},v.FunctionBlock.prototype.refreshNesting=function(){for(var e=0,t=this.first;null!==t;)null!==t.flowTail?(t.nesting=e,e+=1):(null!==t.flowHead&&(e-=1),t.nesting=e),t=t.next},v.FunctionBlock.prototype.fixupChainCrossBlockSvg=function(){this.refreshNesting();for(var e=this;null!==e;)"function"==typeof e.funcs.crossBlockSvg&&e.funcs.crossBlockSvg(e),e=e.next},Object.defineProperty(v.FunctionBlock.prototype,"first",{get:function(){for(var e=this;null!==e.prev;)e=e.prev;return e}}),Object.defineProperty(v.FunctionBlock.prototype,"last",{get:function(){for(var e=this;null!==e.next;)e=e.next;return e}}),Object.defineProperty(v.FunctionBlock.prototype,"chainWidth",{get:function(){for(var e=this,t=0;null!==e;)t+=e.rect.right-e.rect.left,e=e.next;return t}}),Object.defineProperty(v.FunctionBlock.prototype,"top",{get:function(){return this.rect.top}}),Object.defineProperty(v.FunctionBlock.prototype,"left",{get:function(){return this.rect.left}}),Object.defineProperty(v.FunctionBlock.prototype,"bottom",{get:function(){return this.rect.bottom}}),Object.defineProperty(v.FunctionBlock.prototype,"right",{get:function(){return this.rect.right}}),Object.defineProperty(v.FunctionBlock.prototype,"width",{get:function(){return this.rect.right-this.rect.left}}),Object.defineProperty(v.FunctionBlock.prototype,"height",{get:function(){return this.rect.bottom-this.rect.top}}),Object.defineProperty(v.FunctionBlock.prototype,"interactId",{get:function(){return this.svgRect.getAttribute("interact-id")},set:function(e){this.svgGroup.setAttribute("interact-id",e),this.svgRect.setAttribute("interact-id",e)}}),v.FunctionBlock.prototype.mapToNewBlock=function(e){return null==e?null:e.newBlock},v.FunctionBlock.prototype.setDraggingState=function(e){e&&null!==this.prev&&(this.prev.next=null,this.prev=null);for(var t=this;null!==t;)t.dragging=e,t=t.next},v.FunctionBlock.prototype.moveToFront=function(){v.svg.insertBefore(this.svgGroup,v.svgCeiling)},v.FunctionBlock.prototype.markSelected=function(e){e?(this.moveToFront(),this.svgRect.classList.add("selected-block"),null!==this.flowHead&&this.flowHead.svgRect.classList.add("selected-block"),null!==this.flowTail&&this.flowTail.svgRect.classList.add("selected-block")):this.svgRect.classList.remove("selected-block")},v.FunctionBlock.prototype.isSelected=function(){return this.svgRect.classList.contains("selected-block")},v.FunctionBlock.prototype.selectionEnd=function(){for(var e=this;null!==e.next&&e.next.isSelected();)e=e.next;return e},v.FunctionBlock.prototype.isLoopHead=function(){return null!==this.flowTail},v.FunctionBlock.prototype.isLoopTail=function(){return null!==this.flowHead},v.FunctionBlock.prototype.isCommented=function(){return this.svgRect.classList.contains("commented")},v.FunctionBlock.prototype.isIdentity=function(){return this.name.includes("identity")},v.FunctionBlock.prototype.isIsolatedLoop=function(){if(this.isLoopHead()&&this.isSelected()){if(null!==this.prev&&this.prev.isSelected())return!1;if(null!==this.flowTail.next&&this.flowTail.next.isSelected())return!1;if(this.next!==this.flowTail&&this.next.isSelected())return!1}if(this.isLoopTail()&&this.isSelected()){if(null!==this.next&&this.next.isSelected())return!1;if(null!==this.flowHead.prev&&this.flowHead.prev.isSelected())return!1;if(this.prev!==this.flowHead&&this.prev.isSelected())return!1}return!(!this.isLoopHead()&&!this.isLoopTail()||!this.isSelected())},v.FunctionBlock.prototype.isGroupSelected=function(){var e=!1,t=!1;return null!==this.next&&(e=this.next.isSelected()),null!==this.prev&&(t=this.prev.isSelected()),this.isSelected()&&(e||t)},v.FunctionBlock.prototype.isOnScreen=function(){return null!==this.rect&&0<=this.rect.left+this.width&&this.rect.right-this.width<=v.width&&0<=this.rect.top+this.height&&this.rect.bottom-this.height<=v.height},v.FunctionBlock.prototype.hilite=function(e){e&&this.moveToFront()},v.FunctionBlock.prototype.dmove=function(e,t,n,i){var r=this;for(void 0===i&&(i=null);null!==r;){var o=r.rect;if(o.left+=e,o.top+=t,o.right+=e,o.bottom+=t,n&&(o.top=Math.round(o.top),o.left=Math.round(o.left),o.bottom=Math.round(o.bottom),o.right=Math.round(o.right)),r.svgGroup&&c.translateXY(r.svgGroup,o.left,o.top),r===i)break;r=r.next}},v.intersectingArea=function(e,t){var n=Math.min(e.right,t.right)-Math.max(e.left,t.left);if(n<0)return 0;var i=Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top);return i<0?0:n*i},v.FunctionBlock.prototype.hilitePossibleTarget=function(){var t=this,n=null,i=0,r=0,e=null,o=null,s=this.width;v.forEachDiagramBlock(function(e){e===t||e.dragging||(o={top:e.top,bottom:e.bottom,left:e.left-.5*s,right:e.right-.5*s},null===e.prev&&(o.left-=.5*s),null===e.next&&(o.right+=1.5*s),i=v.intersectingArea(t.rect,o),r<i&&(r=i,n=e))}),null!==n&&(t.left<=n.left?null!==n.prev?t.isStartBlock()||(e="insert"):n.isStartBlock()||(e="prepend"):t.name.includes("identity")||(e="append"));var a=null,l=null;if(null===e&&(e="outsnap",null!==n)){var c=n.rect.bottom-this.rect.top;a=40*Math.round((this.rect.top+c)/40),l=40*Math.round(this.rect.left/40),n=null}return null===a&&null===l&&(a=40*Math.round(this.rect.top/40),l=40*Math.round(this.rect.left/40)),this.snapTarget!==n||this.snapAction!==e?(null!==this.snapTarget&&this.removeTargetShadows(),this.snapTarget=n,this.snapAction=e,null!==n&&this.insertTargetShadows(n,e)):"outsnap"!==e||this.snapOpen.top===a&&this.snapOpen.left===l&&this.snapAction===e||(this.removeTargetShadows(),this.snapAction=e,this.snapOpen={top:a,left:l},this.insertTargetShadows(this.snapOpen,e)),n},v.FunctionBlock.prototype.insertTargetShadows=function(e,t){var n=this,i=e.top,r=0;if("prepend"===t)r=e.left-this.chainWidth;else if("insert"===t)r=e.left-20,i-=25;else if("append"===t)r=e.right;else{if("outsnap"!==t)return;r=40*Math.round(this.rect.left/40),i=40*Math.round(this.rect.top/40)}for(var o=null;null!==n;)o="outsnap"===t?s.paletteBlock(1,"shadow-block shadow-block-outsnap",r,i,n):s.paletteBlock(1,"shadow-block",r,i,n),v.svg.insertBefore(o,v.background.nextSibling),n.targetShadow=o,r+=n.width,n=n.next},v.FunctionBlock.prototype.removeTargetShadows=function(){for(var e=this,t=[];null!==e;){var n=e.targetShadow;null!==n&&(t.push(n),"outsnap"===e.snapAction?n.setAttribute("class","shadow-block-leave shadow-block-leave-outsnap"):n.setAttribute("class","shadow-block-leave"),e.targetShadow=null),e=e.next}setTimeout(function(){t.forEach(function(e){null!==e.parentNode&&v.svg.removeChild(e)})},1e3);for(var i=document.getElementsByClassName("shadow-block"),r=i.length-1;0<=r;r--)i[r].parentNode.removeChild(i[r])},v.FunctionBlock.prototype.moveToPossibleTarget=function(){var e=this.last,t=0,n=0,i=0;if(o(null===this.prev,"err1"),o(null===e.next,"err2"),null!==this.snapTarget){if("prepend"===this.snapAction)o(null===this.snapTarget.prev,"err3"),t=this.snapTarget.left-this.chainWidth,e.next=this.snapTarget,this.snapTarget.prev=e;else if("append"===this.snapAction)o(null===this.snapTarget.next,"err4"),t=this.snapTarget.right,this.prev=this.snapTarget,this.snapTarget.next=this;else if("insert"===this.snapAction){o(null!==this.snapTarget.prev,"err5"),t=this.snapTarget.left;var r=this.chainWidth;e.next=this.snapTarget,this.prev=this.snapTarget.prev,(this.snapTarget.prev.next=this).snapTarget.prev=e,v.animateMove(this.snapTarget,this.snapTarget.last,r,0,10)}n=t-this.left,i=this.snapTarget.top-this.top,v.animateMove(this,e,n,i,10)}else null!==this.snapOpen&&(n=Math.round(this.snapOpen.left-this.rect.left),i=Math.round(this.snapOpen.top-this.rect.top),v.animateMove(this,e,n,i,10));this.hilite(!1),this.snapTarget=null,this.snapAction=null,this.snapOpen={top:null,left:null}},v.animateMove=function(e,t,n,i,r){var o={frame:r,adx:n/r,ady:i/r,chunkStart:e,chunkEnd:t};v.animateMoveCore(o)},v.animateMoveCore=function(e){var t=e.frame;e.chunkStart.dmove(e.adx,e.ady,1===t,e.chunkEnd),e.chunkStart.fixupChainCrossBlockSvg(),1<t?(e.frame=t-1,requestAnimationFrame(function(){v.animateMoveCore(e)})):(v.audio.playSound(v.audio.shortClick),e.chunkStart.removeTargetShadows())},v.clearDiagramBlocks=function(){v.internalClearDiagramBlocks()},v.internalClearDiagramBlocks=function(){v.forEachDiagramBlock(function(e){v.svg.removeChild(e.svgGroup),e.svgGroup=null,e.svgCustomGroup=null,e.svgRect=null,e.next=null,e.prev=null}),v.diagramBlocks={}},v.findSelectedChunk=function(){var t=null;return v.forEachDiagramBlock(function(e){null===t&&e.isSelected()&&(t=e)}),t},v.findChunkStart=function(e){for(var t=e;t.isSelected()&&null!==t.prev&&t.prev.isSelected();)t=t.prev;return t},v.findInsertionPoint=function(){var i=null,r=Math.round(v.defaultBlockLoc[0]),o=Math.round(v.defaultBlockLoc[1]);for(v.forEachDiagramBlock(function(e){var t=e.top,n=e.left;t===o&&n===r&&(i=e)});null!==i&&null!==i.next;)i=i.next;return i},v.autoPlace=function(e){var t=v.findInsertionPoint();e=v.replicateChunk(e,null,0,0);var n=v.defaultBlockLoc[0],i=v.defaultBlockLoc[1],r=Math.round(n-e.left),o=Math.round(i-e.top);if(null!==t&&e.isIdentity())return e.dmove(r,o),void v.identityAutoPlace(e);null===t?e.dmove(r,o):(e.dmove(r+t.right-n,o),(t.next=e).prev=t)},v.identityAutoPlace=function(t){v.forEachDiagramBlock(function(e){if(100<v.intersectingArea(e,t)&&e!==t&&t.bottom+120<v.height-150)return t.dmove(0,120),void v.identityAutoPlace(t);t.bottom+120>v.height-100&&v.deleteChunk(t,t)})},v.keyEvent=function(e){var t=(e=e||window.event).which||e.keyCode||0,n=e.ctrlKey?e.ctrlKey:17===t;if(86===t&&n)p.trace("Ctrl + V Pressed !");else if(67===t&&n){p.trace("Ctrl + C Pressed !");var i=[];v.forEachDiagramBlock(function(e){e.isSelected()&&i.push(e)});var r=document.createElement("textarea");if(r.style.position="fixed",r.style.top=0,r.style.left=0,r.style.width="2em",r.style.height="2em",r.style.padding=0,r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",0<=i.length){r.value=d.chunkToText(v.findChunkStart(i[0]),null,""),p.trace(r),document.body.appendChild(r),r.select();try{var o=document.execCommand("copy")?"successful":"unsuccessful";p.trace("Copying text command was "+o)}catch(e){p.trace("Oops, unable to copy")}}document.body.removeChild(r)}else if(8===t)if(v.components.blockSettings.isOpen())v.components.blockSettings.deleteGroup();else{var s=v.findSelectedChunk();null!==s&&v.deleteChunk(s,s.selectionEnd())}else if(49===t)v.loadDoc("docA");else if(50===t)v.loadDoc("docB");else if(51===t)v.loadDoc("docC");else if(52===t)v.loadDoc("docD");else if(53===t)v.loadDoc("docE");else if(80===t)h.playAll();else if(83===t)h.stopAll();else if(88===t){var a=[];if(v.forEachDiagramBlock(function(e){e.isSelected()&&a.push(e)}),0!==a.length){var l=v.replicateChunk(a[0],a[a.length-1],0,0),c=-140;l.top<140&&(c=140),v.animateMove(l,l.last,0,c,20)}}else if(n&&65===t){var u=null;for(v.forEachDiagramBlock(function(e){e.isSelected()&&(u=e)}),v.clearStates();null!==u.next;)u.markSelected(!0),u=u.next;for(;null!==u;)u.markSelected(!0),u=u.prev}},document.body.addEventListener("keydown",v.keyEvent,!1),v.configInteractions=function(){var d=v;l(".drag-delete").on("down",function(){var e=d.elementToBlock(event.target);null!==e&&(d.clearStates(),d.deleteChunk(e,e.last))}),l(".editor-background").on("down",function(e){try{d.clearStates(),a.startSelectionBoxDrag(e)}catch(e){p.trace("exception in drag selection")}}),l(".drag-group").on("down",function(e){v.pointerDownObject=e.target}).on("tap",function(e){var t=d.elementToBlock(e.target);null!==t&&t.isPaletteBlock?v.autoPlace(t):(u.reset(),d.components.blockSettings.tap(t))}).on("up",function(e){var t=d.elementToBlock(e.target);t.rect.top>v.height-100&&!t.isPaletteBlock&&(e.interaction.stop(),t.setDraggingState(!1),t.isLoopHead()?(t.next.markSelected(!0),t.markSelected(!0),v.deleteChunk(t,t.last)):t.isLoopTail()?v.deleteChunk(t.flowHead,t.last):v.deleteChunk(t,t.last))}).on("move",function(e){try{var t=e.interaction,n=d.elementToBlock(e.target);if("tail"===n.name&&(n=n.flowHead),t.pointerIsDown&&!t.interacting()){if(v.pointerDownObject===e.target){var i=(n=v.findChunkStart(n)).svgGroup,r=null!==n.next&&null!==n.prev,o=n,s=n;if(0<n.nesting&&r&&!n.isGroupSelected())o=n.next,s=n.prev,n.next.prev=s,n.prev.next=o,n.next=null,(n.prev=null)!==o&&v.animateMove(o,o.last,-n.width,0,10);else if(0<n.nesting&&r&&n.isGroupSelected()){for(s=(o=n).prev;null!==o.next&&o.next.isSelected();)o=o.next;var a=o.next;(o.next.prev=s).next=o.next,o.next=null,(n.prev=null)!==o&&v.animateMove(a,a.last,-n.chainWidth,0,10)}if(n.isPaletteBlock||e.shiftKey){var l=0,c=0;if(n.isPaletteBlock){var u=e.target.getBoundingClientRect();l=u.x-n.left,c=u.y-n.top}i=(n=d.replicateChunk(n,null,l,c)).svgGroup}n.setDraggingState(!0),v.clearStates(),t.start({name:"drag"},e.interactable,i)}}else v.pointerDownObject=null}catch(e){p.trace("Exception in move event",e)}}).draggable({manualStart:!0,restrict:{restriction:d.svg,endOnly:!0,elementRect:{left:-.2,top:-.2,right:1.2,bottom:2.4}},inertia:{resistance:20,minSpeed:50,endSpeed:1},max:1/0,onstart:function(){},onend:function(e){var t=d.elementToBlock(e.target);null!==t&&(t.dragging&&(t.moveToPossibleTarget(),t.setDraggingState(!1)),v.moveToFront(t,v.dropAreaGroup))},onmove:function(e){var t=d.elementToBlock(e.target);if(null!==t&&t.dragging&&(v.moveToFront(t,v.svgCeiling),t.dmove(e.dx,e.dy,!0),null!==t.hilitePossibleTarget())){var n=e.interaction.inertiaStatus;null!=n&&n.active&&(t.moveToPossibleTarget(),t.setDraggingState(!1))}}})},v.moveToFront=function(e,t){for(var n=e;null!==n;)v.svg.insertBefore(n.svgGroup,t),n=n.next},v.blocksOnScreen=function(){var t=!1;return v.forEachDiagramBlock(function(e){e.isOnScreen()&&(t=!0)}),0!==Object.keys(v.diagramBlocks).length&&t},v.sizePaletteToWindow=function(){var e=v.width,t=v.height;c.resizeRect(v.background,e,t),v.windowRect={left:0,top:0,right:e,bottom:t};var n=1;t<250?n=.5:t<500&&(n=t/500);var i=t-100*n;c.translateXY(v.dropAreaGroup,0,i);for(var r=0;r<v.dropAreaGroup.childNodes.length;r++){var o=v.dropAreaGroup.childNodes[r],s=o.childNodes[0];c.resizeRect(s,e/n,100);var a="scale("+n+")";o.setAttribute("transform",a)}},v.createTabSwitcherButton=function(){var e=c.createGroup("tabSwitcher",0,0),t=c.createCircle("tabSwitcherRing",50,50,40,0);return e.appendChild(t),e},v.buildTabs=function(){for(var e=c.createGroup("dropAreaGroup",0,0),t=["Start","Action","Control"],n=0;n<3;n++){var i=c.createGroup("",0,0),r="area"+String(n+1),o=c.createRect("dropArea "+r,0,0,v.width,100,0),s=c.createRect("dropArea "+r,10+160*n,-30,150,40,5),a=c.createText("dropArea svg-clear",20+160*n,-10,t[n]);i.appendChild(o),i.appendChild(s),i.appendChild(a),e.appendChild(i)}l(".dropArea").on("down",function(e){var t=e.target.parentNode.getAttribute("group");v.switchTabs(t)}),this.svg.insertBefore(e,v.svgCeiling),this.dropAreaGroup=e,v.tabGroups=[],v.tabGroups.start=v.dropAreaGroup.childNodes[0],v.tabGroups.fx=v.dropAreaGroup.childNodes[1],v.tabGroups.control=v.dropAreaGroup.childNodes[2],v.tabGroups.start.setAttribute("group","start"),v.tabGroups.fx.setAttribute("group","fx"),v.tabGroups.control.setAttribute("group","control")},v.switchTabs=function(e){this.clearStates();var t=v.tabGroups[e];this.dropArea=t,v.dropAreaGroup.appendChild(t),v.showTabGroup(e)},v.showTabGroup=function(t){v.forEachPalette(function(e){e.pgroup===t?e.svgGroup.setAttribute("class","drag-group"):e.svgGroup.setAttribute("class","hiddenPaletteBlock")})},v.resize=function(){v.width=window.innerWidth,v.height=window.innerHeight,v.sizePaletteToWindow(),u.resize(v.width,v.height)},v.addPalette=function(e){var t=30,n=30,i="start";v.buildTabs();for(var r=e.blocks,o=0;o<r.length;o++){var s=r[o].name,a=r[o].group;a!==i&&(t=30,n=15,i=a);var l=this.addPaletteBlock(t,10,s,a);if("loop"===s){var c=this.addPaletteBlock(l.right,10,"tail","control");(((l.next=c).prev=l).flowTail=c).flowHead=l,c.fixupChainCrossBlockSvg()}t+=l.chainWidth+n}v.switchTabs("start")},v)},{"./appMain.js":18,"./conductor.js":38,"./fblock-settings.js":41,"./overlays/actionDots.js":43,"./teakselection":51,"./teaktext.js":52,"./trashBlocks.js":53,assert:2,"icons.js":56,"interact.js":10,"log.js":57,"svgbuilder.js":59}],51:[function(e,t,n){"use strict";var i,a,l;t.exports=(i=e("interact.js"),a=e("svgbuilder.js"),(l={}).selectionSvg=null,l.currentChain=null,l.init=function(s){l.tbe=s,l.interactable=i(".selection-rect").draggable({manualStart:!0,max:1/0,onstart:function(e){l.x0=e.clientX,l.y0=e.clientY,a.translateXY(l.selectionSvg,e.clientX,e.clientY),l.currentChain=null},onend:function(){null!==l.selectionSvg&&(s.svg.removeChild(l.selectionSvg),l.selectionSvg=null,l.currentChain=null)},onmove:function(e){var t=0,n=0,i=0,r=0;i=e.clientX<l.x0?(t=e.clientX,l.x0-e.clientX):(t=l.x0,e.clientX-l.x0),r=e.clientY<l.y0?(n=e.clientY,l.y0-e.clientY):(n=l.y0,e.clientY-l.y0),i+=20,r+=20,a.translateXY(l.selectionSvg,t,n),a.resizeRect(l.selectionSvg,i,r);var o={left:t,top:n,right:t+i,bottom:n+r};l.checkForSelectedBlocks(o,s)}})},l.startSelectionBoxDrag=function(e){null===l.selectionSvg&&(l.selectionSvg=a.createRect("selection-rect",-10,-10,20,20,5),l.tbe.svg.insertBefore(l.selectionSvg,l.tbe.background.nextSibling),e.interaction.start({name:"drag"},l.interactable,l.selectionSvg))},l.checkForSelectedBlocks=function(n,i){var r=[];i.forEachDiagramBlock(function(e){if(0<i.intersectingArea(n,e.rect)){r.push(e);var t=e;if(e.isLoopHead())for(;null!==t&&(r.push(t),t!==e.flowTail);)t=t.next;else if(e.isLoopTail())for(;null!==t&&!t.isLoopHead()&&(r.push(t),t!==e.flowHead);)t=t.prev}}),0===r.length?(l.currentChain=null,r=[]):null===l.currentChain&&(l.currentChain=i.findChunkStart(r[0])),i.forEachDiagramBlock(function(e){r.includes(e)&&l.currentChain.chainContainsBlock(e)?e.markSelected(!0):null===e.flowHead||r.includes(e.flowHead)?null===e.flowHead&&e.markSelected(!1):e.markSelected(!1)})},l)},{"interact.js":10,"svgbuilder.js":59}],52:[function(e,t,n){"use strict";var c,i,u;t.exports=(c=e("log.js"),i=e("teak"),u={blocksToText:function(e){var t="(\n";return e(function(e){t+="  (chain",t+=" x:"+e.left+" y:"+e.top+" (\n",t+=u.chunkToText(e,null,"    "),t+="  ))\n"}),t+=")\n"},chunkToText:function(e,t,n){for(var i=e,r="";i!==t;)r+=n+"("+i.name,null!==i.controllerSettings&&(r+=" "+u.blockParamsToText(i.controllerSettings.data)),null!==i.flowTail&&(r+=" (\n",r+=u.chunkToText(i.next,i.flowTail,n+"  "),i=i.flowTail,r+=n+")"),r+=")\n",i=i.next;return r},blockParamsToText:function(e){var t="",n="";for(var i in e){var r=e[i];t+=n+i+":"+this.valueToText(r),n=" "}return t},valueToText:function(e){var t="";if(e.constructor===Array){var n="",i=0;for(t="(",i=0;i<e.length;i+=1)t+=n+this.valueToText(e[i]),n=" ";t+=")"}else t="string"==typeof e?"'"+String(e)+"'":String(e);return t},textToBlocks:function(e,t){var n=i.parse(t,{},function(e){return e});u.loadJsoTeak(e,n)},loadJsoTeak:function(e,t){if(Array.isArray(t)){var n=0;for(n=0;n<t.length;n++){var i=t[n];if("chain"!==i._0)return void c.trace(" unrecognized chain section");for(var r=i.x,o=i.y,s=i._3,a=u.loadJsoTeakBlocks(e,s,r,o,null),l=a;null!==l;)l.updateSvg(),l=l.next;a.fixupChainCrossBlockSvg()}}else c.trace(" unrecognized teak file")},loadJsoTeakBlocks:function(e,t,n,i,r){var o=1,s=null;for(o=0;o<t.length;o++){var a=t[o]._0,l=e.addBlock(n,i,a);null===s&&(s=l),null!==r&&((r.next=l).prev=r),n=(r="loop"===a?this.loadLoop(e,l,t[o]):(this.loadBlockDetails(l,t[o]),l)).right}return s},loadLoop:function(e,t,n){var i=n._2,r=t.right,o=t.top,s=u.loadJsoTeakBlocks(e,i,r,o,t),a=null;null!==s?a=s.last:a=t;r=a.right;var l=e.addBlock(r,o,"tail");return(a.next=l).prev=a,(t.flowTail=l).flowHead=t,l},loadBlockDetails:function(e,t){for(var n in t)t.hasOwnProperty(n)&&"_0"!==n&&(e.controllerSettings.data[n]=t[n])}})},{"log.js":57,teak:14}],53:[function(e,t,n){"use strict";t.exports=function(s){s.forEachDiagramBlock(function(e){var t=e.left-s.width/2,n=e.top-s.height/2,i=Math.sqrt(t*t+n*n),r=t/i*8,o=n/i*8;e.animateState={adx:r,ady:o,frame:100,count:0}}),s.audio.playSound(s.audio.poof),s.forEachDiagramBlock(function(e){!function e(t,n){if(void 0===t[0]){var i=t.animateState.frame;t.dmove(t.animateState.adx,t.animateState.ady,1===i,t),t.animateState.count+=1,n.blocksOnScreen()&&0<i?(t.animateState.frame=i-1,requestAnimationFrame(function(){e(t,n)})):n.clearDiagramBlocks()}}(e,s)})}},{}],54:[function(e,t,n){"use strict";t.exports={findCSSSheet:function(){return null},findCSSRule:function(e){for(var t=document.styleSheets[2],n=t.cssRules?t.cssRules:t.rules,i=-1,r=0;r<n.length;r++)if(n[r].selectorText===e){i=r;break}return n[i]},setFontSize:function(e,t){e.fontSize=t.toString()+"px"},setHeight:function(e,t){e.height=t.toString()+"px"},calcSreenScale:function(e,t){var n=1;return(t<500||e<700)&&(t<350&&(t=350),e<500&&(e=500),n=Math.min(t/500,e/700)),n}}},{}],55:[function(e,t,n){"use strict";t.exports={play:"",pause:"",stop:"",file:"",trash:"",folder:"",undo:"",redo:"",settings:"",copy:"",paste:"",page:"",edit:"",save:"",gamepad:"",debug:"",camera:"",sync:"",spinner:"",bluetooth:"",link:"",linking:"",cogs:"",connect:"",robot:"",temp:"",loop:""}},{}],56:[function(e,t,n){"use strict";var p,h,f;t.exports=(p={},h=e("svgbuilder.js"),f=h.pathBuilder,p.accelerometer=function(e,t,n,i){var r="";r+=f.move(n,i),r+=f.vline(-20),r+=f.hline(-5),r+=f.line(6,-10),r+=f.line(6,10),r+=f.hline(-5),r+=f.vline(20),r+=f.line(15,10),r+=f.line(5,-5),r+=f.line(2,11),r+=f.line(-11,-2),r+=f.line(5,-5),r+=f.line(-15,-10),r+=f.move(-3,0),r+=f.line(-15,10),r+=f.line(5,5),r+=f.line(-11,2),r+=f.line(2,-11),r+=f.line(5,5),r+=f.line(15,-10);var o=h.createPath(t,r);return o.setAttribute("transform","scale("+e+")"),o},p.sad55=[0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,1,1,0,1,0,0,0,1],p.smile55=[0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,1,0,1,1,1,0],p.t55=[1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0],p.numeric55=[0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,1,0],p.pictureNumeric=function(e,t,n){return p.picture(e,t,n,p.numeric55)},p.pictureSmile=function(e,t,n){return p.picture(e,t,n,p.smile55)},p.tbot=function(e,t,n,i,r){var o=h.createGroup("tbot",t,n);return o.appendChild(h.createRect("tbot-select",-8,-7,135,135,3)),o.appendChild(h.createRect("tbot-device",12,0,96,120,3)),o.appendChild(h.createRect("svg-clear tbot-device-head",22,0,76,50,0)),o.appendChild(h.createRect("tbot-device-side",0,0,10,120,3)),o.appendChild(h.createRect("tbot-device-side",110,0,10,120,3)),o.appendChild(h.createText("svg-clear tbot-device-name",60,85,i)),o.appendChild(h.createText("fas svg-clear tbot-device-name",60,110,"")),o.appendChild(p.picture(e,45,10,r)),o},p.picture=function(e,t,n,i){var r=i,o=h.createGroup("svg-clear",26+t,15+n),s=h.createRect("svg-clear block-picture-board",t-7,n-7,42,42,4);o.appendChild(s);for(var a=0;a<5;a++)for(var l=0;l<5;l++){var c="";c=0===r[l+5*a]?"svg-clear block-picture-led-off":"svg-clear block-picture-led-on";var u=h.createCircle(c,t+7*l,n+7*a,3);o.appendChild(u)}return o.setAttribute("transform","scale("+e+")"),o},p.sound=function(e,t,n){var i=h.createGroup("svg-clear",0,0),r="";r=f.move(t,n),r+=f.hline(9),r+=f.line(10,-10),r+=f.vline(30),r+=f.line(-10,-10),r+=f.hline(-9),r+=f.vline(-10),r+=f.close();var o=h.createPath("svg-clear block-stencil-fill",r);i.appendChild(o),r="",r=f.move(t+25,n),r+=f.arc(12,90,0,1,0,10),r+=f.move(5,-15),r+=f.arc(20,90,0,1,0,20),r+=f.move(5,-25),r+=f.arc(28,90,0,1,0,30);var s=h.createPath("svg-clear block-stencil",r);return s.setAttribute("stroke-linecap","round"),i.appendChild(s),i.setAttribute("transform","scale("+e+")"),i},p.wait=function(e,t,n){var i=h.createGroup("svg-group",0,0),r="";r=f.move(t,n),r+=f.vline(-7),r+=f.arc(19,340,1,1,-12,4),r+=f.move(10.6,16.5),r+=f.arc(1.3,300,0,0,2.2,-.8),r+=f.line(-7.8,-10.5),r+=f.close();var o=h.createPath("svg-clear block-stencil",r);return i.appendChild(o),i.setAttribute("transform","scale("+e+")"),i},p.calcbutton=function(e,t,n,i,r,o,s){var a=h.createGroup("",0,0),l=h.createRect("calc-button "+s,t,n,i,r,r/2),c=h.createText("svg-clear "+s+"-text",t+i/2,n+28,o);return c.setAttribute("text-anchor","middle"),a.appendChild(l),a.appendChild(c),a},p.variable=function(e,t,n,i){var r=h.createGroup("svg-clear",0,0),o="";o+=f.move(11,5),o+=f.hline(36),o+=f.line(7.5,18),o+=f.line(-7.5,18),o+=f.hline(-36),o+=f.line(-7.5,-18),o+=f.line(7,-18),o+=f.close();var s=h.createPath("svg-clear vars-poly",o);r.appendChild(s);var a=h.createText("svg-clear vars-poly-text",29,34,i);a.setAttribute("text-anchor","middle"),r.appendChild(a),r.setAttribute("style","transform: scale("+e+");");var l=h.createGroup("svg-clear",t,n);return l.appendChild(r),l},p.motor=function(e,t,n){var i=h.createGroup("svg-clear",0,0),r=h.createCircle("svg-clear block-motor-body",40,30,20);i.appendChild(r);var o=h.createCircle("svg-clear block-motor-shaft",40,30,4);return i.appendChild(o),1!==e&&i.setAttribute("style","transform: translate("+t+"px, "+n+"px) scale("+e+");"),i},p.motorWithDial=function(e,t,n,i){var r=h.createGroup("svg-clear",0,0),o=p.motor(1,t,n);r.appendChild(o);var s=i/100*180,a=Math.cos(s*(Math.PI/180)),l=Math.sin(s*(Math.PI/180)),c=1;s<0&&(c=0);var u="";u=f.move(40,30),u+=f.line(0,-20),u+=f.arc(20,s,0,c,20*l,-(20*a-20)),u+=f.close();var d=h.createPath("svg-clear block-stencil-fill-back",u);return r.appendChild(d),u="",u=f.move(37,30),u+=f.line(2.5,-19),u+=f.hline(1),u+=f.line(2.5,19),u+=f.arc(3,180,1,1,-6,0),u+=f.close(),(d=h.createPath("svg-clear block-stencil-fill",u)).setAttribute("transform","rotate("+s+" 40 30)"),r.appendChild(d),r.setAttribute("style","transform: translate("+t+"px, "+n+"px) scale("+e+");"),r},p.paletteBlock=function(e,t,n,i,r){var o=r.width;if(r.name.includes("identity"))return p.paletteBlockIdentity(e,t,n,i,o);var s="";s+=f.move(n,i),s+=f.hline(o),s+=f.line(15,40),s+=f.line(-15,40),s+=f.hline(-o),s+=f.line(15,-40),s+=f.line(-15,-40),s+=f.close();var a=h.createPath(t,s);return a.setAttribute("transform","scale("+e+")"),a},p.paletteBlockIdentity=function(e,t,n,i,r){var o="";o+=f.move(n,i),o+=f.hline(r),o+=f.line(15,40),o+=f.line(-15,40),o+=f.hline(-r),o+=f.vline(-80),o+=f.close();var s=h.createPath(t,o);return s.setAttribute("transform","scale("+e+")"),s},p)},{"svgbuilder.js":59}],57:[function(e,t,n){"use strict";var i;t.exports=i={buffer:"",traceHL:function(){var e=Array.prototype.slice.call(arguments);i.traceCore(e)},trace:function(){var e=Array.prototype.slice.call(arguments);i.traceCore(e)},error:function(){var e=Array.prototype.slice.call(arguments);e.unshift("e:"),i.traceCore(e)},traceCore:function(e){for(var t="",n=0;n<e.length;++n)null!==e[n]?t=t+e[n].valueOf()+" ":t+="null ";t+="\n",i.buffer+=t,console.log.apply(console,e)}}},{}],58:[function(e,t,n){"use strict";var i,h,f,v,r,o;t.exports=(i=e("interact.js"),h=e("svgbuilder.js"),f=e("editStyle.js"),v=e("icons.js"),r=e("./../variables.js"),(o={Class:function(e,t){this.svg=e,this.name=t,this.vvalue=r.v[t],this.dragStart=0,this.vDomain=200}}).Class.prototype.buildSvg=function(e,t,n,i,r){var o=t/2,s=i-o-n;this.vRange=s-2*o,this.hCenter=e,this.top=n,this.width=t;var a=48*r,l=.8*a,c=1.4*a,u=o-15,d=v.variable(r,e-60*r,n-c,this.name);this.svg.appendChild(d),this.text=h.createText("slider-text",this.hCenter+45*r,n-l,"0"),f.setFontSize(this.text.style,a),this.svg.appendChild(this.text);var p=h.createRect("slider-groove",e-o,n,t,s,o);this.svg.appendChild(p),this.thumb=h.createCircle("slider-thumb",e,n,u),this.thumb.setAttribute("thumb",this.name),this.svg.appendChild(this.thumb),this.updateSvg(),this.interact()},o.Class.prototype.updateSvg=function(){var e=this.vRange*((this.vvalue.value+100)/200),t=this.top+this.vRange+this.width/2;this.thumb.setAttribute("cy",t-e),this.text.textContent=this.vvalue.value.toString()},o.Class.prototype.interact=function(){var t=this;i(".slider-thumb",{context:t.thumb}).draggable({max:1/0}).on("dragstart",function(e){t.event(e)}).on("dragmove",function(e){t.event(e)}).on("dragend",function(e){t.event(e)})},o.Class.prototype.event=function(e){var t=this.vDomain/this.vRange;"dragstart"===e.type?this.dragStart=this.vvalue.value:"dragmove"===e.type?this.vvalue.set(this.dragStart+t*(e.y0-e.pageY)):"dragend"===e.type&&this.vvalue.set(0),this.updateSvg()},o)},{"./../variables.js":61,"editStyle.js":54,"icons.js":56,"interact.js":10,"svgbuilder.js":59}],59:[function(e,t,n){"use strict";var a;t.exports=a={ns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",pathBuilder:{move:function(e,t){return"m"+e+" "+t+" "},hline:function(e){return"h"+e+" "},vline:function(e){return"v"+e+" "},line:function(e,t){return"l"+e+" "+t+" "},arc:function(e,t,n,i,r,o){var s="a"+e+" "+e+" "+t;return s+=" "+n+" "+i+" "+r+" "+o+" "},close:function(){return"z "}},createUse:function(e,t){var n=document.createElementNS(a.ns,"use");return n.setAttribute("class",e),n.setAttributeNS(a.xlinkns,"xlink:href",t),n},resizeRect:function(e,t,n){e.setAttribute("width",String(t)+"px"),e.setAttribute("height",String(n)+"px")},translateXY:function(e,t,n){e.setAttribute("transform","translate ("+String(t)+" "+String(n)+")")},createRect:function(e,t,n,i,r,o){var s=document.createElementNS(a.ns,"rect");return s.setAttribute("class",e),s.setAttribute("x",t),s.setAttribute("y",n),this.resizeRect(s,i,r),void 0!==o&&(s.setAttribute("rx",o),s.setAttribute("ry",o)),s},createCircle:function(e,t,n,i){var r=document.createElementNS(a.ns,"circle");return r.setAttribute("class",e),r.setAttribute("cx",t),r.setAttribute("cy",n),r.setAttribute("r",i),r},createGroup:function(e,t,n){var i=document.createElementNS(a.ns,"g");return i.setAttribute("class",e),i.setAttribute("transform","translate ("+t+" "+n+")"),i},createText:function(e,t,n,i){var r=document.createElementNS(a.ns,"text");return r.setAttribute("class",e),r.setAttribute("x",t),r.setAttribute("y",n),r.textContent=i,r},createPath:function(e,t){var n=document.createElementNS(a.ns,"path");return n.setAttribute("class",e),n.setAttribute("d",t),n}}},{}],60:[function(e,t,n){"use strict";var i,r,o,s,a,l;t.exports=(i=e("interact.js"),r=e("svgbuilder.js"),o=e("icons.js"),s=e("./../cxn.js"),a=e("fastr.js"),(l={Class:function(e,t,n,i,r){this.name=i,this.x=t,this.y=n,this.face=r,this.status=s.statusEnum.NOT_THERE,this.buildSvg(e)}}).Class.prototype.releaseSvg=function(){this.selectionsvg=null,this.tbotsvg=null,this.cxntext=null},l.Class.prototype.buildSvg=function(e){this.svg=e;var t=this.name.toUpperCase();this.tbotsvg=this.svg.appendChild(o.tbot(1,this.x,this.y,t,this.face)),this.selectionsvg=this.tbotsvg.children[0],this.cxntext=this.tbotsvg.children[6],this.setConnectionStatus(this.status),this.interact()},l.Class.prototype.setLocation=function(e,t){this.x=e,this.y=t,null!==this.tbotsvg&&r.translateXY(this.tbotsvg,e,t)},l.Class.prototype.setSelected=function(e){this.selected=e,null!==this.selectionsvg&&(this.selectionsvg.style.display=e?"block":"none")},l.Class.prototype.setConnectionStatus=function(e){var t="";(this.status=e)===s.statusEnum.CONNECTED?(this.setSelected(!0),t=a.link):e===s.statusEnum.CONNECTING?(this.setSelected(!0),t=a.sync):e===s.statusEnum.BEACON?(this.setSelected(!1),t=""):e===s.statusEnum.NOT_THERE&&(this.setSelected(!1),t=""),null!==this.cxntext&&(this.cxntext.textContent=t)},l.Class.prototype.interact=function(){var t=this;i(".tbot",{context:this.tbotsvg}).on("down",function(e){t.event(e)})},l.Class.prototype.event=function(e){"down"===e.type&&"function"==typeof this.onclick&&this.onclick(this)},l)},{"./../cxn.js":39,"fastr.js":55,"icons.js":56,"interact.js":10,"svgbuilder.js":59}],61:[function(e,t,n){"use strict";var o;t.exports=((o={vars:{A:{rw:!0,source:"variable"},B:{rw:!0,source:"variable"},C:{rw:!0,source:"variable"}},addOptions:function(e,t){var n=0;for(var i in o.vars){var r=document.createElement("option");r.text=i,r.value=i,e.add(r),i===t&&(e.selectedIndex=n),n+=1}},getSelected:function(e){var t=e.selectedIndex,n=e.options[t];return console.log("selected item",n.value),n.value},Var:function(){this.value=0,this.lastValue=0,this.min=null,this.max=null}}).Var.prototype.setMinMax=function(e,t){this.min=e,this.max=t,this.pin()},o.Var.prototype.increment=function(e){this.value+=e,this.pin()},o.Var.prototype.decrement=function(e){this.value-=e,this.pin()},o.Var.prototype.set=function(e){this.value=parseInt(e,10),this.pin()},o.Var.prototype.get=function(){return this.value},o.Var.prototype.hasChanged=function(){return this.value!==this.lastValue},o.Var.prototype.sync=function(){this.lastValue=this.value},o.Var.prototype.pin=function(){null!==this.min&&this.value<this.min?this.value=this.min:null!==this.max&&this.value>this.max&&(this.value=this.max)},o.v={A:new o.Var,B:new o.Var,C:new o.Var,L:new o.Var,R:new o.Var},o.v.L.setMinMax(-100,100),o.v.R.setMinMax(-100,100),o.func=function(e,t,n){var i=o.v[e];if(void 0!==i){var r=parseInt(n,10);"+"===t?i.increment(r):"-"===t&&i.decrement(r)}},o.set=function(e,t){var n=o.v[e];void 0!==n&&n.set(t)},o.get=function(e){return o.v[e].get()},o.printVars=function(){var e="";for(var t in o.v)o.v.hasOwnProperty(t)&&(e=e+", ["+t+"]="+o.v[t].value);console.log(e)},o.resetVars=function(){for(var e in o.v)o.v.hasOwnProperty(e)&&o.v[e].set(0)},o)},{}]},{},[42]);